<analysis>**original_problem_statement:**
The user wants to build a feature-rich application for writing accounting-related blog articles.

**PRODUCT REQUIREMENTS:**
-   Generate articles optimized for SEO AI.
-   Provide a visual editor with a formatting toolbar and an HTML view.
-   Suggest article topics.
-   Include an AI assistant to improve SEO scores.
-   Implement an image generator (Nano Banana) with features like reference images, style presets, 4-variant generation, an image library, a lightbox for larger previews, and AI editing capabilities (inpainting, background change, etc.).
-   Allow direct insertion of generated images into the visual editor.
-   Implement different content templates (standard, listicle, case study).
-   Generate a series of related articles from a single topic.
-   Implement JWT authentication, multi-client workspaces, and an admin role.
-   The admin user should manage users (CRUD) and configure application settings (e.g., WordPress integration).
-   Provide PDF and HTML export options where the visual styling (fonts, colors) is identical to the editor (1:1 export).
-   Integrate with WordPress to allow direct publishing and provide a companion plugin.
-   Implement a subscription system with monthly, semi-annual, and annual plans, using TPay for payments.
-   The application should have a modern, professional design based on the Kurdynowski branding.

**User's preferred language**:
The user communicates in **Polish**. All responses to the user MUST be in Polish.

**what currently exists?**
A full-stack FARM (FastAPI, React, MongoDB) application that functions as a comprehensive SEO Article Builder. It includes:
-   **Authentication:** Full JWT authentication system.
-   **Admin Role & User Management:** An admin role with a dedicated UI to manage all user accounts (CRUD).
-   **Article Generation & Editing:** A rich text editor with a formatting toolbar, an AI SEO assistant, and 1:1 visual styling for content.
-   **Advanced Image Generation:** A standalone generator page and an editor component with features like reference image uploads, batch generation (4 variants), an image library with search/filtering, a lightbox viewer, and AI editing modes.
-   **Exporting:** PDF export (with Polish font support) and HTML export, both styled to match the editor's Kurdynowski branding.
-   **Integrations:** A WordPress integration allowing users to publish articles directly and download a companion plugin. Configuration is handled on a dedicated admin settings page.
-   **Subscription System:** A complete pricing page with monthly, semi-annual, and annual plans. The backend is set up to handle subscription logic and initiate payments via TPay.

**Last working item**:
-   **Last item agent was working**: Fixing a bug in the TPay payment integration. The agent implemented the subscription system, but testing revealed a  when the backend tries to communicate with the TPay API to create a checkout session.
-   **Status**: IN PROGRESS
-   **Agent Testing Done**: Y
-   **Which testing method agent to use?**: backend testing agent
-   **User Testing Done**: N

**All Pending/In progress Issue list**:
-   **Issue 1**: TPay checkout process fails with a 520 Proxy Error. (Priority: P0)

**Issues Detail**:
-   **Issue 1**:
    -   **Attempted fixes**: None. The agent identified the issue from test results right before the session ended.
    -   **Next debug checklist**:
        1.  **Examine Logs:** Check the backend logs ( and ) immediately after triggering the checkout for more detailed error messages about the timeout or connection failure.
        2.  **Review TPay Service:** Carefully inspect . Verify the TPay API endpoint URL ().
        3.  **Check Credentials:** The implementation uses mock credentials (, ). While this is expected for testing, ensure the TPay API doesn't immediately reject requests with invalid formats. The main issue is likely a network timeout, not an auth failure.
        4.  **Network Connectivity:** The container might have issues reaching the external TPay API. Use  from the agent's terminal to attempt a direct connection to . For example: <!DOCTYPE html>
<html>
<head>
            <meta charset="UTF-8"><script type="text/javascript">(window.NREUM||(NREUM={})).init={privacy:{cookies_enabled:true},ajax:{deny_list:["bam.eu01.nr-data.net"]},feature_flags:["soft_nav"],distributed_tracing:{enabled:true}};(window.NREUM||(NREUM={})).loader_config={agentID:"538477078",accountID:"3120374",trustKey:"3120374",xpid:"VwcFUVVUDBADXFJVBAQGV1E=",licenseKey:"NRJS-e350529f8ac9ccb1bfa",applicationID:"383735115",browserID:"538477078"};;/*! For license information please see nr-loader-spa-1.310.0.min.js.LICENSE.txt */
(()=>{var e,t,r={384:(e,t,r)=>{"use strict";r.d(t,{NT:()=>a,US:()=>l,Zm:()=>c,bQ:()=>u,dV:()=>d,pV:()=>f});var n=r(6154),i=r(1863),s=r(944),o=r(1910);const a={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net"};function c(){return n.gm.NREUM||(n.gm.NREUM={}),void 0===n.gm.newrelic&&(n.gm.newrelic=n.gm.NREUM),n.gm.NREUM}function d(){let e=c();return e.o||(e.o={ST:n.gm.setTimeout,SI:n.gm.setImmediate||n.gm.setInterval,CT:n.gm.clearTimeout,XHR:n.gm.XMLHttpRequest,REQ:n.gm.Request,EV:n.gm.Event,PR:n.gm.Promise,MO:n.gm.MutationObserver,FETCH:n.gm.fetch,WS:n.gm.WebSocket},(0,o.i)(...Object.values(e.o))),e}function u(e,t){let r=c();r.initializedAgents??={},t.initializedAt={ms:(0,i.t)(),date:new Date},r.initializedAgents[e]=t,2===Object.keys(r.initializedAgents).length&&(0,s.R)(69)}function l(e,t){c()[e]=t}function f(){return function(){let e=c();const t=e.info||{};e.info={beacon:a.beacon,errorBeacon:a.errorBeacon,...t}}(),function(){let e=c();const t=e.init||{};e.init={...t}}(),d(),function(){let e=c();const t=e.loader_config||{};e.loader_config={...t}}(),c()}},782:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});const n=r(860).K7.pageViewTiming},860:(e,t,r)=>{"use strict";r.d(t,{$J:()=>u,K7:()=>c,P3:()=>d,XX:()=>i,Yy:()=>a,df:()=>s,qY:()=>n,v4:()=>o});const n="events",i="jserrors",s="browser/blobs",o="rum",a="browser/logs",c={ajax:"ajax",genericEvents:"generic_events",jserrors:i,logging:"logging",metrics:"metrics",pageAction:"page_action",pageViewEvent:"page_view_event",pageViewTiming:"page_view_timing",sessionReplay:"session_replay",sessionTrace:"session_trace",softNav:"soft_navigations"},d={[c.pageViewEvent]:1,[c.pageViewTiming]:2,[c.metrics]:3,[c.jserrors]:4,[c.softNav]:5,[c.ajax]:6,[c.sessionTrace]:7,[c.sessionReplay]:8,[c.logging]:9,[c.genericEvents]:10},u={[c.pageViewEvent]:o,[c.pageViewTiming]:n,[c.ajax]:n,[c.softNav]:n,[c.metrics]:i,[c.jserrors]:i,[c.sessionTrace]:s,[c.sessionReplay]:s,[c.logging]:a,[c.genericEvents]:"ins"}},944:(e,t,r)=>{"use strict";r.d(t,{R:()=>i});var n=r(3241);function i(e,t){"function"==typeof console.debug&&(console.debug("New Relic Warning: https://github.com/newrelic/newrelic-browser-agent/blob/main/docs/warning-codes.md#".concat(e),t),(0,n.W)({agentIdentifier:null,drained:null,type:"data",name:"warn",feature:"warn",data:{code:e,secondary:t}}))}},993:(e,t,r)=>{"use strict";r.d(t,{A$:()=>s,ET:()=>o,TZ:()=>a,p_:()=>i});var n=r(860);const i={ERROR:"ERROR",WARN:"WARN",INFO:"INFO",DEBUG:"DEBUG",TRACE:"TRACE"},s={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4,TRACE:5},o="log",a=n.K7.logging},1541:(e,t,r)=>{"use strict";r.d(t,{U:()=>i,f:()=>n});const n={MFE:"MFE",BA:"BA"};function i(e,t){if(2!==t?.harvestEndpointVersion)return{};const r=t.agentRef.runtime.appMetadata.agents[0].entityGuid;return e?{"source.id":e.id,"source.name":e.name,"source.type":e.type,"parent.id":e.parent?.id||r,"parent.type":e.parent?.type||n.BA}:{"entity.guid":r,appId:t.agentRef.info.applicationID}}},1687:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>d,Ze:()=>f,x3:()=>u});var n=r(3241),i=r(7836),s=r(3606),o=r(860),a=r(2646);const c={};function d(e,t){const r={staged:!1,priority:o.P3[t]||0};l(e),c[e].get(t)||c[e].set(t,r)}function u(e,t){e&&c[e]&&(c[e].get(t)&&c[e].delete(t),p(e,t,!1),c[e].size&&h(e))}function l(e){if(!e)throw new Error("agentIdentifier required");c[e]||(c[e]=new Map)}function f(e="",t="feature",r=!1){if(l(e),!e||!c[e].get(t)||r)return p(e,t);c[e].get(t).staged=!0,h(e)}function h(e){const t=Array.from(c[e]);t.every(([e,t])=>t.staged)&&(t.sort((e,t)=>e[1].priority-t[1].priority),t.forEach(([t])=>{c[e].delete(t),p(e,t)}))}function p(e,t,r=!0){const o=e?i.ee.get(e):i.ee,c=s.i.handlers;if(!o.aborted&&o.backlog&&c){if((0,n.W)({agentIdentifier:e,type:"lifecycle",name:"drain",feature:t}),r){const e=o.backlog[t],r=c[t];if(r){for(let t=0;e&&t<e.length;++t)g(e[t],r);Object.entries(r).forEach(([e,t])=>{Object.values(t||{}).forEach(t=>{t[0]?.on&&t[0].context()instanceof a.y&&!t[0].listeners(e).includes(t[1])&&t[0].on(e,t[1])})})}}o.isolatedBacklog||delete c[t],o.backlog[t]=null,o.emit("drain-"+t,[])}}function g(e,t){var r=e[1];Object.values(t[r]||{}).forEach(t=>{var r=e[0];if(t[0]===r){var n=t[1],i=e[3],s=e[2];n.apply(i,s)}})}},1738:(e,t,r)=>{"use strict";r.d(t,{U:()=>h,Y:()=>f});var n=r(3241),i=r(9908),s=r(1863),o=r(944),a=r(5701),c=r(3969),d=r(8362),u=r(860),l=r(4261);function f(e,t,r,s){const f=s||r;!f||f[e]&&f[e]!==d.d.prototype[e]||(f[e]=function(){(0,i.p)(c.xV,["API/"+e+"/called"],void 0,u.K7.metrics,r.ee),(0,n.W)({agentIdentifier:r.agentIdentifier,drained:!!a.B?.[r.agentIdentifier],type:"data",name:"api",feature:l.Pl+e,data:{}});try{return t.apply(this,arguments)}catch(e){(0,o.R)(23,e)}})}function h(e,t,r,n,o){const a=e.info;null===r?delete a.jsAttributes[t]:a.jsAttributes[t]=r,(o||null===r)&&(0,i.p)(l.Pl+n,[(0,s.t)(),t,r],void 0,"session",e.ee)}},1741:(e,t,r)=>{"use strict";r.d(t,{W:()=>s});var n=r(944),i=r(4261);class s{#e(e,...t){if(this[e]!==s.prototype[e])return this[e](...t);(0,n.R)(35,e)}addPageAction(e,t){return this.#e(i.hG,e,t)}register(e){return this.#e(i.eY,e)}recordCustomEvent(e,t){return this.#e(i.fF,e,t)}setPageViewName(e,t){return this.#e(i.Fw,e,t)}setCustomAttribute(e,t,r){return this.#e(i.cD,e,t,r)}noticeError(e,t){return this.#e(i.o5,e,t)}setUserId(e,t=!1){return this.#e(i.Dl,e,t)}setApplicationVersion(e){return this.#e(i.nb,e)}setErrorHandler(e){return this.#e(i.bt,e)}addRelease(e,t){return this.#e(i.k6,e,t)}log(e,t){return this.#e(i.$9,e,t)}start(){return this.#e(i.d3)}finished(e){return this.#e(i.BL,e)}recordReplay(){return this.#e(i.CH)}pauseReplay(){return this.#e(i.Tb)}addToTrace(e){return this.#e(i.U2,e)}setCurrentRouteName(e){return this.#e(i.PA,e)}interaction(e){return this.#e(i.dT,e)}wrapLogger(e,t,r){return this.#e(i.Wb,e,t,r)}measure(e,t){return this.#e(i.V1,e,t)}consent(e){return this.#e(i.Pv,e)}}},1863:(e,t,r)=>{"use strict";function n(){return Math.floor(performance.now())}r.d(t,{t:()=>n})},1910:(e,t,r)=>{"use strict";r.d(t,{i:()=>s});var n=r(944);const i=new Map;function s(...e){return e.every(e=>{if(i.has(e))return i.get(e);const t="function"==typeof e?e.toString():"",r=t.includes("[native code]"),s=t.includes("nrWrapper");return r||s||(0,n.R)(64,e?.name||t),i.set(e,r),r})}},2555:(e,t,r)=>{"use strict";r.d(t,{D:()=>a,f:()=>o});var n=r(384),i=r(8122);const s={beacon:n.NT.beacon,errorBeacon:n.NT.errorBeacon,licenseKey:void 0,applicationID:void 0,sa:void 0,queueTime:void 0,applicationTime:void 0,ttGuid:void 0,user:void 0,account:void 0,product:void 0,extra:void 0,jsAttributes:{},userAttributes:void 0,atts:void 0,transactionName:void 0,tNamePlain:void 0};function o(e){try{return!!e.licenseKey&&!!e.errorBeacon&&!!e.applicationID}catch(e){return!1}}const a=e=>(0,i.a)(e,s)},2614:(e,t,r)=>{"use strict";r.d(t,{BB:()=>o,H3:()=>n,g:()=>d,iL:()=>c,tS:()=>a,uh:()=>i,wk:()=>s});const n="NRBA",i="SESSION",s=144e5,o=18e5,a={STARTED:"session-started",PAUSE:"session-pause",RESET:"session-reset",RESUME:"session-resume",UPDATE:"session-update"},c={SAME_TAB:"same-tab",CROSS_TAB:"cross-tab"},d={OFF:0,FULL:1,ERROR:2}},2646:(e,t,r)=>{"use strict";r.d(t,{y:()=>n});class n{constructor(e){this.contextId=e}}},2843:(e,t,r)=>{"use strict";r.d(t,{G:()=>s,u:()=>i});var n=r(3878);function i(e,t=!1,r,i){(0,n.DD)("visibilitychange",function(){if(t)return void("hidden"===document.visibilityState&&e());e(document.visibilityState)},r,i)}function s(e,t,r){(0,n.sp)("pagehide",e,t,r)}},3241:(e,t,r)=>{"use strict";r.d(t,{W:()=>s});var n=r(6154);const i="newrelic";function s(e={}){try{n.gm.dispatchEvent(new CustomEvent(i,{detail:e}))}catch(e){}}},3304:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(7836);const i=()=>{const e=new WeakSet;return(t,r)=>{if("object"==typeof r&&null!==r){if(e.has(r))return;e.add(r)}return r}};function s(e){try{return JSON.stringify(e,i())??""}catch(e){try{n.ee.emit("internal-error",[e])}catch(e){}return""}}},3333:(e,t,r)=>{"use strict";r.d(t,{$v:()=>u,TZ:()=>n,Xh:()=>c,Zp:()=>i,kd:()=>d,mq:()=>a,nf:()=>o,qN:()=>s});const n=r(860).K7.genericEvents,i=["auxclick","click","copy","keydown","paste","scrollend"],s=["focus","blur"],o=4,a=1e3,c=2e3,d=["PageAction","UserAction","BrowserPerformance"],u={RESOURCES:"experimental.resources",REGISTER:"register"}},3434:(e,t,r)=>{"use strict";r.d(t,{Jt:()=>s,YM:()=>d});var n=r(7836),i=r(5607);const s="nr@original:".concat(i.W),o=50;var a=Object.prototype.hasOwnProperty,c=!1;function d(e,t){return e||(e=n.ee),r.inPlace=function(e,t,n,i,s){n||(n="");const o="-"===n.charAt(0);for(let a=0;a<t.length;a++){const c=t[a],d=e[c];l(d)||(e[c]=r(d,o?c+n:n,i,c,s))}},r.flag=s,r;function r(t,r,n,c,d){return l(t)?t:(r||(r=""),nrWrapper[s]=t,function(e,t,r){if(Object.defineProperty&&Object.keys)try{return Object.keys(e).forEach(function(r){Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){return e[r]=t,t}})}),t}catch(e){u([e],r)}for(var n in e)a.call(e,n)&&(t[n]=e[n])}(t,nrWrapper,e),nrWrapper);function nrWrapper(){var s,a,l,f;let h;try{a=this,s=[...arguments],l="function"==typeof n?n(s,a):n||{}}catch(t){u([t,"",[s,a,c],l],e)}i(r+"start",[s,a,c],l,d);const p=performance.now();let g;try{return f=t.apply(a,s),g=performance.now(),f}catch(e){throw g=performance.now(),i(r+"err",[s,a,e],l,d),h=e,h}finally{const e=g-p,t={start:p,end:g,duration:e,isLongTask:e>=o,methodName:c,thrownError:h};t.isLongTask&&i("long-task",[t,a],l,d),i(r+"end",[s,a,f],l,d)}}}function i(r,n,i,s){if(!c||t){var o=c;c=!0;try{e.emit(r,n,i,t,s)}catch(t){u([t,r,n,i],e)}c=o}}}function u(e,t){t||(t=n.ee);try{t.emit("internal-error",e)}catch(e){}}function l(e){return!(e&&"function"==typeof e&&e.apply&&!e[s])}},3606:(e,t,r)=>{"use strict";r.d(t,{i:()=>s});var n=r(9908);s.on=o;var i=s.handlers={};function s(e,t,r,s){o(s||n.d,i,e,t,r)}function o(e,t,r,i,s){s||(s="feature"),e||(e=n.d);var o=t[s]=t[s]||{};(o[r]=o[r]||[]).push([e,i])}},3738:(e,t,r)=>{"use strict";r.d(t,{He:()=>i,Kp:()=>a,Lc:()=>d,Rz:()=>u,TZ:()=>n,bD:()=>s,d3:()=>o,jx:()=>l,sl:()=>f,uP:()=>c});const n=r(860).K7.sessionTrace,i="bstResource",s="resource",o="-start",a="-end",c="fn"+o,d="fn"+a,u="pushState",l=1e3,f=3e4},3785:(e,t,r)=>{"use strict";r.d(t,{R:()=>c,b:()=>d});var n=r(9908),i=r(1863),s=r(860),o=r(3969),a=r(993);function c(e,t,r={},c=a.p_.INFO,d=!0,u,l=(0,i.t)()){(0,n.p)(o.xV,["API/logging/".concat(c.toLowerCase(),"/called")],void 0,s.K7.metrics,e),(0,n.p)(a.ET,[l,t,r,c,d,u],void 0,s.K7.logging,e)}function d(e){return"string"==typeof e&&Object.values(a.p_).some(t=>t===e.toUpperCase().trim())}},3878:(e,t,r)=>{"use strict";function n(e,t){return{capture:e,passive:!1,signal:t}}function i(e,t,r=!1,i){window.addEventListener(e,t,n(r,i))}function s(e,t,r=!1,i){document.addEventListener(e,t,n(r,i))}r.d(t,{DD:()=>s,jT:()=>n,sp:()=>i})},3962:(e,t,r)=>{"use strict";r.d(t,{AM:()=>o,O2:()=>l,OV:()=>s,Qu:()=>f,TZ:()=>c,ih:()=>h,pP:()=>a,t1:()=>u,tC:()=>i,wD:()=>d});var n=r(860);const i=["click","keydown","submit"],s="popstate",o="api",a="initialPageLoad",c=n.K7.softNav,d=5e3,u=500,l={INITIAL_PAGE_LOAD:"",ROUTE_CHANGE:1,UNSPECIFIED:2},f={INTERACTION:1,AJAX:2,CUSTOM_END:3,CUSTOM_TRACER:4},h={IP:"in progress",PF:"pending finish",FIN:"finished",CAN:"cancelled"}},3969:(e,t,r)=>{"use strict";r.d(t,{TZ:()=>n,XG:()=>a,rs:()=>i,xV:()=>o,z_:()=>s});const n=r(860).K7.metrics,i="sm",s="cm",o="storeSupportabilityMetrics",a="storeEventMetrics"},4234:(e,t,r)=>{"use strict";r.d(t,{W:()=>s});var n=r(7836),i=r(1687);class s{constructor(e,t){this.agentIdentifier=e,this.ee=n.ee.get(e),this.featureName=t,this.blocked=!1}deregisterDrain(){(0,i.x3)(this.agentIdentifier,this.featureName)}}},4261:(e,t,r)=>{"use strict";r.d(t,{$9:()=>u,BL:()=>c,CH:()=>p,Dl:()=>R,Fw:()=>w,PA:()=>v,Pl:()=>n,Pv:()=>x,Tb:()=>f,U2:()=>o,V1:()=>A,Wb:()=>T,bt:()=>b,cD:()=>y,d3:()=>E,dT:()=>d,eY:()=>g,fF:()=>h,hG:()=>s,hw:()=>i,k6:()=>a,nb:()=>m,o5:()=>l});const n="api-",i=n+"ixn-",s="addPageAction",o="addToTrace",a="addRelease",c="finished",d="interaction",u="log",l="noticeError",f="pauseReplay",h="recordCustomEvent",p="recordReplay",g="register",m="setApplicationVersion",v="setCurrentRouteName",y="setCustomAttribute",b="setErrorHandler",w="setPageViewName",R="setUserId",E="start",T="wrapLogger",A="measure",x="consent"},5205:(e,t,r)=>{"use strict";r.d(t,{j:()=>_});var n=r(384),i=r(1741);var s=r(2555),o=r(3333);const a=e=>{if(!e||"string"!=typeof e)return!1;try{document.createDocumentFragment().querySelector(e)}catch{return!1}return!0};var c=r(2614),d=r(944),u=r(8122);const l="[data-nr-mask]",f=e=>(0,u.a)(e,(()=>{const e={feature_flags:[],experimental:{allow_registered_children:!1,resources:!1},mask_selector:"*",block_selector:"[data-nr-block]",mask_input_options:{color:!1,date:!1,"datetime-local":!1,email:!1,month:!1,number:!1,range:!1,search:!1,tel:!1,text:!1,time:!1,url:!1,week:!1,textarea:!1,select:!1,password:!0}};return{ajax:{deny_list:void 0,block_internal:!0,enabled:!0,autoStart:!0},api:{get allow_registered_children(){return e.feature_flags.includes(o.$v.REGISTER)||e.experimental.allow_registered_children},set allow_registered_children(t){e.experimental.allow_registered_children=t},duplicate_registered_data:!1},browser_consent_mode:{enabled:!1},distributed_tracing:{enabled:void 0,exclude_newrelic_header:void 0,cors_use_newrelic_header:void 0,cors_use_tracecontext_headers:void 0,allowed_origins:void 0},get feature_flags(){return e.feature_flags},set feature_flags(t){e.feature_flags=t},generic_events:{enabled:!0,autoStart:!0},harvest:{interval:30},jserrors:{enabled:!0,autoStart:!0},logging:{enabled:!0,autoStart:!0},metrics:{enabled:!0,autoStart:!0},obfuscate:void 0,page_action:{enabled:!0},page_view_event:{enabled:!0,autoStart:!0},page_view_timing:{enabled:!0,autoStart:!0},performance:{capture_marks:!1,capture_measures:!1,capture_detail:!0,resources:{get enabled(){return e.feature_flags.includes(o.$v.RESOURCES)||e.experimental.resources},set enabled(t){e.experimental.resources=t},asset_types:[],first_party_domains:[],ignore_newrelic:!0}},privacy:{cookies_enabled:!0},proxy:{assets:void 0,beacon:void 0},session:{expiresMs:c.wk,inactiveMs:c.BB},session_replay:{autoStart:!0,enabled:!1,preload:!1,sampling_rate:10,error_sampling_rate:100,collect_fonts:!1,inline_images:!1,fix_stylesheets:!0,mask_all_inputs:!0,get mask_text_selector(){return e.mask_selector},set mask_text_selector(t){a(t)?e.mask_selector="".concat(t,",").concat(l):""===t||null===t?e.mask_selector=l:(0,d.R)(5,t)},get block_class(){return"nr-block"},get ignore_class(){return"nr-ignore"},get mask_text_class(){return"nr-mask"},get block_selector(){return e.block_selector},set block_selector(t){a(t)?e.block_selector+=",".concat(t):""!==t&&(0,d.R)(6,t)},get mask_input_options(){return e.mask_input_options},set mask_input_options(t){t&&"object"==typeof t?e.mask_input_options={...t,password:!0}:(0,d.R)(7,t)}},session_trace:{enabled:!0,autoStart:!0},soft_navigations:{enabled:!0,autoStart:!0},ssl:void 0,user_actions:{enabled:!0,elementAttributes:["id","className","tagName","type"]}}})());var h=r(6154),p=r(9324);let g=0;const m={buildEnv:p.F3,distMethod:p.Xs,version:p.xv,originTime:h.WN},v={consented:!1},y={appMetadata:{},get consented(){return this.session?.state?.consent||v.consented},set consented(e){v.consented=e},customTransaction:void 0,denyList:void 0,disabled:!1,harvester:void 0,isolatedBacklog:!1,isRecording:!1,loaderType:void 0,maxBytes:3e4,obfuscator:void 0,onerror:void 0,ptid:void 0,releaseIds:{},session:void 0,timeKeeper:void 0,registeredEntities:[],jsAttributesMetadata:{bytes:0},get harvestCount(){return++g}},b=e=>{const t=(0,u.a)(e,y),r=Object.keys(m).reduce((e,t)=>(e[t]={value:m[t],writable:!1,configurable:!0,enumerable:!0},e),{});return Object.defineProperties(t,r)};var w=r(5701);const R=e=>{const t=e.startsWith("http");e+="/",r.p=t?e:"https://"+e};var E=r(7836),T=r(3241);const A={accountID:void 0,trustKey:void 0,agentID:void 0,licenseKey:void 0,applicationID:void 0,xpid:void 0},x=e=>(0,u.a)(e,A),S=new Set;function _(e,t={},r,o){let{init:a,info:c,loader_config:d,runtime:u={},exposed:l=!0}=t;if(!c){const e=(0,n.pV)();a=e.init,c=e.info,d=e.loader_config}e.init=f(a||{}),e.loader_config=x(d||{}),c.jsAttributes??={},h.bv&&(c.jsAttributes.isWorker=!0),e.info=(0,s.D)(c);const p=e.init,g=[c.beacon,c.errorBeacon];S.has(e.agentIdentifier)||(p.proxy.assets&&(R(p.proxy.assets),g.push(p.proxy.assets)),p.proxy.beacon&&g.push(p.proxy.beacon),e.beacons=[...g],function(e){const t=(0,n.pV)();Object.getOwnPropertyNames(i.W.prototype).forEach(r=>{const n=i.W.prototype[r];if("function"!=typeof n||"constructor"===n)return;let s=t[r];e[r]&&!1!==e.exposed&&"micro-agent"!==e.runtime?.loaderType&&(t[r]=(...t)=>{const n=e[r](...t);return s?s(...t):n})})}(e),(0,n.US)("activatedFeatures",w.B)),u.denyList=[...p.ajax.deny_list||[],...p.ajax.block_internal?g:[]],u.ptid=e.agentIdentifier,u.loaderType=r,e.runtime=b(u),S.has(e.agentIdentifier)||(e.ee=E.ee.get(e.agentIdentifier),e.exposed=l,(0,T.W)({agentIdentifier:e.agentIdentifier,drained:!!w.B?.[e.agentIdentifier],type:"lifecycle",name:"initialize",feature:void 0,data:e.config})),S.add(e.agentIdentifier)}},5270:(e,t,r)=>{"use strict";r.d(t,{Aw:()=>o,SR:()=>s,rF:()=>a});var n=r(384),i=r(7767);function s(e){return!!(0,n.dV)().o.MO&&(0,i.V)(e)&&!0===e?.session_trace.enabled}function o(e){return!0===e?.session_replay.preload&&s(e)}function a(e,t){try{if("string"==typeof t?.type){if("password"===t.type.toLowerCase())return"*".repeat(e?.length||0);if(void 0!==t?.dataset?.nrUnmask||t?.classList?.contains("nr-unmask"))return e}}catch(e){}return"string"==typeof e?e.replace(/[\S]/g,"*"):"*".repeat(e?.length||0)}},5289:(e,t,r)=>{"use strict";r.d(t,{GG:()=>o,Qr:()=>c,sB:()=>a});var n=r(3878),i=r(6389);function s(){return"undefined"==typeof document||"complete"===document.readyState}function o(e,t){if(s())return e();const r=(0,i.J)(e),o=setInterval(()=>{s()&&(clearInterval(o),r())},500);(0,n.sp)("load",r,t)}function a(e){if(s())return e();(0,n.DD)("DOMContentLoaded",e)}function c(e){if(s())return e();(0,n.sp)("popstate",e)}},5607:(e,t,r)=>{"use strict";r.d(t,{W:()=>n});const n=(0,r(9566).bz)()},5701:(e,t,r)=>{"use strict";r.d(t,{B:()=>s,t:()=>o});var n=r(3241);const i=new Set,s={};function o(e,t){const r=t.agentIdentifier;s[r]??={},e&&"object"==typeof e&&(i.has(r)||(t.ee.emit("rumresp",[e]),s[r]=e,i.add(r),(0,n.W)({agentIdentifier:r,loaded:!0,drained:!0,type:"lifecycle",name:"load",feature:void 0,data:e})))}},6154:(e,t,r)=>{"use strict";r.d(t,{OF:()=>d,RI:()=>i,WN:()=>f,bv:()=>s,eN:()=>h,gm:()=>o,lR:()=>l,m:()=>c,mw:()=>a,sb:()=>u});var n=r(1863);const i="undefined"!=typeof window&&!!window.document,s="undefined"!=typeof WorkerGlobalScope&&("undefined"!=typeof self&&self instanceof WorkerGlobalScope&&self.navigator instanceof WorkerNavigator||"undefined"!=typeof globalThis&&globalThis instanceof WorkerGlobalScope&&globalThis.navigator instanceof WorkerNavigator),o=i?window:"undefined"!=typeof WorkerGlobalScope&&("undefined"!=typeof self&&self instanceof WorkerGlobalScope&&self||"undefined"!=typeof globalThis&&globalThis instanceof WorkerGlobalScope&&globalThis),a=Boolean("hidden"===o?.document?.visibilityState),c=""+o?.location,d=/iPad|iPhone|iPod/.test(o.navigator?.userAgent),u=d&&"undefined"==typeof SharedWorker,l=(()=>{const e=o.navigator?.userAgent?.match(/Firefox[/\s](\d+\.\d+)/);return Array.isArray(e)&&e.length>=2?+e[1]:0})(),f=Date.now()-(0,n.t)(),h=()=>"undefined"!=typeof PerformanceNavigationTiming&&o?.performance?.getEntriesByType("navigation")?.[0]?.responseStart},6344:(e,t,r)=>{"use strict";r.d(t,{BB:()=>u,Qb:()=>l,TZ:()=>i,Ug:()=>o,Vh:()=>s,_s:()=>a,bc:()=>d,yP:()=>c});var n=r(2614);const i=r(860).K7.sessionReplay,s="errorDuringReplay",o=.12,a={DomContentLoaded:0,Load:1,FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Custom:5},c={[n.g.ERROR]:15e3,[n.g.FULL]:3e5,[n.g.OFF]:0},d={RESET:{message:"Session was reset",sm:"Reset"},IMPORT:{message:"Recorder failed to import",sm:"Import"},TOO_MANY:{message:"429: Too Many Requests",sm:"Too-Many"},TOO_BIG:{message:"Payload was too large",sm:"Too-Big"},CROSS_TAB:{message:"Session Entity was set to OFF on another tab",sm:"Cross-Tab"},ENTITLEMENTS:{message:"Session Replay is not allowed and will not be started",sm:"Entitlement"}},u=5e3,l={API:"api",RESUME:"resume",SWITCH_TO_FULL:"switchToFull",INITIALIZE:"initialize",PRELOAD:"preload"}},6389:(e,t,r)=>{"use strict";function n(e,t=500,r={}){const n=r?.leading||!1;let i;return(...r)=>{n&&void 0===i&&(e.apply(this,r),i=setTimeout(()=>{i=clearTimeout(i)},t)),n||(clearTimeout(i),i=setTimeout(()=>{e.apply(this,r)},t))}}function i(e){let t=!1;return(...r)=>{t||(t=!0,e.apply(this,r))}}r.d(t,{J:()=>i,s:()=>n})},6630:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});const n=r(860).K7.pageViewEvent},6774:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});const n=r(860).K7.jserrors},7295:(e,t,r)=>{"use strict";r.d(t,{Xv:()=>o,gX:()=>i,iW:()=>s});var n=[];function i(e){if(!e||s(e))return!1;if(0===n.length)return!0;if("*"===n[0].hostname)return!1;for(var t=0;t<n.length;t++){var r=n[t];if(r.hostname.test(e.hostname)&&r.pathname.test(e.pathname))return!1}return!0}function s(e){return void 0===e.hostname}function o(e){if(n=[],e&&e.length)for(var t=0;t<e.length;t++){let r=e[t];if(!r)continue;if("*"===r)return void(n=[{hostname:"*"}]);0===r.indexOf("http://")?r=r.substring(7):0===r.indexOf("https://")&&(r=r.substring(8));const i=r.indexOf("/");let s,o;i>0?(s=r.substring(0,i),o=r.substring(i)):(s=r,o="*");let[c]=s.split(":");n.push({hostname:a(c),pathname:a(o,!0)})}}function a(e,t=!1){const r=e.replace(/[.+?^${}()|[\]\\]/g,e=>"\\"+e).replace(/\*/g,".*?");return new RegExp((t?"^":"")+r+"$")}},7485:(e,t,r)=>{"use strict";r.d(t,{D:()=>i});var n=r(6154);function i(e){if(0===(e||"").indexOf("data:"))return{protocol:"data"};try{const t=new URL(e,location.href),r={port:t.port,hostname:t.hostname,pathname:t.pathname,search:t.search,protocol:t.protocol.slice(0,t.protocol.indexOf(":")),sameOrigin:t.protocol===n.gm?.location?.protocol&&t.host===n.gm?.location?.host};return r.port&&""!==r.port||("http:"===t.protocol&&(r.port="80"),"https:"===t.protocol&&(r.port="443")),r.pathname&&""!==r.pathname?r.pathname.startsWith("/")||(r.pathname="/".concat(r.pathname)):r.pathname="/",r}catch(e){return{}}}},7699:(e,t,r)=>{"use strict";r.d(t,{It:()=>s,KC:()=>a,No:()=>i,qh:()=>o});var n=r(860);const i=16e3,s=1e6,o="SESSION_ERROR",a={[n.K7.logging]:!0,[n.K7.genericEvents]:!1,[n.K7.jserrors]:!1,[n.K7.ajax]:!1}},7767:(e,t,r)=>{"use strict";r.d(t,{V:()=>i});var n=r(6154);const i=e=>n.RI&&!0===e?.privacy.cookies_enabled},7836:(e,t,r)=>{"use strict";r.d(t,{P:()=>a,ee:()=>c});var n=r(384),i=r(8990),s=r(2646),o=r(5607);const a="nr@context:".concat(o.W),c=function e(t,r){var n={},o={},u={},l=!1;try{l=16===r.length&&d.initializedAgents?.[r]?.runtime.isolatedBacklog}catch(e){}var f={on:p,addEventListener:p,removeEventListener:function(e,t){var r=n[e];if(!r)return;for(var i=0;i<r.length;i++)r[i]===t&&r.splice(i,1)},emit:function(e,r,n,i,s){!1!==s&&(s=!0);if(c.aborted&&!i)return;t&&s&&t.emit(e,r,n);var a=h(n);g(e).forEach(e=>{e.apply(a,r)});var d=v()[o[e]];d&&d.push([f,e,r,a]);return a},get:m,listeners:g,context:h,buffer:function(e,t){const r=v();if(t=t||"feature",f.aborted)return;Object.entries(e||{}).forEach(([e,n])=>{o[n]=t,t in r||(r[t]=[])})},abort:function(){f._aborted=!0,Object.keys(f.backlog).forEach(e=>{delete f.backlog[e]})},isBuffering:function(e){return!!v()[o[e]]},debugId:r,backlog:l?{}:t&&"object"==typeof t.backlog?t.backlog:{},isolatedBacklog:l};return Object.defineProperty(f,"aborted",{get:()=>{let e=f._aborted||!1;return e||(t&&(e=t.aborted),e)}}),f;function h(e){return e&&e instanceof s.y?e:e?(0,i.I)(e,a,()=>new s.y(a)):new s.y(a)}function p(e,t){n[e]=g(e).concat(t)}function g(e){return n[e]||[]}function m(t){return u[t]=u[t]||e(f,t)}function v(){return f.backlog}}(void 0,"globalEE"),d=(0,n.Zm)();d.ee||(d.ee=c)},7866:(e,t,r)=>{"use strict";r.d(t,{Nc:()=>s,cn:()=>a,fL:()=>i,h3:()=>n,hB:()=>o});const n=/function (.+?)\s*\(/,i=/^\s*at .+ \(eval at \S+ \((?:(?:file|http|https):[^)]+)?\)(?:, [^:]*:\d+:\d+)?\)$/i,s=/^\s*at Function code \(Function code:\d+:\d+\)\s*/i,o=/^\s*at (?:((?:\[object object\])?(?:[^(]*\([^)]*\))*[^()]*(?: \[as \S+\])?) )?\(?((?:file|http|https|chrome-extension):.*?)?:(\d+)(?::(\d+))?\)?\s*$/i,a=/^\s*(?:([^@]*)(?:\(.*?\))?@)?((?:file|http|https|chrome|safari-extension).*?):(\d+)(?::(\d+))?\s*$/i},8122:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var n=r(944);function i(e,t){try{if(!e||"object"!=typeof e)return(0,n.R)(3);if(!t||"object"!=typeof t)return(0,n.R)(4);const r=Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t)),s=0===Object.keys(r).length?e:r;for(let o in s)if(void 0!==e[o])try{if(null===e[o]){r[o]=null;continue}Array.isArray(e[o])&&Array.isArray(t[o])?r[o]=Array.from(new Set([...e[o],...t[o]])):"object"==typeof e[o]&&"object"==typeof t[o]?r[o]=i(e[o],t[o]):r[o]=e[o]}catch(e){r[o]||(0,n.R)(1,e)}return r}catch(e){(0,n.R)(2,e)}}},8139:(e,t,r)=>{"use strict";r.d(t,{u:()=>f});var n=r(7836),i=r(3434),s=r(8990),o=r(6154);const a={},c=o.gm.XMLHttpRequest,d="addEventListener",u="removeEventListener",l="nr@wrapped:".concat(n.P);function f(e){var t=function(e){return(e||n.ee).get("events")}(e);if(a[t.debugId]++)return t;a[t.debugId]=1;var r=(0,i.YM)(t,!0);function f(e){r.inPlace(e,[d,u],"-",p)}function p(e,t){return e[1]}return"getPrototypeOf"in Object&&(o.RI&&h(document,f),c&&h(c.prototype,f),h(o.gm,f)),t.on(d+"-start",function(e,t){var n=e[1];if(null!==n&&("function"==typeof n||"object"==typeof n)&&"newrelic"!==e[0]){var i=(0,s.I)(n,l,function(){var e={object:function(){if("function"!=typeof n.handleEvent)return;return n.handleEvent.apply(n,arguments)},function:n}[typeof n];return e?r(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=e[1]=i}}),t.on(u+"-start",function(e){e[1]=this.wrapped||e[1]}),t}function h(e,t,...r){let n=e;for(;"object"==typeof n&&!Object.prototype.hasOwnProperty.call(n,d);)n=Object.getPrototypeOf(n);n&&t(n,...r)}},8362:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var n=r(9566),i=r(1741);class s extends i.W{agentIdentifier=(0,n.LA)(16)}},8374:(e,t,r)=>{r.nc=(()=>{try{return document?.currentScript?.nonce}catch(e){}return""})()},8990:(e,t,r)=>{"use strict";r.d(t,{I:()=>i});var n=Object.prototype.hasOwnProperty;function i(e,t,r){if(n.call(e,t))return e[t];var i=r();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:i,writable:!0,enumerable:!1}),i}catch(e){}return e[t]=i,i}},9119:(e,t,r)=>{"use strict";r.d(t,{L:()=>s});var n=/([^?#]*)[^#]*(#[^?]*|$).*/,i=/([^?#]*)().*/;function s(e,t){return e?e.replace(t?n:i,"$1$2"):e}},9300:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});const n=r(860).K7.ajax},9324:(e,t,r)=>{"use strict";r.d(t,{AJ:()=>o,F3:()=>i,Xs:()=>s,Yq:()=>a,xv:()=>n});const n="1.310.0",i="PROD",s="CDN",o="@newrelic/rrweb",a="1.0.1"},9566:(e,t,r)=>{"use strict";r.d(t,{LA:()=>a,ZF:()=>c,bz:()=>o,el:()=>d});var n=r(6154);const i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";function s(e,t){return e?15&e[t]:16*Math.random()|0}function o(){const e=n.gm?.crypto||n.gm?.msCrypto;let t,r=0;return e&&e.getRandomValues&&(t=e.getRandomValues(new Uint8Array(30))),i.split("").map(e=>"x"===e?s(t,r++).toString(16):"y"===e?(3&s()|8).toString(16):e).join("")}function a(e){const t=n.gm?.crypto||n.gm?.msCrypto;let r,i=0;t&&t.getRandomValues&&(r=t.getRandomValues(new Uint8Array(e)));const o=[];for(var a=0;a<e;a++)o.push(s(r,i++).toString(16));return o.join("")}function c(){return a(16)}function d(){return a(32)}},9908:(e,t,r)=>{"use strict";r.d(t,{d:()=>n,p:()=>i});var n=r(7836).ee.get("handle");function i(e,t,r,i,s){s?(s.buffer([e],i),s.emit(e,t,r)):(n.buffer([e],i),n.emit(e,t,r))}}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return r[e](s,s.exports,i),s.exports}i.m=r,i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,r)=>(i.f[r](e,t),t),[])),i.u=e=>({212:"nr-spa-compressor",249:"nr-spa-recorder",478:"nr-spa"}[e]+"-1.310.0.min.js"),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="NRBA-1.310.0.PROD:",i.l=(r,n,s,o)=>{if(e[r])e[r].push(n);else{var a,c;if(void 0!==s)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var l=d[u];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==t+s){a=l;break}}if(!a){c=!0;var f={478:"sha512-eRmCP7GYaflAj7pXKrGwvq/OpZnQBaaXDx45w2bPN7QETEzQhI1xagUNsszpNEUoi8m+CRbE38KBkClIedmN7A==",249:"sha512-0JvelT13UDlqHSbwmu09ONeN31f+MkWScEOFGkeBfWXqQ4opKCkmQBcBD5mgqf64zo6nJK58fEL33amIaMNG4Q==",212:"sha512-pqVYVYNanm/cIinEU7pGsUNIY8IIePiFCROiaT8secQw4gU2L/AXuDxn4SeZOVH0XB3NIYy8TZfHZ/2uB3C87w=="};(a=document.createElement("script")).charset="utf-8",i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+s),a.src=r,0!==a.src.indexOf(window.location.origin+"/")&&(a.crossOrigin="anonymous"),f[o]&&(a.integrity=f[o])}e[r]=[n];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),c&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="https://js-agent.newrelic.com/",(()=>{var e={38:0,788:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise((r,i)=>n=e[t]=[r,i]);r.push(n[2]=s);var o=i.p+i.u(t),a=new Error;i.l(o,r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed: ("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,n[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var n,s,[o,a,c]=r,d=0;if(o.some(t=>0!==e[t])){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(c)c(i)}for(t&&t(r);d<o.length;d++)s=o[d],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self["webpackChunk:NRBA-1.310.0.PROD"]=self["webpackChunk:NRBA-1.310.0.PROD"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";i(8374);var e=i(8362),t=i(860);const r=Object.values(t.K7);var n=i(5205);var s=i(9908),o=i(1863),a=i(4261),c=i(1738);var d=i(1687),u=i(4234),l=i(5289),f=i(6154),h=i(944),p=i(5270),g=i(7767),m=i(6389),v=i(7699);class y extends u.W{constructor(e,t){super(e.agentIdentifier,t),this.agentRef=e,this.abortHandler=void 0,this.featAggregate=void 0,this.loadedSuccessfully=void 0,this.onAggregateImported=new Promise(e=>{this.loadedSuccessfully=e}),this.deferred=Promise.resolve(),!1===e.init[this.featureName].autoStart?this.deferred=new Promise((t,r)=>{this.ee.on("manual-start-all",(0,m.J)(()=>{(0,d.Ak)(e.agentIdentifier,this.featureName),t()}))}):(0,d.Ak)(e.agentIdentifier,t)}importAggregator(e,t,r={}){if(this.featAggregate)return;const n=async()=>{let n;await this.deferred;try{if((0,g.V)(e.init)){const{setupAgentSession:t}=await i.e(478).then(i.bind(i,8766));n=t(e)}}catch(e){(0,h.R)(20,e),this.ee.emit("internal-error",[e]),(0,s.p)(v.qh,[e],void 0,this.featureName,this.ee)}try{if(!this.#t(this.featureName,n,e.init))return(0,d.Ze)(this.agentIdentifier,this.featureName),void this.loadedSuccessfully(!1);const{Aggregate:i}=await t();this.featAggregate=new i(e,r),e.runtime.harvester.initializedAggregates.push(this.featAggregate),this.loadedSuccessfully(!0)}catch(e){(0,h.R)(34,e),this.abortHandler?.(),(0,d.Ze)(this.agentIdentifier,this.featureName,!0),this.loadedSuccessfully(!1),this.ee&&this.ee.abort()}};f.RI?(0,l.GG)(()=>n(),!0):n()}#t(e,r,n){if(this.blocked)return!1;switch(e){case t.K7.sessionReplay:return(0,p.SR)(n)&&!!r;case t.K7.sessionTrace:return!!r;default:return!0}}}var b=i(6630),w=i(2614),R=i(3241);class E extends y{static featureName=b.T;constructor(e){var t;super(e,b.T),this.setupInspectionEvents(e.agentIdentifier),t=e,(0,c.Y)(a.Fw,function(e,r){"string"==typeof e&&("/"!==e.charAt(0)&&(e="/"+e),t.runtime.customTransaction=(r||"http://custom.transaction")+e,(0,s.p)(a.Pl+a.Fw,[(0,o.t)()],void 0,void 0,t.ee))},t),this.importAggregator(e,()=>i.e(478).then(i.bind(i,2467)))}setupInspectionEvents(e){const t=(t,r)=>{t&&(0,R.W)({agentIdentifier:e,timeStamp:t.timeStamp,loaded:"complete"===t.target.readyState,type:"window",name:r,data:t.target.location+""})};(0,l.sB)(e=>{t(e,"DOMContentLoaded")}),(0,l.GG)(e=>{t(e,"load")}),(0,l.Qr)(e=>{t(e,"navigate")}),this.ee.on(w.tS.UPDATE,(t,r)=>{(0,R.W)({agentIdentifier:e,type:"lifecycle",name:"session",data:r})})}}var T=i(384);class A extends e.d{constructor(e){var t;(super(),f.gm)?(this.features={},(0,T.bQ)(this.agentIdentifier,this),this.desiredFeatures=new Set(e.features||[]),this.desiredFeatures.add(E),(0,n.j)(this,e,e.loaderType||"agent"),t=this,(0,c.Y)(a.cD,function(e,r,n=!1){if("string"==typeof e){if(["string","number","boolean"].includes(typeof r)||null===r)return(0,c.U)(t,e,r,a.cD,n);(0,h.R)(40,typeof r)}else(0,h.R)(39,typeof e)},t),function(e){(0,c.Y)(a.Dl,function(t,r=!1){if("string"!=typeof t&&null!==t)return void(0,h.R)(41,typeof t);const n=e.info.jsAttributes["enduser.id"];r&&null!=n&&n!==t?(0,s.p)(a.Pl+"setUserIdAndResetSession",[t],void 0,"session",e.ee):(0,c.U)(e,"enduser.id",t,a.Dl,!0)},e)}(this),function(e){(0,c.Y)(a.nb,function(t){if("string"==typeof t||null===t)return(0,c.U)(e,"application.version",t,a.nb,!1);(0,h.R)(42,typeof t)},e)}(this),function(e){(0,c.Y)(a.d3,function(){e.ee.emit("manual-start-all")},e)}(this),function(e){(0,c.Y)(a.Pv,function(t=!0){if("boolean"==typeof t){if((0,s.p)(a.Pl+a.Pv,[t],void 0,"session",e.ee),e.runtime.consented=t,t){const t=e.features.page_view_event;t.onAggregateImported.then(e=>{const r=t.featAggregate;e&&!r.sentRum&&r.sendRum()})}}else(0,h.R)(65,typeof t)},e)}(this),this.run()):(0,h.R)(21)}get config(){return{info:this.info,init:this.init,loader_config:this.loader_config,runtime:this.runtime}}get api(){return this}run(){try{const e=function(e){const t={};return r.forEach(r=>{t[r]=!!e[r]?.enabled}),t}(this.init),n=[...this.desiredFeatures];n.sort((e,r)=>t.P3[e.featureName]-t.P3[r.featureName]),n.forEach(r=>{if(!e[r.featureName]&&r.featureName!==t.K7.pageViewEvent)return;const n=function(e){switch(e){case t.K7.ajax:return[t.K7.jserrors];case t.K7.sessionTrace:return[t.K7.ajax,t.K7.pageViewEvent];case t.K7.sessionReplay:return[t.K7.sessionTrace];case t.K7.pageViewTiming:return[t.K7.pageViewEvent];default:return[]}}(r.featureName).filter(e=>!(e in this.features));n.length>0&&(0,h.R)(36,{targetFeature:r.featureName,missingDependencies:n}),this.features[r.featureName]=new r(this)})}catch(e){(0,h.R)(22,e);for(const e in this.features)this.features[e].abortHandler?.();const t=(0,T.Zm)();delete t.initializedAgents[this.agentIdentifier]?.features,delete this.sharedAggregator;return t.ee.get(this.agentIdentifier).abort(),!1}}}var x=i(2843),S=i(782);class _ extends y{static featureName=S.T;constructor(e){super(e,S.T),f.RI&&((0,x.u)(()=>(0,s.p)("docHidden",[(0,o.t)()],void 0,S.T,this.ee),!0),(0,x.G)(()=>(0,s.p)("winPagehide",[(0,o.t)()],void 0,S.T,this.ee)),this.importAggregator(e,()=>i.e(478).then(i.bind(i,9917))))}}var O=i(3969);class I extends y{static featureName=O.TZ;constructor(e){super(e,O.TZ),f.RI&&document.addEventListener("securitypolicyviolation",e=>{(0,s.p)(O.xV,["Generic/CSPViolation/Detected"],void 0,this.featureName,this.ee)}),this.importAggregator(e,()=>i.e(478).then(i.bind(i,6555)))}}var N=i(6774),P=i(3878),k=i(3304);class D{constructor(e,t,r,n,i){this.name="UncaughtError",this.message="string"==typeof e?e:(0,k.A)(e),this.sourceURL=t,this.line=r,this.column=n,this.__newrelic=i}}function C(e){return M(e)?e:new D(void 0!==e?.message?e.message:e,e?.filename||e?.sourceURL,e?.lineno||e?.line,e?.colno||e?.col,e?.__newrelic,e?.cause)}function j(e){const t="Unhandled Promise Rejection: ";if(!e?.reason)return;if(M(e.reason)){try{e.reason.message.startsWith(t)||(e.reason.message=t+e.reason.message)}catch(e){}return C(e.reason)}const r=C(e.reason);return(r.message||"").startsWith(t)||(r.message=t+r.message),r}function L(e){if(e.error instanceof SyntaxError&&!/:\d+$/.test(e.error.stack?.trim())){const t=new D(e.message,e.filename,e.lineno,e.colno,e.error.__newrelic,e.cause);return t.name=SyntaxError.name,t}return M(e.error)?e.error:C(e)}function M(e){return e instanceof Error&&!!e.stack}function B(e,r,n,i,a=(0,o.t)()){"string"==typeof e&&(e=new Error(e)),(0,s.p)("err",[e,a,!1,r,n.runtime.isRecording,void 0,i],void 0,t.K7.jserrors,n.ee),(0,s.p)("uaErr",[],void 0,t.K7.genericEvents,n.ee)}var H=i(1541),K=i(993),W=i(3785);function U(e,{customAttributes:t={},level:r=K.p_.INFO}={},n,i,s=(0,o.t)()){(0,W.R)(n.ee,e,t,r,!1,i,s)}function F(e,r,n,i,c=(0,o.t)()){(0,s.p)(a.Pl+a.hG,[c,e,r,i],void 0,t.K7.genericEvents,n.ee)}function V(e,r,n,i,c=(0,o.t)()){const{start:d,end:u,customAttributes:l}=r||{},f={customAttributes:l||{}};if("object"!=typeof f.customAttributes||"string"!=typeof e||0===e.length)return void(0,h.R)(57);const p=(e,t)=>null==e?t:"number"==typeof e?e:e instanceof PerformanceMark?e.startTime:Number.NaN;if(f.start=p(d,0),f.end=p(u,c),Number.isNaN(f.start)||Number.isNaN(f.end))(0,h.R)(57);else{if(f.duration=f.end-f.start,!(f.duration<0))return(0,s.p)(a.Pl+a.V1,[f,e,i],void 0,t.K7.genericEvents,n.ee),f;(0,h.R)(58)}}function G(e,r={},n,i,c=(0,o.t)()){(0,s.p)(a.Pl+a.fF,[c,e,r,i],void 0,t.K7.genericEvents,n.ee)}var z=i(9119),Y=i(7866);const q=new Set;let Z=[];if(f.gm.PerformanceObserver?.supportedEntryTypes.includes("resource")){new PerformanceObserver(e=>{e.getEntries().forEach(e=>{if((e=>"script"===e.initiatorType||"link"===e.initiatorType&&e.name.endsWith(".js"))(e)){q.size>250&&q.delete(q.values().next().value),q.add(e);const t=[];Z.forEach(({test:r,addedAt:n},i)=>{(r(e)||(0,o.t)()-n>1e4)&&t.push(i)}),Z=Z.filter((e,r)=>!t.includes(r))}})}).observe({type:"resource",buffered:!0})}function X(){const e={registeredAt:(0,o.t)(),reportedAt:void 0,fetchStart:0,fetchEnd:0,asset:void 0,type:"unknown"},t=function(){let e;try{const t=Error.stackTraceLimit;Error.stackTraceLimit=50,e=(new Error).stack,Error.stackTraceLimit=t}catch(t){e=(new Error).stack}return e}();if(!t)return e;const r=f.gm.performance?.getEntriesByType("navigation")?.find(e=>"navigation"===e.initiatorType)?.name||"";try{const n=function(e){if(!e||"string"!=typeof e)return[];const t=new Set,r=e.split("\n");for(const e of r){const r=e.match(Y.cn)||e.match(Y.hB);r&&r[2]&&t.add((0,z.L)(r[2]))}return[...t]}(t).at(-1);if(!n)return e;if(r.includes(n))return e.asset=(0,z.L)(r),e.type="inline",e;const i=performance.getEntriesByType("resource").find(s)||[...q].find(s);function s(e){const t=(0,z.L)(e.name);return t.endsWith(n)||n.endsWith(t)}function a(t){e.fetchStart=Math.floor(t.startTime),e.fetchEnd=Math.floor(t.responseEnd),e.asset=t.name,e.type=t.initiatorType}i?a(i):function(e){if(!e||!f.gm.document)return!1;try{const t=f.gm.document.querySelectorAll('link[rel="preload"][as="script"]');for(const r of t)if((0,z.L)(r.href)===e)return!0}catch(e){}return!1}(n)&&(e.asset=n,e.type="preload",Z.push({addedAt:(0,o.t)(),test:e=>!!s(e)&&(a(e),!0)}))}catch(c){}return e}const J=["name","id","type"];function Q(e){(0,c.Y)(a.eY,function(t){return ee(e,t)},e)}function ee(e,r,n){(0,h.R)(54,"newrelic.register"),r||={},r.type=H.f.MFE,r.licenseKey||=e.info.licenseKey,r.blocked=!1,r.parent=n||{},("object"!=typeof r.tags||null===r.tags||Array.isArray(r.tags))&&(r.tags={});const i=X(),a={};Object.entries(r.tags).forEach(([e,t])=>{J.includes(e)||(a["source.".concat(e)]=t)}),r.isolated??=!0;let c=()=>{};const d=e.runtime.registeredEntities;if(!r.isolated){const e=d.find(({metadata:{target:{id:e}}})=>e===r.id&&!r.isolated);if(e)return e}const u=e=>{r.blocked=!0,c=e};function l(e){return"string"==typeof e&&!!e.trim()&&e.trim().length<501||"number"==typeof e}e.init.api.allow_registered_children||u((0,m.J)(()=>(0,h.R)(55))),l(r.id)&&l(r.name)||u((0,m.J)(()=>(0,h.R)(48,r)));const f={addPageAction:(t,n={})=>y(F,[t,{...a,...n},e],r),deregister:()=>{g(),u((0,m.J)(()=>(0,h.R)(68)))},log:(t,n={})=>y(U,[t,{...n,customAttributes:{...a,...n.customAttributes||{}}},e],r),measure:(t,n={})=>y(V,[t,{...n,customAttributes:{...a,...n.customAttributes||{}}},e],r),noticeError:(t,n={})=>y(B,[t,{...a,...n},e],r),register:(t={})=>y(ee,[e,t],f.metadata.target),recordCustomEvent:(t,n={})=>y(G,[t,{...a,...n},e],r),setApplicationVersion:e=>v("application.version",e),setCustomAttribute:(e,t)=>v(e,t),setUserId:e=>v("enduser.id",e),metadata:{customAttributes:a,target:r,timings:i}},p=()=>(r.blocked&&c(),r.blocked);function g(){i.reportedAt||(i.reportedAt=(0,o.t)(),f.recordCustomEvent("MicroFrontEndTiming",{assetUrl:i.asset,assetType:i.type,timeToLoad:i.registeredAt-i.fetchStart,timeToBeRequested:i.fetchStart,timeToFetch:i.fetchEnd-i.fetchStart,timeToRegister:i.registeredAt-i.fetchEnd,timeAlive:i.reportedAt-i.registeredAt}))}p()||(d.push(f),(0,x.G)(g));const v=(e,t)=>{p()||(a[e]=t)},y=(r,n,i)=>{if(p()&&r!==ee)return;const a=(0,o.t)();(0,s.p)(O.xV,["API/register/".concat(r.name,"/called")],void 0,t.K7.metrics,e.ee);try{if(e.init.api.duplicate_registered_data&&r!==ee){let e=n;if(n[1]instanceof Object){const t={"child.id":i.id,"child.type":i.type};e="customAttributes"in n[1]?[n[0],{...n[1],customAttributes:{...n[1].customAttributes,...t}},...n.slice(2)]:[n[0],{...n[1],...t},...n.slice(2)]}r(...e,void 0,a)}return r(...n,i,a)}catch(e){(0,h.R)(50,e)}};return f}class te extends y{static featureName=N.T;constructor(e){var t;super(e,N.T),t=e,(0,c.Y)(a.o5,(e,r)=>B(e,r,t),t),function(e){(0,c.Y)(a.bt,function(t){e.runtime.onerror=t},e)}(e),function(e){let t=0;(0,c.Y)(a.k6,function(e,r){++t>10||(this.runtime.releaseIds[e.slice(-200)]=(""+r).slice(-200))},e)}(e),Q(e);try{this.removeOnAbort=new AbortController}catch(e){}this.ee.on("internal-error",(t,r)=>{this.abortHandler&&(0,s.p)("ierr",[C(t),(0,o.t)(),!0,{},e.runtime.isRecording,r],void 0,this.featureName,this.ee)}),f.gm.addEventListener("unhandledrejection",t=>{this.abortHandler&&(0,s.p)("err",[j(t),(0,o.t)(),!1,{unhandledPromiseRejection:1},e.runtime.isRecording],void 0,this.featureName,this.ee)},(0,P.jT)(!1,this.removeOnAbort?.signal)),f.gm.addEventListener("error",t=>{this.abortHandler&&(0,s.p)("err",[L(t),(0,o.t)(),!1,{},e.runtime.isRecording],void 0,this.featureName,this.ee)},(0,P.jT)(!1,this.removeOnAbort?.signal)),this.abortHandler=this.#r,this.importAggregator(e,()=>i.e(478).then(i.bind(i,2176)))}#r(){this.removeOnAbort?.abort(),this.abortHandler=void 0}}var re=i(8990);let ne=1;function ie(e){const t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===f.gm?0:(0,re.I)(e,"nr@id",function(){return ne++})}function se(e){if("string"==typeof e&&e.length)return e.length;if("object"==typeof e){if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer&&e.byteLength)return e.byteLength;if("undefined"!=typeof Blob&&e instanceof Blob&&e.size)return e.size;if(!("undefined"!=typeof FormData&&e instanceof FormData))try{return(0,k.A)(e).length}catch(e){return}}}var oe=i(8139),ae=i(7836),ce=i(3434);const de={},ue=["open","send"];function le(e){var t=e||ae.ee;const r=function(e){return(e||ae.ee).get("xhr")}(t);if(void 0===f.gm.XMLHttpRequest)return r;if(de[r.debugId]++)return r;de[r.debugId]=1,(0,oe.u)(t);var n=(0,ce.YM)(r),i=f.gm.XMLHttpRequest,s=f.gm.MutationObserver,o=f.gm.Promise,a=f.gm.setInterval,c="readystatechange",d=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],u=[],l=f.gm.XMLHttpRequest=function(e){const t=new i(e),s=r.context(t);try{r.emit("new-xhr",[t],s),t.addEventListener(c,(o=s,function(){var e=this;e.readyState>3&&!o.resolved&&(o.resolved=!0,r.emit("xhr-resolved",[],e)),n.inPlace(e,d,"fn-",b)}),(0,P.jT)(!1))}catch(e){(0,h.R)(15,e);try{r.emit("internal-error",[e])}catch(e){}}var o;return t};function p(e,t){n.inPlace(t,["onreadystatechange"],"fn-",b)}if(function(e,t){for(var r in e)t[r]=e[r]}(i,l),l.prototype=i.prototype,n.inPlace(l.prototype,ue,"-xhr-",b),r.on("send-xhr-start",function(e,t){p(e,t),function(e){u.push(e),s&&(g?g.then(y):a?a(y):(m=-m,v.data=m))}(t)}),r.on("open-xhr-start",p),s){var g=o&&o.resolve();if(!a&&!o){var m=1,v=document.createTextNode(m);new s(y).observe(v,{characterData:!0})}}else t.on("fn-end",function(e){e[0]&&e[0].type===c||y()});function y(){for(var e=0;e<u.length;e++)p(0,u[e]);u.length&&(u=[])}function b(e,t){return t}return r}var fe="fetch-",he=fe+"body-",pe=["arrayBuffer","blob","json","text","formData"],ge=f.gm.Request,me=f.gm.Response,ve="prototype";const ye={};function be(e){const t=function(e){return(e||ae.ee).get("fetch")}(e);if(!(ge&&me&&f.gm.fetch))return t;if(ye[t.debugId]++)return t;function r(e,r,n){var i=e[r];"function"==typeof i&&(e[r]=function(){var e,r=[...arguments],s={};t.emit(n+"before-start",[r],s),s[ae.P]&&s[ae.P].dt&&(e=s[ae.P].dt);var o=i.apply(this,r);return t.emit(n+"start",[r,e],o),o.then(function(e){return t.emit(n+"end",[null,e],o),e},function(e){throw t.emit(n+"end",[e],o),e})})}return ye[t.debugId]=1,pe.forEach(e=>{r(ge[ve],e,he),r(me[ve],e,he)}),r(f.gm,"fetch",fe),t.on(fe+"end",function(e,r){var n=this;if(r){var i=r.headers.get("content-length");null!==i&&(n.rxSize=i),t.emit(fe+"done",[null,r],n)}else t.emit(fe+"done",[e],n)}),t}var we=i(7485),Re=i(9566);class Ee{constructor(e){this.agentRef=e}generateTracePayload(e){const t=this.agentRef.loader_config;if(!this.shouldGenerateTrace(e)||!t)return null;var r=(t.accountID||"").toString()||null,n=(t.agentID||"").toString()||null,i=(t.trustKey||"").toString()||null;if(!r||!n)return null;var s=(0,Re.ZF)(),o=(0,Re.el)(),a=Date.now(),c={spanId:s,traceId:o,timestamp:a};return(e.sameOrigin||this.isAllowedOrigin(e)&&this.useTraceContextHeadersForCors())&&(c.traceContextParentHeader=this.generateTraceContextParentHeader(s,o),c.traceContextStateHeader=this.generateTraceContextStateHeader(s,a,r,n,i)),(e.sameOrigin&&!this.excludeNewrelicHeader()||!e.sameOrigin&&this.isAllowedOrigin(e)&&this.useNewrelicHeaderForCors())&&(c.newrelicHeader=this.generateTraceHeader(s,o,a,r,n,i)),c}generateTraceContextParentHeader(e,t){return"00-"+t+"-"+e+"-01"}generateTraceContextStateHeader(e,t,r,n,i){return i+"@nr=0-1-"+r+"-"+n+"-"+e+"----"+t}generateTraceHeader(e,t,r,n,i,s){if(!("function"==typeof f.gm?.btoa))return null;var o={v:[0,1],d:{ty:"Browser",ac:n,ap:i,id:e,tr:t,ti:r}};return s&&n!==s&&(o.d.tk=s),btoa((0,k.A)(o))}shouldGenerateTrace(e){return this.agentRef.init?.distributed_tracing?.enabled&&this.isAllowedOrigin(e)}isAllowedOrigin(e){var t=!1;const r=this.agentRef.init?.distributed_tracing;if(e.sameOrigin)t=!0;else if(r?.allowed_origins instanceof Array)for(var n=0;n<r.allowed_origins.length;n++){var i=(0,we.D)(r.allowed_origins[n]);if(e.hostname===i.hostname&&e.protocol===i.protocol&&e.port===i.port){t=!0;break}}return t}excludeNewrelicHeader(){var e=this.agentRef.init?.distributed_tracing;return!!e&&!!e.exclude_newrelic_header}useNewrelicHeaderForCors(){var e=this.agentRef.init?.distributed_tracing;return!!e&&!1!==e.cors_use_newrelic_header}useTraceContextHeadersForCors(){var e=this.agentRef.init?.distributed_tracing;return!!e&&!!e.cors_use_tracecontext_headers}}var Te=i(9300),Ae=i(7295);function xe(e){return"string"==typeof e?e:e instanceof(0,T.dV)().o.REQ?e.url:f.gm?.URL&&e instanceof URL?e.href:void 0}var Se=["load","error","abort","timeout"],_e=Se.length,Oe=(0,T.dV)().o.REQ,Ie=(0,T.dV)().o.XHR;const Ne="X-NewRelic-App-Data";class Pe extends y{static featureName=Te.T;constructor(e){super(e,Te.T),this.dt=new Ee(e),this.handler=(e,t,r,n)=>(0,s.p)(e,t,r,n,this.ee);try{const e={xmlhttprequest:"xhr",fetch:"fetch",beacon:"beacon"};f.gm?.performance?.getEntriesByType("resource").forEach(r=>{if(r.initiatorType in e&&0!==r.responseStatus){const n={status:r.responseStatus},i={rxSize:r.transferSize,duration:Math.floor(r.duration),cbTime:0};ke(n,r.name),this.handler("xhr",[n,i,r.startTime,r.responseEnd,e[r.initiatorType]],void 0,t.K7.ajax)}})}catch(e){}be(this.ee),le(this.ee),function(e,r,n,i){function a(e){var t=this;t.totalCbs=0,t.called=0,t.cbTime=0,t.end=T,t.ended=!1,t.xhrGuids={},t.lastSize=null,t.loadCaptureCalled=!1,t.params=this.params||{},t.metrics=this.metrics||{},t.latestLongtaskEnd=0,e.addEventListener("load",function(r){A(t,e)},(0,P.jT)(!1)),f.lR||e.addEventListener("progress",function(e){t.lastSize=e.loaded},(0,P.jT)(!1))}function c(e){this.params={method:e[0]},ke(this,e[1]),this.metrics={}}function d(t,r){e.loader_config.xpid&&this.sameOrigin&&r.setRequestHeader("X-NewRelic-ID",e.loader_config.xpid);var n=i.generateTracePayload(this.parsedOrigin);if(n){var s=!1;n.newrelicHeader&&(r.setRequestHeader("newrelic",n.newrelicHeader),s=!0),n.traceContextParentHeader&&(r.setRequestHeader("traceparent",n.traceContextParentHeader),n.traceContextStateHeader&&r.setRequestHeader("tracestate",n.traceContextStateHeader),s=!0),s&&(this.dt=n)}}function u(e,t){var n=this.metrics,i=e[0],s=this;if(n&&i){var a=se(i);a&&(n.txSize=a)}this.startTime=(0,o.t)(),this.body=i,this.listener=function(e){try{"abort"!==e.type||s.loadCaptureCalled||(s.params.aborted=!0),("load"!==e.type||s.called===s.totalCbs&&(s.onloadCalled||"function"!=typeof t.onload)&&"function"==typeof s.end)&&s.end(t)}catch(e){try{r.emit("internal-error",[e])}catch(e){}}};for(var c=0;c<_e;c++)t.addEventListener(Se[c],this.listener,(0,P.jT)(!1))}function l(e,t,r){this.cbTime+=e,t?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof r.onload||"function"!=typeof this.end||this.end(r)}function h(e,t){var r=""+ie(e)+!!t;this.xhrGuids&&!this.xhrGuids[r]&&(this.xhrGuids[r]=!0,this.totalCbs+=1)}function p(e,t){var r=""+ie(e)+!!t;this.xhrGuids&&this.xhrGuids[r]&&(delete this.xhrGuids[r],this.totalCbs-=1)}function g(){this.endTime=(0,o.t)()}function m(e,t){t instanceof Ie&&"load"===e[0]&&r.emit("xhr-load-added",[e[1],e[2]],t)}function v(e,t){t instanceof Ie&&"load"===e[0]&&r.emit("xhr-load-removed",[e[1],e[2]],t)}function y(e,t,r){t instanceof Ie&&("onload"===r&&(this.onload=!0),("load"===(e[0]&&e[0].type)||this.onload)&&(this.xhrCbStart=(0,o.t)()))}function b(e,t){this.xhrCbStart&&r.emit("xhr-cb-time",[(0,o.t)()-this.xhrCbStart,this.onload,t],t)}function w(e){var t,r=e[1]||{};if("string"==typeof e[0]?0===(t=e[0]).length&&f.RI&&(t=""+f.gm.location.href):e[0]&&e[0].url?t=e[0].url:f.gm?.URL&&e[0]&&e[0]instanceof URL?t=e[0].href:"function"==typeof e[0].toString&&(t=e[0].toString()),"string"==typeof t&&0!==t.length){t&&(this.parsedOrigin=(0,we.D)(t),this.sameOrigin=this.parsedOrigin.sameOrigin);var n=i.generateTracePayload(this.parsedOrigin);if(n&&(n.newrelicHeader||n.traceContextParentHeader))if(e[0]&&e[0].headers)a(e[0].headers,n)&&(this.dt=n);else{var s={};for(var o in r)s[o]=r[o];s.headers=new Headers(r.headers||{}),a(s.headers,n)&&(this.dt=n),e.length>1?e[1]=s:e.push(s)}}function a(e,t){var r=!1;return t.newrelicHeader&&(e.set("newrelic",t.newrelicHeader),r=!0),t.traceContextParentHeader&&(e.set("traceparent",t.traceContextParentHeader),t.traceContextStateHeader&&e.set("tracestate",t.traceContextStateHeader),r=!0),r}}function R(e,t){this.params={},this.metrics={},this.startTime=(0,o.t)(),this.dt=t,e.length>=1&&(this.target=e[0]),e.length>=2&&(this.opts=e[1]);var r=this.opts||{},n=this.target;ke(this,xe(n));var i=(""+(n&&n instanceof Oe&&n.method||r.method||"GET")).toUpperCase();this.params.method=i,this.body=r.body,this.txSize=se(r.body)||0}function E(e,r){if(this.endTime=(0,o.t)(),this.params||(this.params={}),(0,Ae.iW)(this.params))return;let i;this.params.status=r?r.status:0,"string"==typeof this.rxSize&&this.rxSize.length>0&&(i=+this.rxSize);const s={txSize:this.txSize,rxSize:i,duration:(0,o.t)()-this.startTime};n("xhr",[this.params,s,this.startTime,this.endTime,"fetch"],this,t.K7.ajax)}function T(e){const r=this.params,i=this.metrics;if(!this.ended){this.ended=!0;for(let t=0;t<_e;t++)e.removeEventListener(Se[t],this.listener,!1);r.aborted||(0,Ae.iW)(r)||(i.duration=(0,o.t)()-this.startTime,this.loadCaptureCalled||4!==e.readyState?null==r.status&&(r.status=0):A(this,e),i.cbTime=this.cbTime,n("xhr",[r,i,this.startTime,this.endTime,"xhr"],this,t.K7.ajax))}}function A(e,n){e.params.status=n.status;var i=function(e,t){var r=e.responseType;return"json"===r&&null!==t?t:"arraybuffer"===r||"blob"===r||"json"===r?se(e.response):"text"===r||""===r||void 0===r?se(e.responseText):void 0}(n,e.lastSize);if(i&&(e.metrics.rxSize=i),e.sameOrigin&&n.getAllResponseHeaders().indexOf(Ne)>=0){var o=n.getResponseHeader(Ne);o&&((0,s.p)(O.rs,["Ajax/CrossApplicationTracing/Header/Seen"],void 0,t.K7.metrics,r),e.params.cat=o.split(", ").pop())}e.loadCaptureCalled=!0}r.on("new-xhr",a),r.on("open-xhr-start",c),r.on("open-xhr-end",d),r.on("send-xhr-start",u),r.on("xhr-cb-time",l),r.on("xhr-load-added",h),r.on("xhr-load-removed",p),r.on("xhr-resolved",g),r.on("addEventListener-end",m),r.on("removeEventListener-end",v),r.on("fn-end",b),r.on("fetch-before-start",w),r.on("fetch-start",R),r.on("fn-start",y),r.on("fetch-done",E)}(e,this.ee,this.handler,this.dt),this.importAggregator(e,()=>i.e(478).then(i.bind(i,3845)))}}function ke(e,t){var r=(0,we.D)(t),n=e.params||e;n.hostname=r.hostname,n.port=r.port,n.protocol=r.protocol,n.host=r.hostname+":"+r.port,n.pathname=r.pathname,e.parsedOrigin=r,e.sameOrigin=r.sameOrigin}const De={},Ce=["pushState","replaceState"];function je(e){const t=function(e){return(e||ae.ee).get("history")}(e);return!f.RI||De[t.debugId]++||(De[t.debugId]=1,(0,ce.YM)(t).inPlace(window.history,Ce,"-")),t}var Le=i(3738);function Me(e){(0,c.Y)(a.BL,function(r=Date.now()){const n=r-f.WN;n<0&&(0,h.R)(62,r),(0,s.p)(O.XG,[a.BL,{time:n}],void 0,t.K7.metrics,e.ee),e.addToTrace({name:a.BL,start:r,origin:"nr"}),(0,s.p)(a.Pl+a.hG,[n,a.BL],void 0,t.K7.genericEvents,e.ee)},e)}const{He:Be,bD:He,d3:Ke,Kp:We,TZ:Ue,Lc:Fe,uP:Ve,Rz:Ge}=Le;class ze extends y{static featureName=Ue;constructor(e){var r;super(e,Ue),r=e,(0,c.Y)(a.U2,function(e){if(!(e&&"object"==typeof e&&e.name&&e.start))return;const n={n:e.name,s:e.start-f.WN,e:(e.end||e.start)-f.WN,o:e.origin||"",t:"api"};n.s<0||n.e<0||n.e<n.s?(0,h.R)(61,{start:n.s,end:n.e}):(0,s.p)("bstApi",[n],void 0,t.K7.sessionTrace,r.ee)},r),Me(e);if(!(0,g.V)(e.init))return void this.deregisterDrain();const n=this.ee;let d;je(n),this.eventsEE=(0,oe.u)(n),this.eventsEE.on(Ve,function(e,t){this.bstStart=(0,o.t)()}),this.eventsEE.on(Fe,function(e,r){(0,s.p)("bst",[e[0],r,this.bstStart,(0,o.t)()],void 0,t.K7.sessionTrace,n)}),n.on(Ge+Ke,function(e){this.time=(0,o.t)(),this.startPath=location.pathname+location.hash}),n.on(Ge+We,function(e){(0,s.p)("bstHist",[location.pathname+location.hash,this.startPath,this.time],void 0,t.K7.sessionTrace,n)});try{d=new PerformanceObserver(e=>{const r=e.getEntries();(0,s.p)(Be,[r],void 0,t.K7.sessionTrace,n)}),d.observe({type:He,buffered:!0})}catch(e){}this.importAggregator(e,()=>i.e(478).then(i.bind(i,6974)),{resourceObserver:d})}}var Ye=i(6344);class qe extends y{static featureName=Ye.TZ;#n;recorder;constructor(e){var r;let n;super(e,Ye.TZ),r=e,(0,c.Y)(a.CH,function(){(0,s.p)(a.CH,[],void 0,t.K7.sessionReplay,r.ee)},r),function(e){(0,c.Y)(a.Tb,function(){(0,s.p)(a.Tb,[],void 0,t.K7.sessionReplay,e.ee)},e)}(e);try{n=JSON.parse(localStorage.getItem("".concat(w.H3,"_").concat(w.uh)))}catch(e){}(0,p.SR)(e.init)&&this.ee.on(a.CH,()=>this.#i()),this.#s(n)&&this.importRecorder().then(e=>{e.startRecording(Ye.Qb.PRELOAD,n?.sessionReplayMode)}),this.importAggregator(this.agentRef,()=>i.e(478).then(i.bind(i,6167)),this),this.ee.on("err",e=>{this.blocked||this.agentRef.runtime.isRecording&&(this.errorNoticed=!0,(0,s.p)(Ye.Vh,[e],void 0,this.featureName,this.ee))})}#s(e){return e&&(e.sessionReplayMode===w.g.FULL||e.sessionReplayMode===w.g.ERROR)||(0,p.Aw)(this.agentRef.init)}importRecorder(){return this.recorder?Promise.resolve(this.recorder):(this.#n??=Promise.all([i.e(478),i.e(249)]).then(i.bind(i,4866)).then(({Recorder:e})=>(this.recorder=new e(this),this.recorder)).catch(e=>{throw this.ee.emit("internal-error",[e]),this.blocked=!0,e}),this.#n)}#i(){this.blocked||(this.featAggregate?this.featAggregate.mode!==w.g.FULL&&this.featAggregate.initializeRecording(w.g.FULL,!0,Ye.Qb.API):this.importRecorder().then(()=>{this.recorder.startRecording(Ye.Qb.API,w.g.FULL)}))}}var Ze=i(3962);class Xe extends y{static featureName=Ze.TZ;constructor(e){if(super(e,Ze.TZ),function(e){const r=e.ee.get("tracer");function n(){}(0,c.Y)(a.dT,function(e){return(new n).get("object"==typeof e?e:{})},e);const i=n.prototype={createTracer:function(n,i){var a={},c=this,d="function"==typeof i;return(0,s.p)(O.xV,["API/createTracer/called"],void 0,t.K7.metrics,e.ee),function(){if(r.emit((d?"":"no-")+"fn-start",[(0,o.t)(),c,d],a),d)try{return i.apply(this,arguments)}catch(e){const t="string"==typeof e?new Error(e):e;throw r.emit("fn-err",[arguments,this,t],a),t}finally{r.emit("fn-end",[(0,o.t)()],a)}}}};["actionText","setName","setAttribute","save","ignore","onEnd","getContext","end","get"].forEach(r=>{c.Y.apply(this,[r,function(){return(0,s.p)(a.hw+r,[performance.now(),...arguments],this,t.K7.softNav,e.ee),this},e,i])}),(0,c.Y)(a.PA,function(){(0,s.p)(a.hw+"routeName",[performance.now(),...arguments],void 0,t.K7.softNav,e.ee)},e)}(e),!f.RI||!(0,T.dV)().o.MO)return;const r=je(this.ee);try{this.removeOnAbort=new AbortController}catch(e){}Ze.tC.forEach(e=>{(0,P.sp)(e,e=>{l(e)},!0,this.removeOnAbort?.signal)});const n=()=>(0,s.p)("newURL",[(0,o.t)(),""+window.location],void 0,this.featureName,this.ee);r.on("pushState-end",n),r.on("replaceState-end",n),(0,P.sp)(Ze.OV,e=>{l(e),(0,s.p)("newURL",[e.timeStamp,""+window.location],void 0,this.featureName,this.ee)},!0,this.removeOnAbort?.signal);let d=!1;const u=new((0,T.dV)().o.MO)((e,t)=>{d||(d=!0,requestAnimationFrame(()=>{(0,s.p)("newDom",[(0,o.t)()],void 0,this.featureName,this.ee),d=!1}))}),l=(0,m.s)(e=>{"loading"!==document.readyState&&((0,s.p)("newUIEvent",[e],void 0,this.featureName,this.ee),u.observe(document.body,{attributes:!0,childList:!0,subtree:!0,characterData:!0}))},100,{leading:!0});this.abortHandler=function(){this.removeOnAbort?.abort(),u.disconnect(),this.abortHandler=void 0},this.importAggregator(e,()=>i.e(478).then(i.bind(i,4393)),{domObserver:u})}}var $e=i(3333);const Je={},Qe=new Set;function et(e){return"string"==typeof e?{type:"string",size:(new TextEncoder).encode(e).length}:e instanceof ArrayBuffer?{type:"ArrayBuffer",size:e.byteLength}:e instanceof Blob?{type:"Blob",size:e.size}:e instanceof DataView?{type:"DataView",size:e.byteLength}:ArrayBuffer.isView(e)?{type:"TypedArray",size:e.byteLength}:{type:"unknown",size:0}}class tt{constructor(e,t){this.timestamp=(0,o.t)(),this.currentUrl=(0,z.L)(window.location.href),this.socketId=(0,Re.LA)(8),this.requestedUrl=(0,z.L)(e),this.requestedProtocols=Array.isArray(t)?t.join(","):t||"",this.openedAt=void 0,this.protocol=void 0,this.extensions=void 0,this.binaryType=void 0,this.messageOrigin=void 0,this.messageCount=0,this.messageBytes=0,this.messageBytesMin=0,this.messageBytesMax=0,this.messageTypes=void 0,this.sendCount=0,this.sendBytes=0,this.sendBytesMin=0,this.sendBytesMax=0,this.sendTypes=void 0,this.closedAt=void 0,this.closeCode=void 0,this.closeReason="unknown",this.closeWasClean=void 0,this.connectedDuration=0,this.hasErrors=void 0}}class rt extends y{static featureName=$e.TZ;constructor(e){super(e,$e.TZ);const r=e.init.feature_flags.includes("websockets"),n=[e.init.page_action.enabled,e.init.performance.capture_marks,e.init.performance.capture_measures,e.init.performance.resources.enabled,e.init.user_actions.enabled,r];var d;let u,l;if(d=e,(0,c.Y)(a.hG,(e,t)=>F(e,t,d),d),function(e){(0,c.Y)(a.fF,(t,r)=>G(t,r,e),e)}(e),Me(e),Q(e),function(e){(0,c.Y)(a.V1,(t,r)=>V(t,r,e),e)}(e),r&&(l=function(e){if(!(0,T.dV)().o.WS)return e;const t=e.get("websockets");if(Je[t.debugId]++)return t;Je[t.debugId]=1,(0,x.G)(()=>{const e=(0,o.t)();Qe.forEach(r=>{r.nrData.closedAt=e,r.nrData.closeCode=1001,r.nrData.closeReason="Page navigating away",r.nrData.closeWasClean=!1,r.nrData.openedAt&&(r.nrData.connectedDuration=e-r.nrData.openedAt),t.emit("ws",[r.nrData],r)})});class r extends WebSocket{static name="WebSocket";static toString(){return"function WebSocket() { [native code] }"}toString(){return"[object WebSocket]"}get[Symbol.toStringTag](){return r.name}#o(e){(e.__newrelic??={}).socketId=this.nrData.socketId,this.nrData.hasErrors??=!0}constructor(...e){super(...e),this.nrData=new tt(e[0],e[1]),this.addEventListener("open",()=>{this.nrData.openedAt=(0,o.t)(),["protocol","extensions","binaryType"].forEach(e=>{this.nrData[e]=this[e]}),Qe.add(this)}),this.addEventListener("message",e=>{const{type:t,size:r}=et(e.data);this.nrData.messageOrigin??=(0,z.L)(e.origin),this.nrData.messageCount++,this.nrData.messageBytes+=r,this.nrData.messageBytesMin=Math.min(this.nrData.messageBytesMin||1/0,r),this.nrData.messageBytesMax=Math.max(this.nrData.messageBytesMax,r),(this.nrData.messageTypes??"").includes(t)||(this.nrData.messageTypes=this.nrData.messageTypes?"".concat(this.nrData.messageTypes,",").concat(t):t)}),this.addEventListener("close",e=>{this.nrData.closedAt=(0,o.t)(),this.nrData.closeCode=e.code,e.reason&&(this.nrData.closeReason=e.reason),this.nrData.closeWasClean=e.wasClean,this.nrData.connectedDuration=this.nrData.closedAt-this.nrData.openedAt,Qe.delete(this),t.emit("ws",[this.nrData],this)})}addEventListener(e,t,...r){const n=this,i="function"==typeof t?function(...e){try{return t.apply(this,e)}catch(e){throw n.#o(e),e}}:t?.handleEvent?{handleEvent:function(...e){try{return t.handleEvent.apply(t,e)}catch(e){throw n.#o(e),e}}}:t;return super.addEventListener(e,i,...r)}send(e){if(this.readyState===WebSocket.OPEN){const{type:t,size:r}=et(e);this.nrData.sendCount++,this.nrData.sendBytes+=r,this.nrData.sendBytesMin=Math.min(this.nrData.sendBytesMin||1/0,r),this.nrData.sendBytesMax=Math.max(this.nrData.sendBytesMax,r),(this.nrData.sendTypes??"").includes(t)||(this.nrData.sendTypes=this.nrData.sendTypes?"".concat(this.nrData.sendTypes,",").concat(t):t)}try{return super.send(e)}catch(e){throw this.#o(e),e}}close(...e){try{super.close(...e)}catch(e){throw this.#o(e),e}}}return f.gm.WebSocket=r,t}(this.ee)),f.RI){if(be(this.ee),le(this.ee),u=je(this.ee),e.init.user_actions.enabled){function h(t){const r=(0,we.D)(t);return e.beacons.includes(r.hostname+":"+r.port)}function p(){u.emit("navChange")}$e.Zp.forEach(e=>(0,P.sp)(e,e=>(0,s.p)("ua",[e],void 0,this.featureName,this.ee),!0)),$e.qN.forEach(e=>{const t=(0,m.s)(e=>{(0,s.p)("ua",[e],void 0,this.featureName,this.ee)},500,{leading:!0});(0,P.sp)(e,t)}),f.gm.addEventListener("error",()=>{(0,s.p)("uaErr",[],void 0,t.K7.genericEvents,this.ee)},(0,P.jT)(!1,this.removeOnAbort?.signal)),this.ee.on("open-xhr-start",(e,r)=>{h(e[1])||r.addEventListener("readystatechange",()=>{2===r.readyState&&(0,s.p)("uaXhr",[],void 0,t.K7.genericEvents,this.ee)})}),this.ee.on("fetch-start",e=>{e.length>=1&&!h(xe(e[0]))&&(0,s.p)("uaXhr",[],void 0,t.K7.genericEvents,this.ee)}),u.on("pushState-end",p),u.on("replaceState-end",p),window.addEventListener("hashchange",p,(0,P.jT)(!0,this.removeOnAbort?.signal)),window.addEventListener("popstate",p,(0,P.jT)(!0,this.removeOnAbort?.signal))}if(e.init.performance.resources.enabled&&f.gm.PerformanceObserver?.supportedEntryTypes.includes("resource")){new PerformanceObserver(e=>{e.getEntries().forEach(e=>{(0,s.p)("browserPerformance.resource",[e],void 0,this.featureName,this.ee)})}).observe({type:"resource",buffered:!0})}}r&&l.on("ws",e=>{(0,s.p)("ws-complete",[e],void 0,this.featureName,this.ee)});try{this.removeOnAbort=new AbortController}catch(g){}this.abortHandler=()=>{this.removeOnAbort?.abort(),this.abortHandler=void 0},n.some(e=>e)?this.importAggregator(e,()=>i.e(478).then(i.bind(i,8019))):this.deregisterDrain()}}var nt=i(2646);const it=new Map;function st(e,t,r,n,i=!0){if("object"!=typeof t||!t||"string"!=typeof r||!r||"function"!=typeof t[r])return(0,h.R)(29);const s=function(e){return(e||ae.ee).get("logger")}(e),o=(0,ce.YM)(s),a=new nt.y(ae.P);a.level=n.level,a.customAttributes=n.customAttributes,a.autoCaptured=i;const c=t[r]?.[ce.Jt]||t[r];return it.set(c,a),o.inPlace(t,[r],"wrap-logger-",()=>it.get(c)),s}var ot=i(1910);class at extends y{static featureName=K.TZ;constructor(e){var t;super(e,K.TZ),t=e,(0,c.Y)(a.$9,(e,r)=>U(e,r,t),t),function(e){(0,c.Y)(a.Wb,(t,r,{customAttributes:n={},level:i=K.p_.INFO}={})=>{st(e.ee,t,r,{customAttributes:n,level:i},!1)},e)}(e),Q(e);const r=this.ee;["log","error","warn","info","debug","trace"].forEach(e=>{(0,ot.i)(f.gm.console[e]),st(r,f.gm.console,e,{level:"log"===e?"info":e})}),this.ee.on("wrap-logger-end",function([e]){const{level:t,customAttributes:n,autoCaptured:i}=this;(0,W.R)(r,e,n,t,i)}),this.importAggregator(e,()=>i.e(478).then(i.bind(i,5288)))}}new A({features:[Pe,E,_,ze,qe,I,te,rt,at,Xe],loaderType:"spa"})})()})();</script>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>Tpay Open API</title>

            <link
                href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700"
                rel="stylesheet"
        />
        <style>
            body {
                margin: 0;
                padding: 0;
            }
        </style>
    
                    <script id="swagger-data" type="application/json">{"spec":{"openapi":"3.0.0","info":{"title":"Tpay Open API","description":"Tpay API dedicated both for merchants and partners\n# Authentication\n# Marketplace Notifications\n# Credit card payments\n","version":null,"x-logo":{"url":"/img/tpay_logo_trusted_payments.svg","altText":"Logo Tpay - Trusted payments"}},"servers":[{"url":"https://api.tpay.com","description":"Production server for live traffic"},{"url":"https://openapi.sandbox.tpay.com/","description":"Sandbox environment for testing"}],"paths":{"/accounts":{"get":{"tags":["Accounts"],"summary":"Fetch list","description":"Fetch list of merchant's accounts","operationId":"get_get_accounts","parameters":[{"name":"page","in":"query","description":"Page Number","required":false,"example":"1"},{"name":"limit","in":"query","description":"Limit per page, default is 35","required":false,"example":"35"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}},"responses":{"200":{"description":"Get list of merchants' accounts","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountListResultResponse"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]},"post":{"tags":["Accounts"],"summary":"Create account","description":"Create new account","operationId":"post_post_accounts","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}},"responses":{"200":{"description":"Account created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountCreated"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/accounts/category":{"get":{"tags":["Accounts"],"summary":"Account categories","description":"Get list of account categories","operationId":"get_get_categories","responses":{"200":{"description":"Get list of account categories","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryListResultResponse"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/accounts/category/{categoryId}":{"get":{"tags":["Accounts"],"summary":"Category","description":"Get specified category","operationId":"get_get_category","parameters":[{"name":"categoryId","in":"path","description":"Category Id","required":true,"schema":{"type":"string"},"example":"some-sample-id"}],"responses":{"200":{"description":"Get specified category by its ID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategorySingle"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/accounts/legalForm":{"get":{"tags":["Accounts"],"summary":"Account Legal Forms","description":"Get list of account Legal Forms","operationId":"get_get_legal_forms","responses":{"200":{"description":"Get list of Legal Forms","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LegalFormListResultResponse"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/accounts/mcc":{"get":{"tags":["Accounts"],"summary":"Account MCCs","description":"Get list of account MCCs","operationId":"get_get_mccs","responses":{"200":{"description":"Get list of account MCCs","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MccListResultResponse"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/accounts/pos":{"get":{"tags":["Accounts"],"summary":"Account categories","description":"Get list of account categories","operationId":"get_get_accounts_pos","responses":{"200":{"description":"Get list of account categories","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountsPosResultResponse"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/accounts/legalForm/{legalFormId}":{"get":{"tags":["Accounts"],"summary":"Category","description":"Get specified category by its ID","operationId":"get_get_legal_form","parameters":[{"name":"legalFormId","in":"path","description":"Legal form Id","required":true,"schema":{"type":"string"},"example":"1"}],"responses":{"200":{"description":"Get specified category by its ID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LegalFormSingle"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/accounts/document":{"get":{"tags":["Accounts"],"summary":"Document types","description":"Get a list of all document types","operationId":"get_get_documents","responses":{"200":{"description":"Get list of document types","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentListResultResponse"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/accounts/document/{documentTypeId}":{"get":{"tags":["Accounts"],"summary":"Get document type","description":"Get a single document type","operationId":"get_get_document","parameters":[{"name":"documentTypeId","in":"path","description":"Document type ID","required":true,"schema":{"type":"string"},"example":"1"}],"responses":{"200":{"description":"Get document type by its ID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentSingle"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/accounts/{accountId}":{"get":{"tags":["Accounts"],"summary":"Get details","description":"Fetch merchant's account details","operationId":"get_get_account","parameters":[{"name":"accountId","in":"path","description":"Account Id","required":true,"schema":{"type":"string"},"example":"some-sample-id"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}},"responses":{"200":{"description":"Get specified merchant's account by its ID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SingleAccount"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/v1/accounts/merchant":{"post":{"tags":["Accounts"],"summary":"Create merchant","description":"Create new merchant account","operationId":"post_post_merchants","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Merchant"}}}},"responses":{"200":{"description":"Merchant created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MerchantCreated"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/blik/alias":{"post":{"tags":["Blik"],"summary":"Create alias","description":"Request establishing of new alias without processing payment","operationId":"post_post_blik_alias","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAliasDetails"}}}},"responses":{"201":{"description":"Blik alias added.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAliasResponse"}}}},"400":{"description":"Blik alias could not be deciphered from sent data."},"422":{"description":"Blik alias does not fulfil one or more of the requirements."}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/blik/alias/{alias}":{"get":{"tags":["Blik"],"summary":"Get alias details","description":"Fetch previously established alias details","operationId":"get_get_blik_alias","parameters":[{"name":"aliasType","in":"query","description":"Type of the alias to fetch","required":true,"example":"PAYID"},{"name":"alias","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Blik alias details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AliasDetailsModel"}}}},"404":{"description":"Blik alias not found."},"429":{"description":"Too many requests."}},"security":[{"Bearer":[]},{"Basic":[]}]},"delete":{"tags":["Blik"],"summary":"Delete alias","description":"Request deletion of previously established alias","operationId":"delete_delete_blik_alias","parameters":[{"name":"alias","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteAliasDetails"}}}},"responses":{"204":{"description":"Blik alias deleted."},"400":{"description":"Blik alias could not be deciphered from sent data."},"404":{"description":"Blik alias not found."}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/oauth/auth":{"post":{"tags":["Authorization"],"summary":"Request Token","description":"Acquire token to use with further requests","operationId":"post_api_login","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/LegacyLoginForm"}}}},"responses":{"200":{"description":"Login to Partner API to obtain auth token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginSuccessResponse"}}}}}}},"/oauth/tokeninfo":{"get":{"tags":["Authorization"],"summary":"Fetch token info","description":"Allows to check active token information including expiration date","operationId":"get_token_info","responses":{"200":{"description":"Returns information about the active token.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenInfo"}}}},"400":{"description":"No token available.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenInfoFail"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/marketplace/v1/transaction":{"post":{"tags":["Marketplace"],"summary":"Create transaction","description":"Create new marketplace transaction","operationId":"post_marketplace_transaction_create","requestBody":{"description":"Use this endpoint to create a new unpaid transaction. Call to /pay endpoint.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ParentTransaction"}}}},"responses":{"201":{"description":"Transaction created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatedTransaction"}}}},"400":{"description":"Returns information about invalid validation with list of errors.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Violations"}}}},"409|424|500":{"description":"Inability to create a transaction.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Failed"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/marketplace/v1/transaction/{id}":{"get":{"tags":["Marketplace"],"summary":"Details","description":"Fetch details and status of given transaction","operationId":"get_marketplace_transaction_get","parameters":[{"name":"id","in":"path","description":"Transaction Ulid","required":true,"schema":{"type":"string"},"example":"01HN30EWG7B58T0B8EAMCMZNFX"},{"name":"withPaymentAttempts","in":"query","description":"Returns additional payment attempts object. Useful for BLIK payments on-site integration","required":false,"example":true}],"responses":{"200":{"description":"Get specified marketplace transaction by its ULID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetTransactionResponse"}}}},"404":{"description":"Invalid transaction data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/marketplace/v1/bank-groups":{"get":{"tags":["Marketplace"],"summary":"Bank groups","description":"Fetch list of Bank Groups available for given merchant\\'s accounts","operationId":"get_marketplace_get_bank_groups","parameters":[{"name":"merchantId[]","in":"query","description":"list of merchants IDs","style":"form","explode":true,"allowReserved":true,"example":"01G6WAPZFNNX4CXBPKQH5MYD4R"}],"responses":{"200":{"description":"Returns bank groups available for all provided merchants. You should use this list to implement passed to transaction/create endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BankGroups"}}}},"422":{"description":"Uassociated merchant id provided.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnassociatedMerchant"}}}},"500":{"description":"Internal error occured.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Failed"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/marketplace/v1/transaction/{id}/pay":{"post":{"tags":["Marketplace"],"summary":"Pay","description":"Provide payment details for marketplace transaction (applies to selected payment methods)","operationId":"post_marketplace_transaction_pay","parameters":[{"name":"id","in":"path","description":"Ulid of ParentTransaction","required":true,"schema":{"type":"string"},"example":"01J9XH0PDXH1Q8C9MMEB3VJ0G6"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Payment"}}}},"responses":{"200":{"description":"Transaction created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionCreated"}}}},"400":{"description":"Invalid transaction data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/marketplace/v1/transaction/{id}/refund":{"post":{"tags":["Marketplace"],"summary":"Create refund","description":"Create new refund for marketplace transaction","operationId":"post_marketplace_transaction_refund","parameters":[{"name":"id","in":"path","description":"Ulid of ParentTransaction","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Use this endpoint to create a refund to booked transaction.\n                The sum of refunds can not exceed the total transaction amount.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Refund"}}}},"responses":{"200":{"description":"Refund for transaction processd corectlly","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundTransaction"}}}},"400":{"description":"Returns information about invalid validation with list of errors.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Violations"}}}},"404|405":{"description":"Transaction is not paid or amount is invalid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Failed"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/marketplace/v1/transaction/{id}/cancel":{"post":{"tags":["Marketplace"],"summary":"Cancel transaction","description":"Cancel marketplace transaction","operationId":"post_marketplace_transaction_cancel","parameters":[{"name":"id","in":"path","description":"Ulid of ParentTransaction","required":true,"schema":{"type":"string","format":"string"}}],"responses":{"200":{"description":"Cancel for transaction processd corectlly"},"400":{"description":"Returns information about invalid validation with list of errors.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Violations"}}}},"404":{"description":"Transaction is not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Failed"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/transactions":{"get":{"tags":["Transactions"],"summary":"List","description":"Fetch list of transactions","operationId":"get_transactions_get","parameters":[{"name":"status","in":"query","description":"Transaction status","required":false,"example":"correct"},{"name":"from","in":"query","description":"Date and time in format yyyy-mm-dd hh:mm:ss","required":false,"example":"2023-03-01 13:44:55"},{"name":"to","in":"query","description":"Date and time in format yyyy-mm-dd hh:mm:ss","required":false,"example":"2023-03-01 14:44:55"},{"name":"page","in":"query","description":"Page Number","required":false,"example":1},{"name":"limit","in":"query","description":"Limit per page, default is 35","required":false,"example":35}],"responses":{"200":{"description":"Get transactions by query","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetTransactions"}}}},"400":{"description":"Invalid query data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]},"post":{"tags":["Transactions"],"summary":"Create transaction","description":"Create new transaction","operationId":"post_transactions_create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTransaction"}}}},"responses":{"200":{"description":"Transaction created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionCreated"}}}},"400":{"description":"Invalid transaction data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/transactions/{transactionUlid}/qr":{"post":{"tags":["Transactions"],"summary":"Generate QR code","description":"Generate QR code containing redirection to paywall for given transaction","operationId":"post_transactions_qr","parameters":[{"name":"transactionUlid","in":"path","description":"ULID of a Transaction.","required":true,"schema":{"type":"string"},"example":"01J9XH0PDXH1Q8C9MMEB3VJ0G6"}],"requestBody":{"description":"Generates QR code containing redirection to paywall for given transaction.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BuildTransactionQR"}}}},"responses":{"200":{"description":"QR code image","content":{"image/png":[],"image/jpeg":[],"image/svg+xml":[]}},"404":{"description":"Invalid transaction data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/transactions/{transactionId}/pay":{"post":{"tags":["Transactions"],"summary":"Pay","description":"Submit payment details for transaction (for selected payment methods)","operationId":"post_transactions_pay","parameters":[{"name":"transactionId","in":"path","description":"Transaction Id","required":true,"schema":{"type":"string"},"example":"01J9XH0PDXH1Q8C9MMEB3VJ0G6"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Pay"}}}},"responses":{"200":{"description":"Transaction created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionCreated"}}}},"400":{"description":"Invalid transaction data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/transactions/{transactionId}":{"get":{"tags":["Transactions"],"summary":"Details","description":"Fetch given transaction details and status","operationId":"get_transaction_get","parameters":[{"name":"transactionId","in":"path","description":"Transaction Id","required":true,"schema":{"type":"string"},"example":"01J9XH0PDXH1Q8C9MMEB3VJ0G6"}],"responses":{"200":{"description":"Get specified transaction by its ID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetTransaction"}}}},"404":{"description":"Invalid transaction data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/transactions/{transactionId}/refunds":{"get":{"tags":["Transactions"],"summary":"Refunds","description":"Fetch list of refunds for given transaction","operationId":"get_transactions_get_refunds","parameters":[{"name":"transactionId","in":"path","description":"Unique ID of the transaction.","required":true,"schema":{"type":"string"},"example":"01J9XH0PDXH1Q8C9MMEB3VJ0G6"},{"name":"from","in":"query","description":"Date and time in format yyyy-mm-dd hh:mm:ss","required":false,"example":"2023-03-01 13:44:55"},{"name":"to","in":"query","description":"Date and time in format yyyy-mm-dd hh:mm:ss","required":false,"example":"2023-03-01 14:44:55"},{"name":"page","in":"query","description":"Page Number","required":false,"example":1},{"name":"limit","in":"query","description":"Limit per page, default is 35","required":false,"example":35}],"responses":{"200":{"description":"Get a list of refunds for the transaction.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetTransactionsRefunds"}}}},"400":{"description":"Invalid query data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]},"post":{"tags":["Transactions"],"summary":"Refund transaction","description":"Request refund for given transaction in full or partial amount","operationId":"post_transactions_create_refunds","parameters":[{"name":"transactionId","in":"path","description":"ID of a Transaction.","required":true,"schema":{"type":"string"},"example":"ta_6UvbBjehvHXA7vfD or 01K1Z6T40ZWKY1XZG9VD5AZ9Q4"}],"requestBody":{"description":"\n                Refund allows to return a full or partial amount of the transaction. \n                It will be processed in a currency in which transaction was paid.\n                After a successful refund,\n                a list of requested returns will be returned with a related transaction object.\n                NOTICE: transactionId can be obtained from POST /transactions response.\n                \n                Refund full transaction amount\n                Request url: /transactions/ta_6UvbBjehvHXA7vfD/refunds\n                or (depends on your transactionId format)\n                Request url: /transactions/01K1Z6T40ZWKY1XZG9VD5AZ9Q4/refunds\n\n                Request body: {}\n            ","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTransactionRefund"}}}},"responses":{"200":{"description":"Transaction object with a list of refunds.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetTransactionsRefunds"}}}},"400":{"description":"Invalid transaction data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/transactions/{transactionId}/cancel":{"get":{"tags":["Transactions"],"summary":"Cancel transaction","description":"Request cancellation of transaction","operationId":"get_transactions_get_cancel","parameters":[{"name":"transactionId","in":"path","description":"Transaction Id","required":true,"schema":{"type":"string"},"example":"ta_6UvbBjehvHXA7vfD or 01K1Z6T40ZWKY1XZG9VD5AZ9Q4"}],"responses":{"200":{"description":"Cancel specified transaction by its ID"},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}},"404":{"description":"Invalid transaction data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}},"405":{"description":"Method is not allowed for your account","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}},"409":{"description":"Transaction is not pending","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"deprecated":true,"security":[{"Bearer":[]},{"Basic":[]}]},"post":{"tags":["Transactions"],"summary":"Cancel transaction","description":"Request cancellation of transaction","operationId":"post_transactions_cancel","parameters":[{"name":"transactionId","in":"path","description":"Transaction Id","required":true,"schema":{"type":"string"},"example":"ta_6UvbBjehvHXA7vfD or 01K1Z6T40ZWKY1XZG9VD5AZ9Q4"}],"responses":{"200":{"description":"Cancel specified transaction by its ID"},"403":{"description":"Access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}},"404":{"description":"Invalid transaction data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}},"405":{"description":"Method is not allowed for your account","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}},"409":{"description":"Transaction is not pending","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/transactions/bank-groups":{"get":{"tags":["Transactions"],"summary":"Bank groups","description":"Fetch list of available bank groups","operationId":"get_transactions_get_bank_groups","parameters":[{"name":"onlyOnline","in":"query","description":"If set to true will return only online payment groups.","required":false,"example":"true"}],"responses":{"200":{"description":"Bank groups response data.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetListOfBankGroups"}}}},"400":{"description":"Invalid query data provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/transactions/channels":{"get":{"tags":["Transactions"],"summary":"Channels","description":"Fetch list of available payment channels","operationId":"get_transactions_get_channels","responses":{"200":{"description":"Channels response data.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetChannels"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServerErrorResponse"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/refunds":{"get":{"tags":["Refunds"],"summary":"Fetch list","description":"Fetch list of refunds","operationId":"get_refund_get","parameters":[{"name":"payerEmail","in":"query","description":"Email of payer. Used only in 'transactional' context.","required":false,"example":""},{"name":"transactionTitle","in":"query","description":"Title of transaction. Used only in 'transactional' context.","required":false,"example":""},{"name":"context","in":"query","description":"Refunds context. Available values : transactional, card , Default value : transactional","required":false,"example":"transactional"},{"name":"token","in":"query","description":"Card token. Used only in 'card' context.","required":false,"example":"transactional"},{"name":"from","in":"query","description":"Date and time in format yyyy-mm-dd hh:mm:ss","required":false,"example":"2023-03-01 13:44:55"},{"name":"to","in":"query","description":"Date and time in format yyyy-mm-dd hh:mm:ss","required":false,"example":"2023-03-01 14:44:55"},{"name":"page","in":"query","description":"Page Number","required":false,"example":1},{"name":"limit","in":"query","description":"Limit per page, default is 35","required":false,"example":35}],"responses":{"200":{"description":"Get specified transaction by its ID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetRefunds"}}}},"400":{"description":"Invalid value in search parameters.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest2"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]},"post":{"tags":["Refunds"],"summary":"Create refund","description":"Create new refund based on card token","operationId":"post_refund_create","requestBody":{"description":"Create new refund.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRefund"}}}},"responses":{"200":{"description":"Refund created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundCreated"}}}},"400":{"description":"Unable to create a refund.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest2"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/refunds/{refundId}":{"get":{"tags":["Refunds"],"summary":"Get details","description":"Fetch status of single refund request","operationId":"get_refund_get_single","parameters":[{"name":"refundId","in":"path","description":"Refund id","required":true,"schema":{"type":"string"},"example":""}],"responses":{"200":{"description":"Successfully got specific refund.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetRefund"}}}},"404":{"description":"Refund could not be found.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest2"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/wallet/applepay/init":{"post":{"tags":["Wallet"],"summary":"Initiate Apple Pay","description":"Initiate new Apple Pay session","operationId":"post_wallet_applepay_init_create","requestBody":{"description":"Data needed to initiate an Apple Pay session.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateApplepayInitSession"}}}},"responses":{"200":{"description":"Information about response in boolean type.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WalletApplepayInitCreated"}}}},"400":{"description":"Validation or initialize Apple Pay session error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/tokens":{"post":{"tags":["Tokenization"],"summary":"Create card token","description":"Request creation of new card token without processing payment","operationId":"post_tokens_create","requestBody":{"description":"Initialize card tokenization process.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCardTokenization"}}}},"responses":{"200":{"description":"Information about response in boolean type.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CardTokenizationCreated"}}}},"400":{"description":"Unable to create a refund.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest2"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/tokens/{tokenValue}":{"get":{"tags":["Tokenization"],"summary":"Get details","description":"Fetch details of previously established card token","operationId":"get_tokens_get","parameters":[{"name":"tokenValue","in":"path","description":"Token value","required":true,"schema":{"type":"string"},"example":"38e012761d57b9adabaca3c0e0a7fbb5ff1c13073ad1c81c8f4a92b84045171d"}],"responses":{"200":{"description":"Token data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetToken"}}}},"204":{"description":"Token not found."}},"security":[{"Bearer":[]},{"Basic":[]}]},"delete":{"tags":["Tokenization"],"summary":"Delete card token","description":"Request removal of previously established card token","operationId":"delete_tokens_delete","parameters":[{"name":"tokenValue","in":"path","description":"Token value","required":true,"schema":{"type":"string"},"example":"38e012761d57b9adabaca3c0e0a7fbb5ff1c13073ad1c81c8f4a92b84045171d"}],"responses":{"204":{"description":"Token successfully validated and processed.\n            The token removal process will be executed asynchronously."}},"security":[{"Bearer":[]},{"Basic":[]}]}},"/collect/bank-accounts":{"get":{"tags":["Collect"],"summary":"Trusted bank accounts","description":"Fetch list of trusted bank accounts","operationId":"get_collect_bank_accounts_get","parameters":[{"name":"page","in":"query","description":"Page Number, default is 1","required":false,"example":1},{"name":"limit","in":"query","description":"Limit per page, default is 35","required":false,"example":35}],"responses":{"200":{"description":"Collect bank accounts response data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetCollectBankAccounts"}}}},"400":{"description":"Invalid value in search parameters.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]},"post":{"tags":["Collect"],"summary":"Add bank account","description":"Adding a bank account to the trusted list","operationId":"post_collect_bank_accounts_post","requestBody":{"description":"Create new bank account","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBankAccount"}}}},"responses":{"201":{"description":"Bank account created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BankAccountCreated"}}}},"400":{"description":"Unable to create a bank account.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"security":[{"Bearer":[]},{"Basic":[]}]}}},"components":{"schemas":{"SingleAccount":{"type":"object"},"PersonContactWrite":{"type":"object"},"AddressWrite":{"type":"object"},"PersonWrite":{"type":"object"},"WebsiteWrite":{"type":"object"},"AccountWrite":{"type":"object"},"Account":{"required":["offerCode","email","phone","taxId","regon","krs","legalForm","categoryId","notifyByEmail","merchantApiConsent","bankAccount"],"properties":{"offerCode":{"type":"string","maxLength":255},"email":{"type":"string","maxLength":255},"phone":{"$ref":"#/components/schemas/Phone"},"taxId":{"type":"string","maxLength":255},"regon":{"type":"string","maxLength":255},"krs":{"type":"integer"},"legalForm":{"type":"integer"},"categoryId":{"type":"integer"},"notifyByEmail":{"type":"boolean"},"merchantApiConsent":{"type":"boolean"},"website":{"type":"array","items":{"$ref":"#/components/schemas/Website"},"default":[]},"address":{"type":"array","items":{"$ref":"#/components/schemas/Address"},"default":[]},"person":{"type":"array","items":{"$ref":"#/components/schemas/Person"},"default":[]},"bankAccount":{"$ref":"#/components/schemas/BankAccount"}},"type":"object"},"AccountListResultResponse":{"required":["result","requestId","page","limit","total"],"properties":{"list":{"type":"array","items":{"$ref":"#/components/schemas/SingleAccount"},"default":[]},"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255},"page":{"type":"integer"},"limit":{"type":"integer"},"total":{"type":"integer"}},"type":"object"},"AccountCreated":{"required":["result","requestId","id","offerCode","email","taxId","regon","krs","legalForm","categoryId","notifyByEmail","verificationStatus","activationLink","apiCredentials","transactionApiCredentials"],"properties":{"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255},"id":{"type":"string","maxLength":255},"offerCode":{"type":"string","maxLength":255},"email":{"type":"string","maxLength":255},"taxId":{"type":"string","maxLength":255},"regon":{"type":"string","maxLength":255},"krs":{"type":"integer"},"legalForm":{"type":"integer"},"categoryId":{"type":"integer"},"notifyByEmail":{"type":"boolean"},"verificationStatus":{"type":"integer"},"activationLink":{"type":"string","maxLength":255},"website":{"type":"array","items":{"$ref":"#/components/schemas/Website2"},"default":[]},"address":{"type":"array","items":{"$ref":"#/components/schemas/Address2"},"default":[]},"person":{"type":"array","items":{"$ref":"#/components/schemas/Person2"},"default":[]},"apiCredentials":{"type":"array","items":{"$ref":"#/components/schemas/ApiCredential"}},"transactionApiCredentials":{"$ref":"#/components/schemas/TransactionApiCredential"}},"type":"object"},"CategoryListResultResponse":{"required":["result","requestId","page","limit","total"],"properties":{"list":{"type":"array","items":{"$ref":"#/components/schemas/Category"},"default":[]},"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255},"page":{"type":"integer"},"limit":{"type":"integer"},"total":{"type":"integer"}},"type":"object"},"CategorySingle":{"required":["result","requestId","id","name"],"properties":{"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255},"id":{"type":"integer"},"name":{"type":"string","maxLength":255}},"type":"object"},"LegalFormListResultResponse":{"required":["result","requestId","page","limit","total"],"properties":{"list":{"type":"array","items":{"$ref":"#/components/schemas/LegalForm"},"default":[]},"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255},"page":{"type":"integer"},"limit":{"type":"integer"},"total":{"type":"integer"}},"type":"object"},"MccListResultResponse":{"required":["result","requestId","page","limit","total"],"properties":{"list":{"type":"array","items":{"$ref":"#/components/schemas/Mcc"},"default":[]},"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255},"page":{"type":"integer"},"limit":{"type":"integer"},"total":{"type":"integer"}},"type":"object"},"AccountsPosResultResponse":{"required":["result","requestId"],"properties":{"list":{"type":"array","items":{"$ref":"#/components/schemas/Website2"},"default":[]},"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255}},"type":"object"},"LegalFormSingle":{"required":["result","requestId","id","name"],"properties":{"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255},"id":{"type":"integer"},"name":{"type":"string","maxLength":255}},"type":"object"},"DocumentListResultResponse":{"required":["result","requestId","page","limit","total"],"properties":{"list":{"type":"array","items":{"$ref":"#/components/schemas/Document"},"default":[]},"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255},"page":{"type":"integer"},"limit":{"type":"integer"},"total":{"type":"integer"}},"type":"object"},"DocumentSingle":{"required":["result","requestId","id","name"],"properties":{"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255},"id":{"type":"integer"},"name":{"type":"string","maxLength":255}},"type":"object"},"Merchant":{"required":["offerCode","email","taxId","regon","krs","legalForm","categoryId"],"properties":{"offerCode":{"type":"string","maxLength":255},"email":{"type":"string","maxLength":255},"taxId":{"type":"string","maxLength":255},"regon":{"type":"string","maxLength":255},"krs":{"type":"integer"},"legalForm":{"type":"integer"},"categoryId":{"type":"integer"},"address":{"type":"array","items":{"$ref":"#/components/schemas/Address3"},"default":[]},"website":{"type":"array","items":{"$ref":"#/components/schemas/Website3"},"default":[]},"contactPerson":{"type":"array","items":{"$ref":"#/components/schemas/Person3"},"default":[]},"merchantApiConsent":{"type":"boolean","default":false}},"type":"object"},"MerchantCreated":{"required":["result","id","offerCode","email","verificationStatus","activationLink","apiCredentials","transactionApiCredentials"],"properties":{"result":{"type":"string","maxLength":255},"id":{"type":"string","maxLength":255},"offerCode":{"type":"string","maxLength":255},"email":{"type":"string","maxLength":255},"taxId":{"type":"string","maxLength":255,"nullable":true},"regon":{"type":"string","maxLength":255,"nullable":true},"krs":{"type":"integer","nullable":true},"legalForm":{"type":"integer","nullable":true},"categoryId":{"type":"integer","nullable":true},"verificationStatus":{"type":"integer"},"activationLink":{"type":"string","maxLength":255},"website":{"type":"array","items":{"$ref":"#/components/schemas/Website4"},"default":[]},"address":{"type":"array","items":{"$ref":"#/components/schemas/Address4"},"default":[]},"person":{"type":"array","items":{"$ref":"#/components/schemas/Person4"},"default":[]},"apiCredentials":{"type":"array","items":{"$ref":"#/components/schemas/ApiCredential2"}},"transactionApiCredentials":{"$ref":"#/components/schemas/TransactionApiCredential2"}},"type":"object"},"CreateAliasDetails":{"required":["description","pay"],"properties":{"description":{"description":"Description of the permission asked, visible to the payer.","type":"string","maxLength":105,"minLength":1,"example":"YourGroceryShop payments"},"lang":{"description":"Short code of language","type":"string","enum":["en","pl","de","fr","ru","it","es","uk"],"example":"en","nullable":true},"pay":{"$ref":"#/components/schemas/Pay2"}},"type":"object"},"CreateAliasResponse":{"required":["result","posId","status","date","description"],"properties":{"result":{"description":"Status of the request","type":"string","example":"success"},"posId":{"description":"Identifier of your POS which issued the alias request","type":"string","example":"ps_Erdmv4lkqdVw7XRB"},"status":{"description":"Status of the alias registration","type":"string","example":"pending"},"date":{"description":"List of timestamps of alias lifecycle events","type":"array","items":[],"example":{"creation":"2024-12-12 12:34:56"}},"description":{"description":"Description of the alias, as it was presented to the payer.","type":"string","example":"YourGroceryShop payments"}},"type":"object"},"AliasDetailsModel":{"required":["isActive","aliases"],"properties":{"isActive":{"description":"Is alias active","type":"boolean"},"aliases":{"type":"array","items":{"$ref":"#/components/schemas/AliasDetails"}}},"type":"object"},"DeleteAliasDetails":{"required":["aliasType"],"properties":{"aliasType":{"description":"Alias type","type":"string","enum":["UID","PAYID"]}},"type":"object"},"LegacyLoginForm":{"required":["client_id","client_secret"],"properties":{"client_id":{"type":"string"},"client_secret":{"type":"string"}},"type":"object"},"LoginSuccessResponse":{"required":["issued_at","client_id","access_token"],"properties":{"issued_at":{"type":"integer","example":"1642706725"},"scope":{"type":"string","default":"read","maxLength":255,"example":"read"},"token_type":{"type":"string","default":"Bearer","maxLength":255,"example":"Bearer"},"expires_in":{"type":"integer","default":7200,"example":"7200"},"client_id":{"type":"string","maxLength":255},"access_token":{"type":"string","maxLength":255}},"type":"object"},"TokenInfo":{"required":["token","requestId"],"properties":{"token":{"$ref":"#/components/schemas/TokenInfoDetails"},"requestId":{"type":"string"},"result":{"type":"string","default":"success","example":"success"}},"type":"object"},"TokenInfoFail":{"required":["errors","requestId"],"properties":{"errors":{"type":"array","items":{"$ref":"#/components/schemas/Error"}},"requestId":{"type":"string"},"result":{"type":"string","default":"failed","example":"failed"}},"type":"object"},"ParentTransaction":{"required":["currency","description","hiddenDescription","languageCode","preSelectedChannelId","pos","billingAddress","childTransactions","transactionCallbacks"],"properties":{"currency":{"description":"This parameter affects display language of payment wall and email notifications","type":"string","enum":["PLN"],"example":"PLN"},"description":{"description":"Transaction description to display on payment wall","type":"string","example":"Test marketplace transaction"},"hiddenDescription":{"description":"Custom unique value assigned to the transaction ie. orderId.\n        This value will be sent back in webhook notification after successful payment","type":"string","example":"1234"},"languageCode":{"description":"This parameter affects display language of payment wall and email notifications","type":"string","enum":["PL","EN"],"example":"PL"},"preSelectedChannelId":{"description":"Id of payment channel chosen on merchant side. Null if there was no choice on merchant side.\n        If this value is provided, a payer will see the specific payment wall step of selected payment method.\n        If null, a payer will see the payment wall with choice of all available payment methods","type":"string","example":"64"},"pos":{"$ref":"#/components/schemas/Pos"},"billingAddress":{"$ref":"#/components/schemas/BillingAddress"},"childTransactions":{"type":"array","items":{"$ref":"#/components/schemas/ChildTransaction"}},"transactionCallbacks":{"type":"array","items":{"$ref":"#/components/schemas/TransactionCallback"}},"transactionEmails":{"description":"Optional configuration for transaction emails sent to the payer. \n        Each email type can be enabled or disabled individually. By default, all email types are enabled.","properties":{"transactionCreated":{"description":"Whether the \"Transaction Created\" email will be sent to the payer.","type":"boolean","default":true},"transactionPaid":{"description":"Whether the \"Transaction Paid\" email will be sent to the payer.","type":"boolean","default":true}},"type":"object","default":[],"example":{"transactionCreated":true,"transactionPaid":false}}},"type":"object"},"CreatedTransaction":{"required":["transactionId","title","paymentUrl"],"properties":{"transactionId":{"type":"string","example":"01G5EDNEPPNWBJAX8AR5QAMGVA"},"title":{"description":"The user-friendly transaction title presented to\n     * the payer","type":"string","example":"M-DW123DWX"},"paymentUrl":{"description":"The URL to payment wall of created transaction.","type":"string","example":"https://secure.tpay.com/marketplace?id=01G5EDNEPPNWBJAX8AR5QAMGVA"}},"type":"object"},"Violations":{"required":["violations"],"properties":{"violations":{"type":"object","example":{"amount":"This value should be of type int.","billingAddress.email":"This value should not be blank."}}},"type":"object"},"Failed":{"required":["reasons"],"properties":{"reasons":{"type":"array","items":{"type":"string","example":"Cannot provide bank groups list"}}},"type":"object"},"GetTransactionResponse":{"required":["title","currency","description","hiddenDescription","languageCode","preSelectedChannelId","status","creationDate","pos","billingAddress","childTransactions","transactionCallbacks","transactionEmails","payments"],"properties":{"title":{"description":"Transaction title","type":"string","example":"M-WW1S7"},"currency":{"description":"This parameter affects display language of payment wall and email notifications","type":"string","enum":["PLN"],"example":"PLN"},"description":{"description":"Transaction description to display on payment wall","type":"string","example":"Test marketplace transaction"},"hiddenDescription":{"description":"Custom unique value assigned to the transaction ie. orderId.\n        This value will be sent back in webhook notification after successful payment","type":"string","example":"1234"},"languageCode":{"description":"This parameter affects display language of payment wall and email notifications","type":"string","enum":["PL","EN"],"example":"PL"},"preSelectedChannelId":{"description":"Id of payment channel chosen on merchant side. Null if there was no choice on merchant side.\n        If this value is provided, a payer will see the specific payment wall step of selected payment method.\n        If null, a payer will see the payment wall with choice of all available payment methods","type":"string","example":"64"},"status":{"type":"string","enum":["pending","correct","refund","canceled"],"example":"correct"},"creationDate":{"type":"string","example":"2023-01-01 12:00:00.000000"},"pos":{"$ref":"#/components/schemas/Pos"},"billingAddress":{"$ref":"#/components/schemas/BillingAddress"},"childTransactions":{"type":"array","items":{"$ref":"#/components/schemas/ChildTransactionResponse"}},"transactionCallbacks":{"type":"array","items":{"$ref":"#/components/schemas/TransactionCallback"}},"transactionEmails":{"description":"Optional configuration for transaction emails sent to the payer. \n        Each email type can be enabled or disabled individually. By default, all email types are enabled.","properties":{"transactionCreated":{"description":"Whether the \"Transaction Created\" email will be sent to the payer.","type":"boolean","default":true},"transactionPaid":{"description":"Whether the \"Transaction Paid\" email will be sent to the payer.","type":"boolean","default":true}},"type":"object","example":{"transactionCreated":true,"transactionPaid":false}},"payments":{"$ref":"#/components/schemas/PaymentsWithAttempts"}},"type":"object"},"BadRequest":{"required":["result","requestId"],"properties":{"result":{"type":"string","enum":["failed"]},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/BadRequestErrors"},"default":[]}},"type":"object"},"BankGroups":{"required":["groups"],"properties":{"groups":{"type":"array","items":{"$ref":"#/components/schemas/BankGroup"}}},"type":"object"},"UnassociatedMerchant":{"required":["reasons","unassociatedMerchants"],"properties":{"reasons":{"type":"array","items":{"type":"string","example":"Unassociated merchant provided"}},"unassociatedMerchants":{"type":"array","items":{"type":"string","example":"1235"}}},"type":"object"},"Payment":{"required":["blikPaymentData","cardPaymentData"],"properties":{"blikPaymentData":{"$ref":"#/components/schemas/BlikPaymentData"},"cardPaymentData":{"$ref":"#/components/schemas/CardPaymentData"},"applePayPaymentData":{"description":"Apple Pay Payment Data This is base64 of json containing encrypted payment data received from\n            Apple Pay JS on payment authorized event","type":"string","example":"ewogICJkYXRhIjogInh4eHgiLAogICJzaWduYXR1cmUiOiAieHh4eCIsCiAgImhlYWRlciI6IHsKICAgICJwdWJsaWNLZXlIY\nXNoIjogInh4eHgiLAogICAgImVwaGVtZXJhbFB1YmxpY0tleSI6ICJ4eHh4IiwKICAgICJ0cmFuc2FjdGlvbklkIjogInh4eHgiCiAgfSwKICAidmVyc2lv\nbiI6ICJFQ192MSIKfQo","nullable":true}},"type":"object"},"TransactionCreated":{"required":["transactionPaymentUrl","lang","payer","payments","result","requestId","transactionId","title","posId","status","amount","currency","description","hiddenDescription","date"],"properties":{"transactionPaymentUrl":{"description":"URL to pay for transaction","type":"string","maxLength":255,"pattern":"https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&\\/=]*)","example":"https:\\secure.tpay.com?title=TR-BRA-ASDFGH&uid=00AAAABBBBCCCCDDDDEEEEFFFF"},"lang":{"description":"Short code of language","type":"string","enum":["en","pl","de","fr","ru","it","es","uk"],"example":"en"},"payer":{"$ref":"#/components/schemas/Payer"},"payments":{"$ref":"#/components/schemas/Payments"},"result":{"description":"success - all actions in the request are successful.\u003Cbr/\u003EactionRequired - after this request you\n        need to perform an action like redirect user to specific URL to finish the operation.\u003Cbr/\u003Epending - all actions\n        in the request are successful, but you need to wait for confirmation (action is asynchronous).\u003Cbr/\u003Efailed - \n        request failed, validation went wrong, or action finished with declined status, look after errors section in\n        response to see more information","type":"string","enum":["success","actionRequired","pending","failed"],"example":"success"},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"transactionId":{"type":"string","example":"ta_6UvbBjehvHXA7vfD or 01K1Z6T40ZWKY1XZG9VD5AZ9Q4"},"title":{"type":"string","example":"TR-BRA-KGZK0X"},"posId":{"type":"string","example":"ps_6UvbBjehvHXA7vfD"},"status":{"description":"pending - transaction is waiting for being processed\u003Cbr /\u003E\n        paid - transaction is paid\u003Cbr/\u003E\n        correct - merchant has accepted payment\u003Cbr/\u003E\n        refund - transaction has been fully refunded\u003Cbr/\u003E\n        canceled - transaction has been marked as canceled","type":"string","enum":["paid","correct","pending","refund","canceled"],"example":"success"},"amount":{"type":"numeric","example":12.34},"currency":{"description":"Currency code in ISO-4217","type":"string","example":"PLN"},"description":{"description":"Description of the transaction.","type":"string","example":"Test transaction"},"hiddenDescription":{"description":"Parameter to identify the transaction on the merchant side.","type":"string","example":"123456"},"date":{"$ref":"#/components/schemas/TransactionDates"}},"type":"object"},"Refund":{"required":["childTransactions"],"properties":{"childTransactions":{"description":"Empty array to refund entire transaction payment or array of child transactions to refund","type":"array","items":{"$ref":"#/components/schemas/ChildTransaction2"}}},"type":"object"},"RefundTransaction":{"required":["transactionId","amount"],"properties":{"transactionId":{"type":"string","example":"01G5EDNEPPNWBJAX8AR5QAMGVA"},"amount":{"type":"int","example":"20"}},"type":"object"},"GetTransactions":{"required":["result","requestId","page","limit","total"],"properties":{"transactions":{"type":"array","items":{"$ref":"#/components/schemas/GetTransaction"},"default":[]},"result":{"type":"string","maxLength":255},"requestId":{"type":"string","maxLength":255},"page":{"type":"integer"},"limit":{"type":"integer"},"total":{"type":"integer"}},"type":"object"},"CreateTransaction":{"required":["amount","currency","description","payer","pay","callbacks"],"properties":{"amount":{"type":"number","format":"float","minimum":0,"exclusiveMinimum":true,"example":12.34},"currency":{"description":"ISO 4217 currency code","type":"enum","enum":["PLN"],"example":"PLN"},"description":{"description":"Description of the transaction.","type":"string","maxLength":128,"minLength":1,"example":"Test transaction"},"hiddenDescription":{"description":"Parameter to identify the transaction on the merchant side.","type":"string","maxLength":255,"example":"123456","nullable":true},"lang":{"description":"Short code of language","type":"string","enum":["en","pl","de","fr","ru","it","es","uk"],"example":"en","nullable":true},"payer":{"$ref":"#/components/schemas/Payer2"},"pay":{"$ref":"#/components/schemas/Pay"},"callbacks":{"$ref":"#/components/schemas/Callbacks"}},"type":"object"},"BuildTransactionQR":{"required":["logo"],"properties":{"size":{"description":"Size of resulting QR code","type":"string","default":"M","enum":["S","M","L","XL"],"example":"M"},"outputType":{"description":"Desired type of resulting image","type":"string","default":"image/png","enum":["image/png","image/jpeg","image/svg+xml"],"example":"image/png"},"logo":{"description":"Base64 encoded image of logo to be embedded into QR code.","type":"string","example":"iVBORw0KGgoAAAANSUhEUgAAAFMAAABUCAYAA(...)4eCs20AAAAASUVORK5CYII="},"logoType":{"description":"Type of logo image to be embedded into QR code","type":"string","enum":["image/png","image/jpeg","image/svg+xml"],"example":"image/png","nullable":true}},"type":"object"},"Pay":{"required":["blikPaymentData","cardPaymentData","tokenPaymentData"],"properties":{"groupId":{"description":"Bank group ID","type":"integer","example":150,"nullable":true},"channelId":{"description":"Payment method ID","type":"integer","example":64,"nullable":true},"method":{"type":"string","enum":["pay_by_link","transfer","sale"],"example":"pay_by_link","nullable":true},"blikPaymentData":{"$ref":"#/components/schemas/BlikPaymentData"},"cardPaymentData":{"$ref":"#/components/schemas/CardPaymentData"},"tokenPaymentData":{"$ref":"#/components/schemas/TokenPaymentData"},"cof":{"description":"Credentials On File This option indicates type of card token payment.\n            List of available options:\u003Cbr/\u003E\n            unscheduled - does not occur on a scheduled or regularly occurring transaction date,\n            card charges initiated by merchant\u003Cbr/\u003E\n            cardholder_initiated - indicates that card charge is being processed with the intention of retaining\n            the cardholder\u2019s data\u003Cbr/\u003E\n            recurring - card charges initiated by merchant at regular fixed intervals","type":"string","default":"unscheduled","enum":["unscheduled","cardholder_initiated","recurring"],"nullable":true},"applePayPaymentData":{"description":"Apple Pay Payment Data This is base64 of json containing encrypted payment data received from\n            Apple Pay JS on payment authorized event","type":"string","example":"ewogICJkYXRhIjogInh4eHgiLAogICJzaWduYXR1cmUiOiAieHh4eCIsCiAgImhlYWRlciI6IHsKICAgICJwdWJsaWNLZXlIY\nXNoIjogInh4eHgiLAogICAgImVwaGVtZXJhbFB1YmxpY0tleSI6ICJ4eHh4IiwKICAgICJ0cmFuc2FjdGlvbklkIjogInh4eHgiCiAgfSwKICAidmVyc2lv\nbiI6ICJFQ192MSIKfQo","nullable":true}},"type":"object"},"GetTransaction":{"required":["lock","payments","result","requestId","transactionId","title","posId","status","amount","currency","description","hiddenDescription","date"],"properties":{"lock":{"$ref":"#/components/schemas/Lock"},"payments":{"$ref":"#/components/schemas/PaymentsWithAttempts"},"result":{"description":"success - all actions in the request are successful.\u003Cbr/\u003EactionRequired - after this request you\n        need to perform an action like redirect user to specific URL to finish the operation.\u003Cbr/\u003Epending - all actions\n        in the request are successful, but you need to wait for confirmation (action is asynchronous).\u003Cbr/\u003Efailed - \n        request failed, validation went wrong, or action finished with declined status, look after errors section in\n        response to see more information","type":"string","enum":["success","actionRequired","pending","failed"],"example":"success"},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"transactionId":{"type":"string","example":"ta_6UvbBjehvHXA7vfD or 01K1Z6T40ZWKY1XZG9VD5AZ9Q4"},"title":{"type":"string","example":"TR-BRA-KGZK0X"},"posId":{"type":"string","example":"ps_6UvbBjehvHXA7vfD"},"status":{"description":"pending - transaction is waiting for being processed\u003Cbr /\u003E\n        paid - transaction is paid\u003Cbr/\u003E\n        correct - merchant has accepted payment\u003Cbr/\u003E\n        refund - transaction has been fully refunded\u003Cbr/\u003E\n        canceled - transaction has been marked as canceled","type":"string","enum":["paid","correct","pending","refund","canceled"],"example":"success"},"amount":{"type":"numeric","example":12.34},"currency":{"description":"Currency code in ISO-4217","type":"string","example":"PLN"},"description":{"description":"Description of the transaction.","type":"string","example":"Test transaction"},"hiddenDescription":{"description":"Parameter to identify the transaction on the merchant side.","type":"string","example":"123456"},"date":{"$ref":"#/components/schemas/TransactionDates"}},"type":"object"},"GetTransactionsRefunds":{"required":["lock","payments","refundsList","refundsNoAccountList","refundsCardsList","total","result","requestId","transactionId","title","posId","status","amount","currency","description","hiddenDescription","date"],"properties":{"lock":{"$ref":"#/components/schemas/Lock"},"payments":{"$ref":"#/components/schemas/PaymentsWithAttempts"},"refundsList":{"description":"Refund data.","type":"array","items":{"$ref":"#/components/schemas/GetRefundTransaction"}},"refundsNoAccountList":{"description":"Refund no account data.","type":"array","items":{"$ref":"#/components/schemas/RefundNoAccount"}},"refundsCardsList":{"description":"Refund cards data..","type":"array","items":{"$ref":"#/components/schemas/RefundCards"}},"page":{"description":"Page number.","type":"int","default":1,"minimum":1,"example":5},"limit":{"description":"Limit of records.","type":"int","default":35,"maximum":100,"minimum":1,"example":25},"total":{"description":"Quantity of records.","type":"int","minimum":0,"example":20},"result":{"description":"success - all actions in the request are successful.\u003Cbr/\u003EactionRequired - after this request you\n        need to perform an action like redirect user to specific URL to finish the operation.\u003Cbr/\u003Epending - all actions\n        in the request are successful, but you need to wait for confirmation (action is asynchronous).\u003Cbr/\u003Efailed - \n        request failed, validation went wrong, or action finished with declined status, look after errors section in\n        response to see more information","type":"string","enum":["success","actionRequired","pending","failed"],"example":"success"},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"transactionId":{"type":"string","example":"ta_6UvbBjehvHXA7vfD or 01K1Z6T40ZWKY1XZG9VD5AZ9Q4"},"title":{"type":"string","example":"TR-BRA-KGZK0X"},"posId":{"type":"string","example":"ps_6UvbBjehvHXA7vfD"},"status":{"description":"pending - transaction is waiting for being processed\u003Cbr /\u003E\n        paid - transaction is paid\u003Cbr/\u003E\n        correct - merchant has accepted payment\u003Cbr/\u003E\n        refund - transaction has been fully refunded\u003Cbr/\u003E\n        canceled - transaction has been marked as canceled","type":"string","enum":["paid","correct","pending","refund","canceled"],"example":"success"},"amount":{"type":"numeric","example":12.34},"currency":{"description":"Currency code in ISO-4217","type":"string","example":"PLN"},"description":{"description":"Description of the transaction.","type":"string","example":"Test transaction"},"hiddenDescription":{"description":"Parameter to identify the transaction on the merchant side.","type":"string","example":"123456"},"date":{"$ref":"#/components/schemas/TransactionDates"}},"type":"object"},"CreateTransactionRefund":{"properties":{"amount":{"description":"Amount. multipleOf 0.01","type":"number","format":"float","default":null,"minimum":0,"exclusiveMinimum":true,"example":12.34,"nullable":true}},"type":"object"},"GetListOfBankGroups":{"required":["result","requestId","groups"],"properties":{"result":{"description":"success - all actions in the request are successful.\u003Cbr/\u003EactionRequired - after this request you\n        need to perform an action like redirect user to specific URL to finish the operation.\u003Cbr/\u003Epending - all actions\n        in the request are successful, but you need to wait for confirmation (action is asynchronous).\u003Cbr/\u003Efailed - \n        request failed, validation went wrong, or action finished with declined status, look after errors section in\n        response to see more information","type":"string","enum":["success","actionRequired","pending","failed"],"example":"success"},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"groups":{"description":"Bank group.","type":"array","items":{"$ref":"#/components/schemas/BankGroup2"}}},"type":"object"},"GetChannels":{"required":["result","requestId","language","currency","channels"],"properties":{"result":{"description":"success - all actions in the request are successful.\u003Cbr/\u003Efailed - more details in errors section","type":"string","enum":["success","failed"],"example":"success"},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"language":{"type":"string","example":"pl"},"currency":{"type":"string","example":"PLN"},"channels":{"description":"Channels data.","type":"array","items":{"$ref":"#/components/schemas/Channel"}}},"type":"object"},"ServerErrorResponse":{"properties":{"result":{"type":"string","default":"failed","maxLength":255,"example":"failed"},"requestId":{"type":"string","default":"","maxLength":255},"errors":{"type":"array","items":{"$ref":"#/components/schemas/Error2"},"default":[]}},"type":"object"},"GetRefunds":{"required":["result","requestId","transactions","page","limit","total"],"properties":{"result":{"description":"\n        List of available transaction statuses\n        * success - all actions in the request are successful\n        * actionRequired - after this request you need to perform an action like redirect user to specific \n          URL to finish the operation\n        * pending - all actions in the request are successful, but you need to wait for \n          confirmation (action is asynchronous)\n        * failed - request failed, validation went wrong, or action finished with declined status,\n          look after errors section in response to see more information\n        ","type":"string","enum":["success","actionRequired","pending","failed"],"example":"failed"},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"transactions":{"$ref":"#/components/schemas/GetRefundTransactions"},"page":{"description":"Page number.","type":"integer","example":"1"},"limit":{"description":"Limit of records.","type":"integer","example":"100"},"total":{"description":"Quantity of records.","type":"integer","example":"200"}},"type":"object"},"BadRequest2":{"required":["result","requestId","errors"],"properties":{"result":{"description":"\n        List of available transaction statuses\n        * success - all actions in the request are successful\n        * actionRequired - after this request you need to perform an action like redirect\n        * user to specific URL to finish the operation\n        * pending - all actions in the request are successful,\n        * but you need to wait for confirmation (action is asynchronous)\n        * failed - request failed, validation went wrong, or action finished with declined status, look after errors\n        section in response to see more information","type":"string","enum":["success","actionRequired","pending","failed"],"example":"failed"},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"errors":{"type":"array","items":{"$ref":"#/components/schemas/BadRequestError"}}},"type":"object"},"CreateRefund":{"required":["amount","currencyCode","tokenValue"],"properties":{"amount":{"description":"Amount","type":"number","format":"float","minimum":0,"exclusiveMinimum":true,"example":12.34},"currencyCode":{"description":"Currency code of refund","type":"integer","minimum":0,"exclusiveMinimum":true,"example":985},"tokenValue":{"description":"Length should be one of 12-19 for EISOP.","type":"string","maxLength":255,"example":"t59c2810d59285e3e0d"},"cardExpiryDate":{"description":"Card expiry date in YYMM format. Required with EISOP token.","type":"string","default":null,"maxLength":255,"pattern":"^([2-9][0-9])(0[1-9]|1[0-2])$","example":"2808","nullable":true},"rocText":{"description":"Custom identificator for settlement. This value must be alphanumeric.","type":"string","default":null,"maxLength":255,"pattern":"[A-Za-z0-9\u00c0-\u017e]+$","example":"abc123","nullable":true}},"type":"object"},"RefundCreated":{"required":["result","requestId","refundContent"],"properties":{"result":{"description":"List of available transaction statuses\u003Cbr/\u003E\n        success - all actions in the request are successful\n        actionRequired - after this request you need to perform an action like redirect user to specific URL \n        to finish the operation\u003Cbr/\u003E\n        pending - all actions in the request are successful, but you need to wait \n        for confirmation (action is asynchronous)\u003Cbr/\u003E\n        failed - request failed, validation went wrong, or action finished with declined status,\u003Cbr/\u003E\n         look after errors section in response to see more information\n        ","type":"string","maxLength":255,"enum":["success","actionRequired","pending","failed"],"example":"success"},"requestId":{"description":"Request id","type":"string","maxLength":255,"example":"85136c79cbf9fe36bb9"},"refundContent":{"$ref":"#/components/schemas/RefundContent"}},"type":"object"},"GetRefund":{"required":["result","requestId","refundId","status","amount","currency","date"],"properties":{"result":{"description":"List of available transaction statuses\u003Cbr/\u003E\n        * success - all actions in the request are successful\u003Cbr/\u003E\n        * actionRequired - after this request you need to perform an action like redirect user to specific URL to\u003Cbr/\u003E \n          finish the operation\u003Cbr/\u003E\n        * pending - all actions in the request are successful,\u003Cbr/\u003E \n          but you need to wait for confirmation (action is asynchronous)\u003Cbr/\u003E\n        * failed - request failed, validation went wrong, or action finished with declined status,\u003Cbr/\u003E\n          look after errors section in response to see more information\u003Cbr/\u003E\n        ","type":"string","enum":["success","actionRequired","pending","failed"],"example":"success"},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"refundId":{"description":"ID of a Refund.","type":"string","example":"rf_6UvbBjehvHXA7vfD"},"status":{"description":"Available refund status for 'transactional' context\u003Cbr/\u003E\n        * new - fresh refund\u003Cbr/\u003E\n        * pending - awaiting refund to process\u003Cbr/\u003E\n        * to_complete - refund is awaiting for payer data completion (missing bank account)\u003Cbr/\u003E\n        * cancel - aborted refund, will not be porcessed\u003Cbr/\u003E\n        * hold - refund temporary aborted, will be processed after verification process\u003Cbr/\u003E\n        * processed - refund processed, but not done (awaiting for send to payer)\u003Cbr/\u003E\n        * done - refund done, money has ben sent\u003Cbr/\u003E\n        \u003Cbr/\u003E\n        Available refund status for 'card' context\u003Cbr/\u003E\n        \u003Cbr/\u003E\n        * new - fresh refund\u003Cbr/\u003E\n        * declined - refund declined by acquirer\u003Cbr/\u003E\n        * authorized - refund done\u003Cbr/\u003E\n        ","type":"string","enum":["new","pending","to_complete","cancel","hold","processed","done","declined","authorized"],"example":"pending"},"amount":{"description":"Amount","type":"numeric","example":200.15},"currency":{"description":"Currency code in ISO-4217.","type":"string","enum":["PLN","GPB","USD","EUR","CZK","NOK","DKK","SEK","CHF"],"example":"PLN"},"date":{"$ref":"#/components/schemas/GetRefundDate"}},"type":"object"},"CreateApplepayInitSession":{"required":["domainName","validationUrl"],"properties":{"domainName":{"description":"Correct domain name provided during boarding.","type":"string","example":"secure.tpay.com"},"displayName":{"description":"Name displayed when paying. If it is not given,\n            the name is taken from the data provided during boarding.","type":"string","default":null,"maxLength":64,"minLength":1,"example":"https://openapi.tpay.com/#/wallet","nullable":true},"validationUrl":{"description":"\n            Correct domain name provided during boarding.   \n            The URL that is required to obtain an Apple Pay session.\n            More information can be found:\n            https://developer.apple.com/documentation/apple_pay_on_the_web/applepayvalidatemerchantevent/1778026-validationurl","type":"string","example":"https://apple-pay-gateway-cert.apple.com/paymentservices/startSession"}},"type":"object"},"WalletApplepayInitCreated":{"required":["result","requestId","session"],"properties":{"result":{"description":"\n            List of available transaction statuses:\n            * success - all actions in the request are successful\n            * actionRequired - after this request you need to perform an action like redirect user to specific URL \n            to finish the operation\n            * pending - all actions in the request are successful, but you need to wait \n            for confirmation (action is asynchronous)\n            * failed - request failed, validation went wrong, or action finished with declined status,\n            look after errors section in response to see more information\n            ","type":"string","enum":["success","actionRequired","pending","failed"],"example":"success"},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"session":{"type":"string","example":"\n        ewogICAiZXBvY2hUaW1lc3RhbXAiOjE2NDc1MDU4ODkxODAsCiAgICJleHBpcmVzQXQiOjE2NDc1MDk0ODkxODAsCiAgICJtZXJjaGFudFNlc3N\n        (...)\n        2ZjcwZDAxMDcwMmEwODAzMDgwMDIwMTAxMzEwZjMwMGQwNjA5NjA4NjQ4MDE2NTAzMDQwMjAxMDUwMDMwODAwNjA5MmE4NjQ4ODZmNzBkMDEwNz\n        AxMDAwMGEwODAzMDgyMDNlNDMwODIwMzhiYTAwMzAyMDEwMjAyMDg1OWQ4YTFiY2FhZjRlM2NkMzAwYTA2MDgyYTg2NDhjZTNkMDQwMzAyMzA3Y\n        "}},"type":"object"},"CreateCardTokenization":{"required":["callbackUrl"],"properties":{"payer":{"oneOf":[{"$ref":"#/components/schemas/Payer3"}],"nullable":true,"default":null},"callbackUrl":{"description":"Url used to notification about ending tokenization process","type":"string","example":"https://przykladowezakupy.pl/"},"redirectUrl":{"oneOf":[{"$ref":"#/components/schemas/RedirectUrl"}],"nullable":true,"description":"Additional data.","default":null},"card":{"description":"Encrypted card data.","type":"string","default":null,"example":"SrKhV6VEPiaw4cQEM2Mr0Nj7fuVhRdAdQ9Bk+sv7iM/St12s/W4zRNyqVptN3KIVMqr6coRXNfSPF/o/N9pLy94ko(...)","nullable":true}},"type":"object"},"CardTokenizationCreated":{"required":["result","requestId","id","url"],"properties":{"result":{"description":"List of available transaction statuses\u003Cbr/\u003E\n        success - all actions in the request are successful\n        actionRequired - after this request you need to perform an action like redirect user to specific URL \n        to finish the operation\u003Cbr/\u003E\n        pending - all actions in the request are successful, but you need to wait \n        for confirmation (action is asynchronous)\u003Cbr/\u003E\n        failed - request failed, validation went wrong, or action finished with declined status,\u003Cbr/\u003E\n         look after errors section in response to see more information\n        ","type":"string","maxLength":255,"enum":["success","actionRequired","pending","failed"],"example":"success"},"requestId":{"description":"Request id","type":"string","maxLength":255,"example":"85136c79cbf9fe36bb9"},"id":{"description":"Tokenization identifier","type":"string","maxLength":255,"example":"TO-MD1235-01GAKCXYD1Z79ND6QER8C9GHJ5"},"url":{"description":"Url to tokenization page","type":"string","maxLength":255,"example":"https://cards.tpay.com/pay"}},"type":"object"},"GetToken":{"required":["expirationDate","tokenStatus","cardTail","content"],"properties":{"expirationDate":{"description":"The expiration date of the token","type":"date","example":"2029-01-01"},"tokenStatus":{"description":"The status of the token","type":"enum","enum":["ACTIVE","DELETED","RESUME","SUSPENDED"]},"cardTail":{"description":"A masked card number containing the Bank Identification Number (BIN) \n        and the last four digits of the card","type":"string","maxLength":255,"example":"4895********2089"},"content":{"$ref":"#/components/schemas/GetTokenContent"}},"type":"object"},"GetCollectBankAccounts":{"required":["result","requestId","bankAccounts","page","limit","total"],"properties":{"result":{"type":"string","example":"success"},"requestId":{"type":"string","example":"85136c79cbf9fe36bb9"},"bankAccounts":{"type":"array","items":{"$ref":"#/components/schemas/BankAccount2"}},"page":{"description":"Page number.","type":"integer","example":"1"},"limit":{"description":"Limit of records.","type":"integer","example":"100"},"total":{"description":"Quantity of records.","type":"integer","example":"200"}},"type":"object"},"CreateBankAccount":{"required":["accountNumber","ownerName","additionalInformation"],"properties":{"accountNumber":{"description":"Polish IBAN","type":"string","maxLength":28,"minLength":28,"example":"PL62110452192571236829509877"},"ownerName":{"type":"string","maxLength":1000,"example":"Jan Kowalski"},"additionalInformation":{"type":"string","maxLength":1000,"example":"ul. Libelta 8/2, 01-042 Warszawa"}},"type":"object"},"BankAccountCreated":{"required":["result","requestId","id","accountNumber","ownerName","additionalInformation","status","createdAt"],"properties":{"result":{"type":"string","example":"success"},"requestId":{"description":"Request id","type":"string","maxLength":255,"example":"85132c79cbf9fe36bb9"},"id":{"description":"The value is represented by ULID encoded to base32 format","type":"string","example":"01K1FVKKY38KTYPZE7RGT5WTPJ"},"accountNumber":{"description":"Polish IBAN","type":"string","example":"PL61109010140000071219812874"},"ownerName":{"type":"string","example":"Jan Kowalski"},"additionalInformation":{"type":"string","example":"ul. Libelta 8/2, 01-042 Warszawa"},"status":{"type":"string","enum":["active","deactivated"],"example":"active"},"createdAt":{"type":"string","pattern":"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}","example":"2025-07-31 11:04:29"}},"type":"object"},"Phone":{"required":["phoneNumber","phoneCountry"],"properties":{"phoneNumber":{"description":"Phone number","type":"string","maxLength":15,"example":"00123456"},"phoneCountry":{"description":"Country code in ISO 3166-1 alfa-2","type":"string","maxLength":2,"minLength":2,"example":"PL"}},"type":"object"},"Website":{"required":["description","url","name","friendlyName"],"properties":{"description":{"type":"string","maxLength":255},"url":{"type":"string","maxLength":255},"name":{"type":"string","maxLength":255},"friendlyName":{"type":"string","maxLength":255}},"type":"object"},"Address":{"required":["name","friendlyName","street","houseNumber","roomNumber","postalCode","city","country","phone","isMain","isCorrespondence","isInvoice"],"properties":{"name":{"type":"string","maxLength":255},"friendlyName":{"type":"string","maxLength":255},"street":{"type":"string","maxLength":255},"houseNumber":{"type":"string","maxLength":255},"roomNumber":{"type":"string","maxLength":255},"postalCode":{"type":"string","maxLength":255},"city":{"type":"string","maxLength":255},"country":{"type":"string","maxLength":255},"phone":{"type":"string","maxLength":255},"isMain":{"type":"boolean"},"isCorrespondence":{"type":"boolean"},"isInvoice":{"type":"boolean"}},"type":"object"},"Person":{"required":["name","surname","nationality","sharesPct","pesel","isBeneficiary","isRepresentative","isContactPerson","isAuthorizedPerson","pepStatement","dateOfBirth","countryOfBirth","typeOfDocument","serialNumber","expiryDate","issuingAuthority","contact"],"properties":{"name":{"type":"string","maxLength":255},"surname":{"type":"string","maxLength":255},"nationality":{"type":"string","maxLength":255},"sharesPct":{"type":"number"},"pesel":{"type":"string","maxLength":255},"isBeneficiary":{"type":"boolean"},"isRepresentative":{"type":"boolean"},"isContactPerson":{"type":"boolean"},"isAuthorizedPerson":{"type":"boolean"},"pepStatement":{"type":"integer"},"dateOfBirth":{"type":"string|null","example":"1980-01-01 00:00:00"},"countryOfBirth":{"type":"string","maxLength":255},"typeOfDocument":{"type":"integer"},"serialNumber":{"type":"string","maxLength":255},"expiryDate":{"type":"string|null","example":"2022-01-01 00:00:00"},"issuingAuthority":{"type":"string","maxLength":255},"contact":{"$ref":"#/components/schemas/PersonContact"}},"type":"object"},"BankAccount":{"required":["accountNo","bankName","ownerName","ownerAddress","countryCode"],"properties":{"accountNo":{"type":"string","maxLength":26,"minLength":26,"example":"06124024671382187970629886"},"bankName":{"type":"string","maxLength":64},"ownerName":{"type":"string","maxLength":128,"example":"Jan Kowalski"},"ownerAddress":{"type":"string","maxLength":128,"example":"Skarbiec G\u00f3rny, Ul. P\u0142atnicza 69"},"currency":{"description":"Currency code in ISO-4217","type":"string","default":"PLN","enum":["PLN","GPB","USD","EUR","CZK","NOK","DKK","SEK","CHF"]},"countryCode":{"description":"Country code in ISO 3166-1 alfa-2","type":"string","maxLength":2,"minLength":2,"example":"PL"},"accountType":{"title":"phpcs:disable.","description":"1 - polish (we only accept PLN currency), 2 - SEPA (we only accept EUR currency), 3 - foreign (we accept PLN, EUR, USD, GBP currencies)","type":"int","default":1,"enum":[1,2,3]}},"type":"object"},"Website2":{"required":["posId","accountId","date","settings","description","url","name","friendlyName"],"properties":{"posId":{"type":"string","maxLength":255},"accountId":{"type":"string","maxLength":255},"date":{"$ref":"#/components/schemas/Date"},"settings":{"$ref":"#/components/schemas/Settings"},"description":{"type":"string","maxLength":255},"url":{"type":"string","maxLength":255},"name":{"type":"string","maxLength":255},"friendlyName":{"type":"string","maxLength":255}},"type":"object"},"Address2":{"required":["addressId","name","friendlyName","street","houseNumber","roomNumber","postalCode","city","country","phone","isMain","isCorrespondence","isInvoice"],"properties":{"addressId":{"type":"string","maxLength":255},"name":{"type":"string","maxLength":255},"friendlyName":{"type":"string","maxLength":255},"street":{"type":"string","maxLength":255},"houseNumber":{"type":"string","maxLength":255},"roomNumber":{"type":"string","maxLength":255},"postalCode":{"type":"string","maxLength":255},"city":{"type":"string","maxLength":255},"country":{"type":"string","maxLength":255},"phone":{"type":"string","maxLength":255},"isMain":{"type":"boolean"},"isCorrespondence":{"type":"boolean"},"isInvoice":{"type":"boolean"}},"type":"object"},"Person2":{"required":["personId","name","surname","nationality","sharesPct","pesel","isBeneficiary","isRepresentative","isContactPerson","isAuthorizedPerson","pepStatement","dateOfBirth","countryOfBirth","typeOfDocument","serialNumber","expiryDate","issuingAuthority","contact"],"properties":{"personId":{"type":"string","maxLength":255},"name":{"type":"string","maxLength":255},"surname":{"type":"string","maxLength":255},"nationality":{"type":"string","maxLength":255},"sharesPct":{"type":"number"},"pesel":{"type":"string","maxLength":255},"isBeneficiary":{"type":"boolean"},"isRepresentative":{"type":"boolean"},"isContactPerson":{"type":"boolean"},"isAuthorizedPerson":{"type":"boolean"},"pepStatement":{"type":"integer"},"dateOfBirth":{"type":"string|null","example":"1980-01-01 00:00:00"},"countryOfBirth":{"type":"string","maxLength":255},"typeOfDocument":{"type":"integer"},"serialNumber":{"type":"string","maxLength":255},"expiryDate":{"type":"string|null","example":"2022-01-01 00:00:00"},"issuingAuthority":{"type":"string","maxLength":255},"contact":{"$ref":"#/components/schemas/PersonContact"}},"type":"object"},"ApiCredential":{"required":["clientId","clientSecret"],"properties":{"clientId":{"type":"string","maxLength":255},"clientSecret":{"type":"string","maxLength":255}},"type":"object"},"TransactionApiCredential":{"required":["merchantId","apiKey","apiPassword"],"properties":{"merchantId":{"type":"string","maxLength":255},"apiKey":{"type":"string","maxLength":255},"apiPassword":{"type":"string","maxLength":255}},"type":"object"},"Category":{"required":["id","name"],"properties":{"id":{"type":"integer"},"name":{"type":"string","maxLength":255}},"type":"object"},"LegalForm":{"required":["id","name"],"properties":{"id":{"type":"integer"},"name":{"type":"string","maxLength":255}},"type":"object"},"Mcc":{"required":["id","name","code"],"properties":{"id":{"type":"integer"},"name":{"type":"string","maxLength":255},"code":{"type":"string","maxLength":6}},"type":"object"},"Document":{"required":["id","name"],"properties":{"id":{"type":"integer"},"name":{"type":"string","maxLength":255}},"type":"object"},"Address3":{"required":["name","street","houseNumber","flatNumber","postalCode","city","country","phone","isMain","isCorrespondence","isInvoice"],"properties":{"name":{"type":"string","maxLength":255},"street":{"type":"string","maxLength":255},"houseNumber":{"type":"string","maxLength":255},"flatNumber":{"type":"string","maxLength":255},"postalCode":{"type":"string","maxLength":255},"city":{"type":"string","maxLength":255},"country":{"type":"string","maxLength":255},"phone":{"type":"string","maxLength":255},"isMain":{"type":"boolean"},"isCorrespondence":{"type":"boolean"},"isInvoice":{"type":"boolean"}},"type":"object"},"Website3":{"required":["url","name"],"properties":{"url":{"type":"string","maxLength":255},"name":{"type":"string","maxLength":255}},"type":"object"},"Person3":{"required":["name","surname","phone","email"],"properties":{"name":{"type":"string","maxLength":255},"surname":{"type":"string","maxLength":255},"phone":{"type":"string","maxLength":255},"email":{"type":"string","maxLength":255}},"type":"object"},"Website4":{"required":["posId","accountId","friendlyName","description","url","name"],"properties":{"posId":{"type":"string","maxLength":255},"accountId":{"type":"string","maxLength":255},"friendlyName":{"type":"string","maxLength":255},"description":{"type":"string","maxLength":255},"url":{"type":"string","maxLength":255},"name":{"type":"string","maxLength":255}},"type":"object"},"Address4":{"required":["addressId","name","street","houseNumber","flatNumber","postalCode","city","country","phone","isMain","isCorrespondence","isInvoice"],"properties":{"addressId":{"type":"string","maxLength":255},"name":{"type":"string","maxLength":255},"street":{"type":"string","maxLength":255},"houseNumber":{"type":"string","maxLength":255},"flatNumber":{"type":"string","maxLength":255},"postalCode":{"type":"string","maxLength":255},"city":{"type":"string","maxLength":255},"country":{"type":"string","maxLength":255},"phone":{"type":"string","maxLength":255},"isMain":{"type":"boolean"},"isCorrespondence":{"type":"boolean"},"isInvoice":{"type":"boolean"}},"type":"object"},"Person4":{"required":["personId","name","surname","isBeneficiary","isRepresentative","isContactPerson","isAuthorizedPerson","contact"],"properties":{"personId":{"type":"string","maxLength":255},"name":{"type":"string","maxLength":255},"surname":{"type":"string","maxLength":255},"isBeneficiary":{"type":"boolean"},"isRepresentative":{"type":"boolean"},"isContactPerson":{"type":"boolean"},"isAuthorizedPerson":{"type":"boolean"},"contact":{"type":"array","items":{"$ref":"#/components/schemas/PersonContact"}}},"type":"object"},"ApiCredential2":{"required":["clientId","clientSecret"],"properties":{"clientId":{"type":"string","maxLength":255},"clientSecret":{"type":"string","maxLength":255}},"type":"object"},"TransactionApiCredential2":{"required":["merchantId","apiKey","apiPassword"],"properties":{"merchantId":{"type":"string","maxLength":255},"apiKey":{"type":"string","maxLength":255},"apiPassword":{"type":"string","maxLength":255}},"type":"object"},"Pay2":{"required":["blikPaymentData"],"properties":{"blikPaymentData":{"$ref":"#/components/schemas/BlikPaymentData2"}},"type":"object"},"AliasDetails":{"required":["aliasType","aliasValue","isActive","expiresAt","events","label"],"properties":{"aliasType":{"description":"Alias type","type":"string","example":"PAYID"},"aliasValue":{"description":"Alias value","type":"string","example":"d46e0ae2-4d97-445e-a1a0-b975cc7213e4"},"isActive":{"description":"Is alias active","type":"boolean"},"expiresAt":{"description":"Alias expiration date","type":"string","format":"date-time","example":"2028-01-01T00:00:00+00:00"},"events":{"type":"array","items":{"$ref":"#/components/schemas/AliasEventDetails"}},"label":{"description":"Alias label","type":"string","example":"My bank XYZ"}},"type":"object"},"TokenInfoDetails":{"required":["access_token","client_id","expires","scope"],"properties":{"access_token":{"type":"string"},"client_id":{"type":"string"},"expires":{"type":"int","example":"1684763050"},"scope":{"type":"string"}},"type":"object"},"Error":{"required":["errorCode","errorMessage","fieldName","devMessage"],"properties":{"errorCode":{"type":"string"},"errorMessage":{"type":"string"},"fieldName":{"type":"string"},"devMessage":{"type":"string"},"docUrl":{"type":"string","default":"https://openapi.tpay.com"}},"type":"object"},"Pos":{"required":["id"],"properties":{"id":{"description":"Point Of Sale - this must be an active, verified POS added to requester account. The value is represented by ULID encoded to base32 format. To check your POS ID call the /accounts/pos API endpoint","type":"string","example":"01G6WAS5MNGQ2X728AW53D8JPR"}},"type":"object"},"BillingAddress":{"required":["email","name"],"properties":{"email":{"description":"Payer email","type":"string","example":"noreply@tpay.com"},"name":{"description":"Payer full name","type":"string","maxLength":96,"minLength":1},"phone":{"description":"Payer phone number","type":"string","nullable":true},"street":{"description":"Payer street","type":"string","nullable":true},"postalCode":{"description":"Payer postal code","type":"string","nullable":true},"city":{"description":"Payer city","type":"string","nullable":true},"country":{"description":"Payer country in ISO 3166 format","type":"string","example":"PL","nullable":true},"houseNo":{"description":"Payer address house no","type":"string","nullable":true},"flatNo":{"description":"Payer address flat no","type":"string","nullable":true}},"type":"object"},"ChildTransaction":{"required":["amount","description","merchant","products"],"properties":{"amount":{"description":"Value in pennies ie. 123.45PLN should be passed as int: 12345. \n        The sum of child transactions equals the total transaction value. Minimum one child transaction is required.","type":"integer","minimum":0,"exclusiveMinimum":true},"description":{"type":"string"},"hiddenDescription":{"description":"An optional custom value from merchant system.","type":"string","nullable":true},"merchant":{"$ref":"#/components/schemas/Merchant2"},"products":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}},"type":"object"},"TransactionCallback":{"required":["type","value"],"properties":{"type":{"description":"1: Payer redirect url in success case, 2: Payer redirect url in error case, 3: POST notification url after successful payment, 4: Merchant notification email","type":"int","enum":[1,2,3,4]},"value":{"type":"string","example":"https://domain.com/transactionCallback"}},"type":"object"},"ChildTransactionResponse":{"required":["id","amount","description","merchant","refunds"],"properties":{"id":{"type":"string","example":"01JABM26M0EX41CKJ4A6MCNZ59"},"amount":{"description":"Value in pennies ie. 123.45PLN should be passed as int: 12345. The sum of child transactions \n                      equals the total transaction value. Minimum one child transaction is required.","type":"integer","example":"12345"},"description":{"type":"string"},"hiddenDescription":{"type":"string","nullable":true},"merchant":{"$ref":"#/components/schemas/Merchant2"},"refunds":{"type":"array","items":{"$ref":"#/components/schemas/ChildRefundResponse"}}},"type":"object"},"PaymentsWithAttempts":{"properties":{"attempts":{"type":"array","items":{"$ref":"#/components/schemas/Attempt"},"default":[]}},"type":"object"},"BadRequestErrors":{"required":["errorCode","errorMessage","fieldName","devMessage","docUrl"],"properties":{"errorCode":{"type":"string","example":"invalid_pos_id"},"errorMessage":{"type":"string","example":"POS ID does not match a required format (e.g. ps_6UvbBjehvHXA7vfD)"},"fieldName":{"type":"string","example":"posId"},"devMessage":{"type":"string","example":"Provided POS id does not satisfy regexp /ps_[a-zA-Z0-9]{16}/"},"docUrl":{"type":"string","example":"https://support.tpay.com/en/case-study/implementing-payment-gateway"}},"type":"object"},"BankGroup":{"required":["id","name","img","mainChannel","availablePaymentChannels"],"properties":{"id":{"type":"string","example":"12"},"name":{"type":"string","example":"Bank 1"},"img":{"type":"string","example":"https://example.org/img/1.jpg"},"mainChannel":{"type":"string","example":"10"},"availablePaymentChannels":{"type":"array","items":{"type":"string"},"example":["10","20"]}},"type":"object"},"BlikPaymentData":{"properties":{"blikToken":{"description":"6 digit code generated in customer bank mobile app (required if customer does not have\n            registered alias or when customer does not want to pay by registered device).","type":"string","maxLength":6,"minLength":6,"example":"123456","nullable":true},"aliases":{"nullable":true,"oneOf":[{"$ref":"#/components/schemas/Aliases"}]},"type":{"description":"Transaction type. List of available options:\u003Cbr/\u003E\n            0 - WEB mode\u003Cbr/\u003E\n            1 - POS mode dedicated for payment terminals\u003Cbr/\u003E\n            2 - Autopayment with only an alias, you need to register one first, see aliases field.\u003Cbr/\u003E","type":"integer","default":0,"enum":[0,1,2],"nullable":true},"refuseNoPayId":{"description":"Request transaction to be refused if bank doesn't support recurring payments","type":"boolean","nullable":true}},"type":"object"},"CardPaymentData":{"properties":{"card":{"description":"Encrypted card data","type":"string","example":"VEJUfiiBqj8huhZfi84UWBHFwyVJCeanbF6zJDtWwoW9ugQB+x7MzESIgic1Bw7YBW1Yc1i49UeR+IhmXsFQiWh6aS35KyG1q\n2RrVN+NWYJDQEvvDpISyYdCghFjjLCXL2Fkp5KeLfUTWkKOMeisr/b3/Gbup37XA7DTYX8gn4Es/KO0PdiI/brO+S5+YrX4/UcQOT+eosL7r7rSSJfe8KaT\n8GywyoaWl8S41Cw1B41ddkGKvDOSIbbatALi3TdjJrHe7SkVmYSZNbkb9ri1RBw9ceX2QVGeO4CKKido29ySgWm64Gqfk4pgGBFqqUc8/ThwCI3n+FCmtWx\nntCovtw==","nullable":true},"token":{"description":"Card token","type":"string","maxLength":64,"example":"t59c2810d59285e3e0ee9d1f1eda1c2f4c554e24","nullable":true},"save":{"description":"Defines if card data must be saved for future use.","type":"integer","example":1,"nullable":true},"rocText":{"description":"Custom identificator for settlement. This value must be alphanumeric.","type":"string","maxLength":12,"pattern":"[A-Za-z0-9\u00c0-\u017e]+","example":"abc123","nullable":true}},"type":"object"},"Payer":{"required":["payerId","email","name","phone","address","postalCode","city","country"],"properties":{"payerId":{"description":"Payer Id","type":"string","readOnly":true,"example":"py_6UvbBjehvHXA7vfD"},"email":{"description":"Email","type":"string","pattern":"^[a-zA-Z0-9\\.\\-_\\+]+\\@[a-zA-Z0-9]+[a-zA-Z0-9\\.\\-_]*\\.[a-zA-Z]+$","example":"jan.kowalski@example.com"},"name":{"description":"Full name and surname","type":"string","maxLength":255,"minLength":3,"example":"Jan Kowalski"},"phone":{"description":"Phone number","type":"string","minLength":3,"example":"00123456"},"address":{"description":"Payer billing address","type":"string","maxLength":255,"minLength":3,"example":"ul. Przyk\u0142adowa 44b/2"},"postalCode":{"description":"Postal code or zip code","type":"string","maxLength":10,"minLength":3,"example":"00-001"},"city":{"description":"Full city name","type":"string","maxLength":64,"minLength":3,"example":"Warszawa"},"country":{"description":"Country code in ISO 3166-1 alfa-2","type":"string","maxLength":2,"minLength":2,"example":"PL"},"taxId":{"description":"Payer tax identification number","type":"string","maxLength":255,"minLength":3,"example":"PL3774716081","nullable":true}},"type":"object"},"Payments":{"required":["status","method","amountPaid","date","errors"],"properties":{"status":{"type":"string","enum":["correct","pending","declined"],"example":"correct"},"method":{"type":"string","enum":["pay_by_link","transfer","sale"],"example":"pay_by_link"},"amountPaid":{"type":"numeric","example":12.34},"date":{"$ref":"#/components/schemas/PaymentDates"},"errors":{"$ref":"#/components/schemas/PaymentErrors"}},"type":"object"},"TransactionDates":{"required":["creation"],"properties":{"creation":{"description":"Transaction creation time","type":"string","pattern":"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}","example":"2019-06-28 15:35:40"},"realization":{"description":"Time of booking transaction","type":"string","pattern":"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}","example":"2019-06-28 15:40:00","nullable":true}},"type":"object"},"ChildTransaction2":{"required":["id","merchantId","amount","products"],"properties":{"id":{"description":"Child transaction id (either this or merchant id must be provided)","type":"string","example":"01JCG7DVFRCE56JWXA58NH0MJG"},"merchantId":{"description":"Child transaction Merchant Id (either this or child transaction id must be provided)","type":"string","example":"01G6QRHEBPFAECEWRWVEEPM9WY"},"amount":{"description":"Value in pennies","type":"integer","minimum":0,"exclusiveMinimum":true},"products":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}},"type":"object"},"Payer2":{"required":["email","name"],"properties":{"email":{"description":"Email","type":"string","pattern":"^[a-zA-Z0-9\\.\\-_\\+]+\\@[a-zA-Z0-9]+[a-zA-Z0-9\\.\\-_]*\\.[a-zA-Z]+$","example":"jan.kowalski@example.com"},"name":{"description":"Full name and surname","type":"string","maxLength":255,"minLength":3,"example":"Jan Kowalski"},"phone":{"description":"Phone number","type":"string","minLength":3,"example":"00123456","nullable":true},"address":{"description":"Payer billing address","type":"string","maxLength":255,"minLength":3,"example":"ul. Przyk\u0142adowa 44b/2","nullable":true},"code":{"description":"Postal code or zip code","type":"string","maxLength":10,"minLength":3,"example":"00-001","nullable":true},"city":{"description":"Full city name","type":"string","maxLength":64,"minLength":3,"example":"Warszawa","nullable":true},"country":{"description":"Country code in ISO 3166-1 alfa-2","type":"string","maxLength":2,"minLength":2,"example":"PL","nullable":true},"taxId":{"description":"Payer tax identification number","type":"string","maxLength":255,"minLength":3,"example":"PL3774716081","nullable":true},"ip":{"description":"Payer IP","type":"string","maxLength":45,"minLength":7,"example":"127.0.0.1","nullable":true},"userAgent":{"description":"Payer User Agent","type":"string","maxLength":255,"minLength":1,"example":"Mozilla/5.0 (X11; Linux x86_64) Chrome/135.0.0.0 Safari/537.36","nullable":true},"skipSendingEmails":{"description":"Switch sending emails to payer on create and book transaction.","type":"boolean","default":false,"example":false,"nullable":true}},"type":"object"},"Callbacks":{"required":["payerUrls","notification"],"properties":{"payerUrls":{"$ref":"#/components/schemas/PayerUrls"},"notification":{"$ref":"#/components/schemas/Notification"}},"type":"object"},"TokenPaymentData":{"required":["tokenValue","cardExpiryDate","initialTransactionId","cardBrand"],"properties":{"tokenValue":{"description":"Length should be one of 12-19 for EISOP.","type":"string","maxLength":19,"minLength":12,"example":"t59c2810d59285e3e0d"},"cardExpiryDate":{"description":"Card expiry date in YYMM format","type":"string","example":"2808"},"initialTransactionId":{"description":"Id of the initial transaction. This value corresponds to Elavon's Card Scheme Data","type":"string","maxLength":22,"example":"1234567891B345678912"},"cardBrand":{"description":"Brand of the tokenized card","type":"string","example":"VI"},"rocText":{"description":"Custom identificator for settlement. This value must be alphanumeric.","type":"string","maxLength":12,"pattern":"[A-Za-z0-9\u00c0-\u017e]+","example":"abc123","nullable":true}},"type":"object"},"Lock":{"properties":{"type":{"description":"Type of transaction lock","type":"string","enum":["Balance","Chargeback","Transaction"],"example":"Balance","nullable":true},"status":{"description":"Lock status","type":"string","enum":["Active","Removed","Executed"],"example":"Active","nullable":true},"amount":{"description":"Amount","type":"numeric","example":200.15,"nullable":true},"amountCollected":{"description":"Amount","type":"numeric","example":200.15,"nullable":true}},"type":"object"},"GetRefundTransaction":{"required":["refundId","status","amount","currency","date"],"properties":{"refundId":{"type":"string","example":"rf_6UvbBjehvHXA7vfD"},"status":{"description":"\n        Available refund status for 'transactional' context\n\n        * new - fresh refund\n        * pending - awaiting refund to process\n        * to_complete - refund is awaiting for payer data completion (missing bank account)\n        * cancel - aborted refund, will not be porcessed\n        * hold - refund temporary aborted, will be processed after verification process\n        * processed - refund processed, but not done (awaiting for send to payer)\n        * done - refund done, money has ben sent\n        \n        Available refund status for 'card' context\n\n        * new - fresh refund\n        * declined - refund declined by acquirer\n        * authorized - refund done\n        ","type":"string","example":"pending"},"amount":{"description":"Amount","type":"numeric","example":200.15},"currency":{"description":"Currency code in ISO-4217.","type":"string","enum":["PLN","GPB","USD","EUR","CZK","NOK","DKK","SEK","CHF"],"example":"PLN"},"date":{"$ref":"#/components/schemas/GetRefundDate"}},"type":"object"},"RefundNoAccount":{"required":["refundId","amount","currency","date"],"properties":{"refundId":{"type":"string","example":"rf_6UvbBjehvHXA7vfD"},"amount":{"description":"Amount","type":"numeric","example":200.15},"currency":{"description":"Currency code in ISO-4217.","type":"string","enum":["PLN","GPB","USD","EUR","CZK","NOK","DKK","SEK","CHF"],"example":"PLN"},"date":{"$ref":"#/components/schemas/GetRefundDateNoAccount"}},"type":"object"},"RefundCards":{"required":["refundId","amount","currency","date"],"properties":{"refundId":{"type":"string","example":"rf_6UvbBjehvHXA7vfD"},"amount":{"description":"Amount","type":"numeric","example":200.15},"currency":{"description":"Currency code in ISO-4217.","type":"string","enum":["PLN","GPB","USD","EUR","CZK","NOK","DKK","SEK","CHF"],"example":"PLN"},"date":{"$ref":"#/components/schemas/GetRefundDateCards"}},"type":"object"},"BankGroup2":{"required":["id","name","img","availablePaymentChannels","mainChannel"],"properties":{"id":{"description":"Bank group ID","type":"string","example":"12"},"name":{"description":"Bank group name","type":"string","example":"Bank Pekao SA"},"img":{"description":"Image url for given group","type":"string","example":"https://example.org/img/1.jpg"},"availablePaymentChannels":{"description":"List of channels IDs for future use","type":"string","example":"List [ \"4\", \"47\", \"55\", \"64\", \"60\", \"29\" ]"},"mainChannel":{"description":"Main channel ID for future use","type":"string","example":"4"}},"type":"object"},"Channel":{"required":["id","name","fullName","image","available","onlinePayment","instantRedirection","groups","constraints"],"properties":{"id":{"type":"string","example":"1"},"name":{"type":"string","example":"Channel name"},"fullName":{"type":"string","example":"Channel full name"},"image":{"$ref":"#/components/schemas/Image"},"available":{"type":"bool","example":true},"onlinePayment":{"type":"bool","example":true},"instantRedirection":{"type":"bool","example":true},"groups":{"description":"Groups data.","type":"array","items":{"$ref":"#/components/schemas/ChannelGroup"}},"constraints":{"description":"Constraints data.","type":"array","items":{"$ref":"#/components/schemas/ChannelConstraint"}}},"type":"object"},"Error2":{"properties":{"errorCode":{"type":"string","default":"internal_server_error","maxLength":255},"errorMessage":{"type":"string","default":"Internal Server Error","maxLength":255},"fieldName":{"type":"string","default":"","maxLength":255},"devMessage":{"type":"string","default":"","maxLength":255},"docUrl":{"type":"string","default":"","maxLength":255}},"type":"object"},"GetRefundTransactions":{"required":["list"],"properties":{"list":{"type":"array","items":{"$ref":"#/components/schemas/GetRefundTransaction"}}},"type":"object"},"BadRequestError":{"required":["errorCode","errorMessage","fieldName","devMessage","docUrl"],"properties":{"errorCode":{"description":"Error code represents specific error id.","type":"string","example":"not_found_refund"},"errorMessage":{"description":"End user error message.","type":"string","example":"Selected refund could not be found. Ensure that it wasn't removed."},"fieldName":{"description":"Information about invalid field.","type":"string","example":"string"},"devMessage":{"description":"Information on how developers can solve the issue.","type":"string","example":"Refund couldn't be found. It might not exist, belong to a different Merchant or has been removed."},"docUrl":{"description":"URL to the information about the error code reported.","type":"string","example":"https://support.tpay.com/en/case-study/implementing-payment-gateway"}},"type":"object"},"RefundContent":{"required":["status","refundId","currencyCode","amount","extra"],"properties":{"status":{"description":"Status of refund.","type":"string","example":"correct"},"refundId":{"description":"ID of a Refund.","type":"string","example":"rf_6UvbBjehvHXA7vfD"},"currencyCode":{"description":"Currency code of refund","type":"integer","example":985},"amount":{"description":"Amount","type":"numeric","example":200.15},"extra":{"$ref":"#/components/schemas/RefundContentExtra"}},"type":"object"},"GetRefundDate":{"required":["schedule"],"properties":{"schedule":{"description":"Date when refund where scheduled.","type":"string","pattern":"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}","example":"2019.06.28 15:35:40"},"processed":{"description":"Date when refund where complete.","type":"string","pattern":"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}","example":"2019.06.28 15:35:40","nullable":true}},"type":"object"},"Payer3":{"required":["name","email"],"properties":{"name":{"description":"Card's owner full name","type":"string","example":"Jan Kowalski"},"email":{"description":"Card's owner e-mail","type":"string","example":""}},"type":"object"},"RedirectUrl":{"required":["success","error"],"properties":{"success":{"description":"Url used to redirect payer after successful tokenization process","type":"string","example":"https://przykladowezakupy.pl/success"},"error":{"description":"Url used to redirect payer after unsuccessful tokenization process","type":"string","example":"https://przykladowezakupy.pl/error"}},"type":"object"},"GetTokenContent":{"required":["imageUrl"],"properties":{"imageUrl":{"description":"URL of the card image","type":"string","example":"https://tpay.com/user/themes/tpay-trusted-payments/assets/footer/tpay-brand-logo-short.png"}},"type":"object"},"BankAccount2":{"required":["id","accountNumber","ownerName","additionalInformation","status","createdAt"],"properties":{"id":{"description":"The value is represented by ULID encoded to base32 format","type":"string","example":"01K1FVKKY38KTYPZE7RGT5WTPJ"},"accountNumber":{"description":"Polish IBAN","type":"string","example":"PL61109010140000071219812874"},"ownerName":{"type":"string","example":"Jan Kowalski"},"additionalInformation":{"type":"string","example":"ul. Libelta 8/2, 01-042 Warszawa"},"status":{"type":"string","enum":["active","deactivated"],"example":"active"},"createdAt":{"type":"string","pattern":"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}","example":"2025-07-31 11:04:29"}},"type":"object"},"PersonContact":{"required":["contact"],"properties":{"contact":{"type":"string","maxLength":255},"type":{"type":"integer","default":1,"example":"1"}},"type":"object"},"Date":{"required":["create","modification"],"properties":{"create":{"type":"string","maxLength":255},"modification":{"type":"string","maxLength":255}},"type":"object"},"Settings":{"required":["confirmationCode","isTestMode"],"properties":{"confirmationCode":{"type":"string","maxLength":255},"isTestMode":{"type":"string","maxLength":255}},"type":"object"},"BlikPaymentData2":{"properties":{"blikToken":{"description":"6 digit code generated in customer bank mobile app (required if customer does not have\n            registered alias or when customer does not want to pay by registered device).","type":"string","maxLength":6,"minLength":6,"example":"123456","nullable":true},"aliases":{"nullable":true,"oneOf":[{"$ref":"#/components/schemas/Aliases2"}]},"type":{"description":"Transaction type. List of available options:\u003Cbr/\u003E\n            0 - WEB mode\u003Cbr/\u003E\n            1 - POS mode dedicated for payment terminals\u003Cbr/\u003E\n            2 - Autopayment with only an alias, you need to register one first, see aliases field.\u003Cbr/\u003E","type":"integer","default":0,"enum":[0,1,2],"nullable":true}},"type":"object"},"AliasEventDetails":{"required":["type","date"],"properties":{"type":{"description":"Event type","type":"string","example":"ALIAS_REGISTER"},"date":{"description":"Event date","type":"string","example":"2025-01-01T00:00:00+00:00"}},"type":"object"},"Merchant2":{"required":["id"],"properties":{"id":{"description":"One of the merchant Ids taking part in the main transaction represented by ULID encoded in base32","type":"string","example":"01G6WAPZFNNX4CXBPKQH5MYD4R"}},"type":"object"},"Product":{"required":["externalId","quantity","unitPrice"],"properties":{"name":{"description":"Name of the product for easy differentiation by humans","type":"string","maxLength":255,"example":"A really handy thingamajig","nullable":true},"externalId":{"description":"Identifier of the product for easy differentiation by computers, eg. SKU","type":"string","example":"303.199.18"},"quantity":{"description":"Quantity expressed as a floating-point number or a numeric string","type":"number","format":"float","minimum":0,"exclusiveMinimum":true,"example":1.1},"unitPrice":{"description":"Value of 1 unit of quantity in pennies","type":"integer","minimum":0,"exclusiveMinimum":true}},"type":"object"},"ChildRefundResponse":{"required":["title","amount","date"],"properties":{"title":{"type":"string","example":"REF-XYZ"},"amount":{"description":"Value in pennies ie. 123.45PLN should be passed as int: 12345. The sum of child transactions \n                      equals the total transaction value. Minimum one child transaction is required.","type":"integer","example":"12345"},"date":{"type":"string","example":"2024-10-16 23:34:39.000000"}},"type":"object"},"Attempt":{"required":["date"],"properties":{"date":{"description":"Time of payment attempt","type":"string","example":"2025-08-12 16:06:34"},"paymentErrorCode":{"description":"Error code if any occurred. Null if payment was successful.\u003Cbr/\u003E\n        \"63\" - Wrong BLIK code.\u003Cbr/\u003E\n        \"100\" - Unclassified error.\u003Cbr/\u003E\n        \"101\" - Rejected by the payer.\u003Cbr/\u003E\n        \"102\" - Transaction rejected by the issuer.\u003Cbr/\u003E\n        \"103\" - Insufficient funds.\u003Cbr/\u003E\n        \"104\" - Issuer or payer timeout.\u003Cbr/\u003E\n        \"105\" - Transaction requires handling of the PAYID alias.\u003Cbr/\u003E\n        \"106\" - Payer limit exceeded.\u003Cbr/\u003E\n        \"107\" - Rejected for security reasons.\u003Cbr/\u003E","type":"string","enum":["63","100","101","102","103","104","105","106","107"],"example":"101","nullable":true}},"type":"object"},"Aliases":{"required":["value","type","label"],"properties":{"value":{"description":"Alias generated in merchant system (unique for each customer)","type":"string","example":"TPAY_ALIAS_1"},"type":{"description":"Alias type","type":"string","enum":["UID","PAYID"],"example":"PAYID"},"label":{"description":"How the alias will be shown in the payer's banking app","type":"string","example":"YourGroceryShop, the best shop for your grocery needs"},"key":{"description":"Alias key (returned by api call with error ERR82) in case of using non-unique alias.","type":"string","example":"1","nullable":true},"autopayment":{"description":"For PAYID aliases, a specification of how alias will be used - dates, amounts, frequency","nullable":true,"oneOf":[{"$ref":"#/components/schemas/Autopayment"}]},"noDelay":{"description":"Skip 72h period during which bank attempts to \n            inform the user about the reason for the lack of authorization. Available for Model A and O.","type":"boolean","nullable":true}},"type":"object"},"PaymentDates":{"properties":{"realization":{"description":"Time of booking transaction","type":"string","pattern":"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}","example":"2019-06-28 15:40:00","nullable":true}},"type":"object"},"PaymentErrors":{"required":["errorCode","errorMessage"],"properties":{"errorCode":{"type":"string","example":"payment_failed"},"errorMessage":{"type":"string","example":"Podany kod jest nieprawid\u0142owy, b\u0105d\u017a utraci\u0142 wa\u017cno\u015b\u0107"},"fieldName":{"type":"string","example":"string","nullable":true}},"type":"object"},"PayerUrls":{"properties":{"success":{"description":"Address to redirect used when payment was successful.","type":"string","maxLength":255,"example":"https://test.tpay.com/payment_success","nullable":true},"error":{"description":"Address to redirect used when errors occurred during payment process.","type":"string","maxLength":255,"example":"https://test.tpay.com/payment_error","nullable":true}},"type":"object"},"Notification":{"properties":{"url":{"description":"Result url for POST system notification","type":"string","maxLength":255,"example":"https://test.tpay.com/callback","nullable":true},"email":{"description":"Merchant email addresses used to send notification when payment is finished.","type":"string","example":"jan.kowalski@example.com","nullable":true}},"type":"object"},"GetRefundDateNoAccount":{"required":["create"],"properties":{"create":{"description":"Date when refund where scheduled.","type":"string","pattern":"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}","example":"2019.06.28 15:35:40"}},"type":"object"},"GetRefundDateCards":{"required":["create"],"properties":{"create":{"description":"Date when refund where scheduled.","type":"string","pattern":"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}","example":"2019.06.28 15:35:40"},"refund":{"description":"Date when refund where complete.","type":"string","pattern":"\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}","example":"2019.06.28 15:35:40","nullable":true}},"type":"object"},"Image":{"required":["url"],"properties":{"url":{"type":"string","example":"https://secure.tpay.com/_/banks/b1.png"}},"type":"object"},"ChannelGroup":{"required":["id","name","image"],"properties":{"id":{"type":"string","example":"1"},"name":{"type":"string","example":"Group name"},"image":{"$ref":"#/components/schemas/Image"}},"type":"object"},"ChannelConstraint":{"required":["field","type","value"],"properties":{"field":{"type":"string","example":"amount"},"type":{"type":"string","example":"min"},"value":{"type":"string","example":"1.00"}},"type":"object"},"RefundContentExtra":{"required":["responseCode","responseDescription"],"properties":{"responseCode":{"description":"Elavon EISOP Response code","type":"string","example":"000"},"responseDescription":{"type":"string","example":"Approved"}},"type":"object"},"Aliases2":{"required":["value","type","label"],"properties":{"value":{"description":"Alias generated in merchant system (unique for each customer)","type":"string","example":"TPAY_ALIAS_1"},"type":{"description":"Alias type","type":"string","enum":["UID","PAYID"],"example":"PAYID"},"label":{"description":"How the alias will be shown in the payer's banking app","type":"string","example":"YourGroceryShop, the best shop for your grocery needs"},"autopayment":{"description":"For PAYID aliases, a specification of how alias will be used - dates, amounts, frequency","nullable":true,"oneOf":[{"$ref":"#/components/schemas/Autopayment2"}]}},"type":"object"},"Autopayment":{"required":["model","frequency","singleLimitAmount","totalLimitAmount","currency","initDate","expirationDate"],"properties":{"model":{"description":"Blik recursive payments model, A, M or O","type":"string","enum":["A","M","O"]},"frequency":{"description":"Model A: Frequency of payments in days, weeks, months or years","type":"string","pattern":"[1-9][0-9]?[0-9]?[DWMY]","example":"17D"},"singleLimitAmount":{"description":"Limit of a single payment's amount, in main unit of currency","type":"integer"},"totalLimitAmount":{"description":"Limit of total amount on all payments' made with this alias, in main unit of currency","type":"integer"},"currency":{"description":"Currency in which limits are given. Currently supported: PLN.","type":"string","enum":["PLN"]},"initDate":{"description":"The date on which the alias will first be used","type":"string","format":"date-time"},"expirationDate":{"description":"The date on which the alias will expire","type":"string","format":"date-time"}},"type":"object"},"Autopayment2":{"required":["model","frequency","singleLimitAmount","totalLimitAmount","currency","initDate","expirationDate"],"properties":{"model":{"description":"Blik recursive payments model, A, M or O","type":"string","enum":["A","M","O"]},"frequency":{"description":"Model A: Frequency of payments in days, weeks, months or years","type":"string","pattern":"[1-9][0-9]?[0-9]?[DWMY]","example":"17D"},"singleLimitAmount":{"description":"Limit of a single payment's amount, in main unit of currency","type":"integer"},"totalLimitAmount":{"description":"Limit of total amount on all payments' made with this alias, in main unit of currency","type":"integer"},"currency":{"description":"Currency in which limits are given. Currently supported: PLN.","type":"string","enum":["PLN"]},"initDate":{"description":"The date on which the alias will first be used","type":"string","format":"date-time"},"expirationDate":{"description":"The date on which the alias will expire","type":"string","format":"date-time"}},"type":"object"}},"securitySchemes":{"Bearer":{"type":"http","bearerFormat":"oAuth","scheme":"bearer"},"Basic":{"type":"http","scheme":"basic"}}},"tags":[{"name":"Authorization","description":"Oauth Authorization, treated as legacy auth method"},{"name":"Accounts","description":"Merchant boarding area, to extend this endpoints you have to sign NDA"},{"name":"Blik","description":"Endpoints to process Blik-specific additions, eg. aliases"},{"name":"Marketplace","description":"Endpoints designed to create, process and list multi-merchants transactions"},{"name":"Transactions","description":"Endpoints designed to create, process and list simple merchant transactions"},{"name":"Refunds","description":"Endpoints designed to create, process and list simple merchant refunds"},{"name":"Wallet","description":"The section describes all the endpoints related to the wallets."},{"name":"Tokenization","description":"Endpoints designed to create, process and list simple merchant tokens"},{"name":"Collect","description":"Endpoints designed to create and list bank accounts approved for collect transactions"}]}}</script>
    </head>
<body>
            <div id="swagger-ui"></div>
    
            <script src="https://cdn.jsdelivr.net/gh/nelmio/NelmioApiDocBundle/public/redocly/redoc.standalone.js"></script>
    
    <script src="https://cdn.jsdelivr.net/gh/nelmio/NelmioApiDocBundle/public/init-redocly-ui.js"></script>

            <script type="text/javascript">
            window.onload = () => {
                loadRedocly({});
            };
        </script>
    
    <div id="authentication">
        
    <p>
        Client should authorize before making any requests by obtaining a temporary access
        token.
        To get the access token call the <a href="#tag/Authorization/operation/post_api_login" style="font-family: monospace; color: black;">/oauth/auth</a> endpoint with your
        credentials.<br/>
        The token is valid until "<span style="font-family: monospace">expires_in</span>" time + current timestamp.<br/>
        Attach the token to every method header call i.e.</p>
    <p style="font-family: monospace">
        Authorization: Bearer 648f8f2127984a1ef33f4b55fadf0625fc465da9
    </p>
    <p>
        To test as a <b>Merchant</b>, generate your credentials in your <b>Sandbox account</b>.
        You can create an account here:<br/>
        <a href="https://register.sandbox.tpay.com">Register Sandbox Tpay</a><br/>
        To test as a <b>Partner</b>, generate your credentials in your <b>Sandbox account</b>.
        To get access to a Partner account in the Sandbox environment, please contact our
        Customer Support:<br/> <a href="/cdn-cgi/l/email-protection#1c75727a735c686c7d65327f7371"><span class="__cf_email__" data-cfemail="fa93949c95ba8e8a9b83d4999597">[email&#160;protected]</span></a>
    </p>

    </div>
    <div id="marketplace-notification">
            <p>
        After successful payment, the marketplace service will send
        asynchronous POST notification to the URL specified in transaction callbacks object.
        To receive the notification, provide the transactionCallbacks object with one
        transactionCallback
        type 3 and valid URL. See the <a href="#tag/Marketplace/operation/post_marketplace_transaction_create" style="font-family: monospace; color: black;">marketplace/v1/transaction/create</a>
        endpoint
        description.
    </p>
    <p>
        <b>POST Notifications are signed with JWS signature.</b> We use the RFC 7515: JSON Web Signature (JWS). The
        signature is available in the header <b>X-JWS-Signature</b>. The content of the notification <b>must be
            validated</b> on the basis of a publicly available certificates:
    </p>

    <ul>
        <li>Signature certificate <a href="https://secure.tpay.com/x509/notifications-jws.pem" target="_blank">https://secure.tpay.com/x509/notifications-jws.pem</a>
        </li>
        <li>Tpay CA root certificate <a href="https://secure.tpay.com/x509/tpay-jws-root.pem" target="_blank">https://secure.tpay.com/x509/tpay-jws-root.pem</a>
        </li>
        <br/>
        <li>Sandbox signature certificate <a href="https://secure.sandbox.tpay.com/x509/notifications-jws.pem"
                                             target="_blank">https://secure.sandbox.tpay.com/x509/notifications-jws.pem</a>
        </li>
        <li>Sandbox Tpay CA root certificate <a href="https://secure.sandbox.tpay.com/x509/tpay-jws-root.pem"
                                                target="_blank">https://secure.sandbox.tpay.com/x509/tpay-jws-root.pem</a>
        </li>
    </ul>
    <p>
        For security reasons it is mandatory to verify the JWS signature to ensure that notification comes from the
        tpay.com
        notification service. Example implementation in PHP language look as follows:

    </p>

    <button type="button" onclick="document.getElementById('jws-code').toggleAttribute('hidden')">
        Click to expand the example PHP code
    </button>
    <div id="jws-code" hidden style="background: #f8f8f8; margin: 10px; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
        <table>
            <tr>
                <td style="padding-right: 10px;"><pre style="margin: 0; line-height: 125%;"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66</pre>
                </td>
                <td><pre style="margin: 0; line-height: 125%;"><span></span><span style="color: #9C6500">&lt;?php</span>
<span style="color: #3D7B7B; font-style: italic">// Get Request X-JWS-Signature header</span>
<span style="color: #19177C">$jws</span> <span style="color: #666">=</span> <span
                                style="color: #008000">isset</span>(<span style="color: #19177C">$_SERVER</span>[<span
                                style="color: #BA2121">&#39;HTTP_X_JWS_SIGNATURE&#39;</span>]) <span
                                style="color: #666">?</span> <span style="color: #19177C">$_SERVER</span>[<span
                                style="color: #BA2121">&#39;HTTP_X_JWS_SIGNATURE&#39;</span>] <span style="color: #666">:</span> <span
                                style="color: #008000; font-weight: bold">null</span>;
<span style="color: #008000; font-weight: bold">if</span> (<span
                                style="color: #008000; font-weight: bold">null</span> <span
                                style="color: #666">===</span> <span style="color: #19177C">$jws</span>) {
    <span style="color: #008000; font-weight: bold">exit</span>(<span style="color: #BA2121">&#39;FALSE - Missing JSW header&#39;</span>);
}
<span style="color: #3D7B7B; font-style: italic">// Extract JWS header properties</span>
<span style="color: #19177C">$jwsData</span> <span style="color: #666">=</span> <span
                                style="color: #008000">explode</span>(<span
                                style="color: #BA2121">&#39;.&#39;</span>, <span style="color: #19177C">$jws</span>);
<span style="color: #19177C">$headers</span> <span style="color: #666">=</span> <span
                                style="color: #008000">isset</span>(<span style="color: #19177C">$jwsData</span>[<span
                                style="color: #666">0</span>]) <span style="color: #666">?</span> <span
                                style="color: #19177C">$jwsData</span>[<span style="color: #666">0</span>] <span
                                style="color: #666">:</span> <span style="color: #008000; font-weight: bold">null</span>;
<span style="color: #19177C">$signature</span> <span style="color: #666">=</span> <span
                                style="color: #008000">isset</span>(<span style="color: #19177C">$jwsData</span>[<span
                                style="color: #666">2</span>]) <span style="color: #666">?</span> <span
                                style="color: #19177C">$jwsData</span>[<span style="color: #666">2</span>] <span
                                style="color: #666">:</span> <span style="color: #008000; font-weight: bold">null</span>;
<span style="color: #008000; font-weight: bold">if</span> (<span
                                style="color: #008000; font-weight: bold">null</span> <span
                                style="color: #666">===</span> <span style="color: #19177C">$headers</span> <span
                                style="color: #666">||</span> <span
                                style="color: #008000; font-weight: bold">null</span> <span
                                style="color: #666">===</span> <span style="color: #19177C">$signature</span>) {
    <span style="color: #008000; font-weight: bold">exit</span>(<span style="color: #BA2121">&#39;FALSE - Invalid JWS header&#39;</span>);
}
<span style="color: #3D7B7B; font-style: italic">// Decode received headers json string from base64_url_safe</span>
<span style="color: #19177C">$headersJson</span> <span style="color: #666">=</span> <span style="color: #008000">base64_decode</span>(<span
                                style="color: #008000">strtr</span>(<span style="color: #19177C">$headers</span>, <span
                                style="color: #BA2121">&#39;-_&#39;</span>, <span
                                style="color: #BA2121">&#39;+/&#39;</span>));
<span style="color: #3D7B7B; font-style: italic">// Get x5u header from headers json</span>
<span style="color: #19177C">$headersData</span> <span style="color: #666">=</span> <span style="color: #008000">json_decode</span>(<span
                                style="color: #19177C">$headersJson</span>, <span
                                style="color: #008000; font-weight: bold">true</span>);
<span style="color: #19177C">$x5u</span> <span style="color: #666">=</span> <span
                                style="color: #008000">isset</span>(<span
                                style="color: #19177C">$headersData</span>[<span
                                style="color: #BA2121">&#39;x5u&#39;</span>]) <span style="color: #666">?</span> <span
                                style="color: #19177C">$headersData</span>[<span
                                style="color: #BA2121">&#39;x5u&#39;</span>] <span style="color: #666">:</span> <span
                                style="color: #008000; font-weight: bold">null</span>;
<span style="color: #008000; font-weight: bold">if</span> (<span
                                style="color: #008000; font-weight: bold">null</span> <span
                                style="color: #666">===</span> <span style="color: #19177C">$x5u</span>) {
    <span style="color: #008000; font-weight: bold">exit</span>(<span style="color: #BA2121">&#39;FALSE - Missing x5u header&#39;</span>);
}
<span style="color: #3D7B7B; font-style: italic">// Check certificate url</span>
<span style="color: #3D7B7B; font-style: italic">// For sandbox please verify &#39;https://secure.sandbox.tpay.com&#39;</span>
<span style="color: #19177C">$prefix</span> <span style="color: #666">=</span> <span style="color: #BA2121">&#39;https://secure.tpay.com&#39;</span>;
<span style="color: #008000; font-weight: bold">if</span> (<span style="color: #008000">substr</span>(<span
                                style="color: #19177C">$x5u</span>, <span style="color: #666">0</span>, <span
                                style="color: #008000">strlen</span>(<span style="color: #19177C">$prefix</span>)) <span
                                style="color: #666">!==</span> <span style="color: #19177C">$prefix</span>) {
    <span style="color: #008000; font-weight: bold">exit</span>(<span style="color: #BA2121">&#39;FALSE - Wrong x5u url&#39;</span>);
}
<span style="color: #3D7B7B; font-style: italic">// Get JWS sign certificate from x5u uri</span>
<span style="color: #19177C">$certificate</span> <span style="color: #666">=</span> <span style="color: #008000">file_get_contents</span>(<span
                                style="color: #19177C">$x5u</span>);
<span style="color: #3D7B7B; font-style: italic">// Verify JWS sign certificate with Tpay CA certificate</span>
<span style="color: #3D7B7B; font-style: italic">// Get Tpay CA certificate to verify JWS sign certificate. CA certificate be cached locally.</span>
<span style="color: #19177C">$trusted</span> <span style="color: #666">=</span> <span style="color: #008000">file_get_contents</span>(<span
                                style="color: #BA2121">&#39;https://secure.tpay.com/x509/tpay-jws-root.pem&#39;</span>);
<span style="color: #3D7B7B; font-style: italic">// in php7.4+ with ext-openssl you can use openssl_x509_verify</span>
<span style="color: #008000; font-weight: bold">if</span> (<span style="color: #666">1</span> <span style="color: #666">!==</span> <span
                                style="color: #008000">openssl_x509_verify</span>(<span style="color: #19177C">$certificate</span>, <span
                                style="color: #19177C">$trusted</span>)) {
    <span style="color: #008000; font-weight: bold">exit</span>(<span style="color: #BA2121">&#39;FALSE - Signing certificate is not signed by Tpay CA certificate&#39;</span>);
}
<span style="color: #3D7B7B; font-style: italic">// or using phpseclib</span>
<span style="color: #19177C">$x509</span> <span style="color: #666">=</span> <span
                                style="color: #008000; font-weight: bold">new</span> \phpseclib3\File\X509();
<span style="color: #19177C">$x509</span><span style="color: #666">-&gt;</span><span
                                style="color: #687822">loadX509</span>(<span style="color: #19177C">$certificate</span>);
<span style="color: #19177C">$x509</span><span style="color: #666">-&gt;</span><span
                                style="color: #687822">loadCA</span>(<span style="color: #19177C">$trusted</span>);
<span style="color: #008000; font-weight: bold">if</span> (<span style="color: #666">!</span><span
                                style="color: #19177C">$x509</span><span style="color: #666">-&gt;</span><span
                                style="color: #687822">validateSignature</span>()) {
    <span style="color: #008000; font-weight: bold">exit</span>(<span style="color: #BA2121">&#39;FALSE - Signing certificate is not signed by Tpay CA certificate&#39;</span>);
}
<span style="color: #3D7B7B; font-style: italic">// Get request body</span>
<span style="color: #19177C">$body</span> <span style="color: #666">=</span> <span style="color: #008000">file_get_contents</span>(<span
                                style="color: #BA2121">&#39;php://input&#39;</span>);
<span style="color: #3D7B7B; font-style: italic">// Encode body to base46_url_safe</span>
<span style="color: #19177C">$payload</span> <span style="color: #666">=</span> <span
                                style="color: #008000">str_replace</span>(<span
                                style="color: #BA2121">&#39;=&#39;</span>, <span
                                style="color: #BA2121">&#39;&#39;</span>, <span
                                style="color: #008000">strtr</span>(<span
                                style="color: #008000">base64_encode</span>(<span style="color: #19177C">$body</span>), <span
                                style="color: #BA2121">&#39;+/&#39;</span>, <span
                                style="color: #BA2121">&#39;-_&#39;</span>));
<span style="color: #3D7B7B; font-style: italic">// Decode received signature from base64_url_safe</span>
<span style="color: #19177C">$decodedSignature</span> <span style="color: #666">=</span> <span style="color: #008000">base64_decode</span>(<span
                                style="color: #008000">strtr</span>(<span
                                style="color: #19177C">$signature</span>, <span
                                style="color: #BA2121">&#39;-_&#39;</span>, <span
                                style="color: #BA2121">&#39;+/&#39;</span>));
<span style="color: #3D7B7B; font-style: italic">// Verify RFC 7515: JSON Web Signature (JWS) with ext-openssl</span>
<span style="color: #3D7B7B; font-style: italic">// Get public key from certificate</span>
<span style="color: #19177C">$publicKey</span> <span style="color: #666">=</span> <span style="color: #008000">openssl_pkey_get_public</span>(<span
                                style="color: #19177C">$certificate</span>);
<span style="color: #008000; font-weight: bold">if</span> (<span style="color: #666">1</span> <span style="color: #666">!==</span> <span
                                style="color: #008000">openssl_verify</span>(<span
                                style="color: #19177C">$headers</span> <span style="color: #666">.</span> <span
                                style="color: #BA2121">&#39;.&#39;</span> <span style="color: #666">.</span> <span
                                style="color: #19177C">$payload</span>, <span
                                style="color: #19177C">$decodedSignature</span>, <span
                                style="color: #19177C">$publicKey</span>, OPENSSL_ALGO_SHA256)) {
    <span style="color: #008000; font-weight: bold">exit</span>(<span style="color: #BA2121">&#39;FALSE - Invalid JWS signature&#39;</span>);
}
<span style="color: #3D7B7B; font-style: italic">// or using phpseclib</span>
<span style="color: #19177C">$publicKey</span> <span style="color: #666">=</span> <span
                                style="color: #19177C">$x509</span><span style="color: #666">-&gt;</span><span
                                style="color: #687822">getPublicKey</span>()
    <span style="color: #666">-&gt;</span><span style="color: #687822">withHash</span>(<span style="color: #BA2121">&#39;sha256&#39;</span>)
    <span style="color: #666">-&gt;</span><span style="color: #687822">withPadding</span>(\phpseclib3\Crypt\RSA<span
                                style="color: #666">::</span><span style="color: #687822">SIGNATURE_PKCS1</span>);
<span style="color: #008000; font-weight: bold">if</span> (<span style="color: #666">!</span><span
                                style="color: #19177C">$publicKey</span><span style="color: #666">-&gt;</span><span
                                style="color: #687822">verify</span>(<span style="color: #19177C">$headers</span> <span
                                style="color: #666">.</span> <span style="color: #BA2121">&#39;.&#39;</span> <span
                                style="color: #666">.</span> <span style="color: #19177C">$payload</span>, <span
                                style="color: #19177C">$decodedSignature</span>)) {
    <span style="color: #008000; font-weight: bold">exit</span>(<span style="color: #BA2121">&#39;FALSE - Invalid JWS signature&#39;</span>);
}
<span style="color: #3D7B7B; font-style: italic">// JWS signature verified successfully.</span>
<span style="color: #3D7B7B; font-style: italic">// Process request data and send valid response to notification service.</span>
<span style="color: #19177C">$transactionData</span> <span style="color: #666">=</span> <span style="color: #008000">json_decode</span>(<span
                                style="color: #19177C">$body</span>, <span style="color: #008000; font-weight: bold">true</span>);
<span style="color: #008000; font-weight: bold">echo</span> <span style="color: #BA2121">&#39;{&quot;result&quot;: true}&#39;</span>;
</pre>
                </td>
            </tr>
        </table>
    </div>


    <p>
        Keep in mind that this is only a basic example to help you understand the JWS signature verification process and
        should be adjusted to meet your requirements. There are a lot of external libraries to verify JWS token. You can
        find list of them in many languages on
        <a href="https://jwt.io/libraries" target="_blank" rel="nofollow">https://jwt.io/libraries</a>
    </p>

    <p>
        After each successful transaction, Tpay.com system always sends an email notification to
        the customer,
        but the merchant email notification is optional and will be sent if the valid email
        callback was provided.
        <br/>
        <b>An example webhook content:</b>
    </p>

    <div style="background: #f8f8f8; margin: 10px; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre
                style="margin: 0; line-height: 125%;"><span></span>{
<span style="color: #BBB">    </span><span style="color: #008000; font-weight: bold">&quot;type&quot;</span>:<span
                    style="color: #BBB"> </span><span style="color: #BA2121">&quot;marketplace_transaction&quot;</span>,
<span style="color: #BBB">    </span><span style="color: #008000; font-weight: bold">&quot;data&quot;</span>:<span
                    style="color: #BBB"> </span>{
<span style="color: #BBB">        </span><span
                    style="color: #008000; font-weight: bold">&quot;transactionId&quot;</span>:<span
                    style="color: #BBB"> </span><span
                    style="color: #BA2121">&quot;01HGDE8BXSHGH7170CJAT2WVWF&quot;</span>,
<span style="color: #BBB">        </span><span
                    style="color: #008000; font-weight: bold">&quot;transactionTitle&quot;</span>:<span
                    style="color: #BBB"> </span><span style="color: #BA2121">&quot;M-WWC6X&quot;</span>,
<span style="color: #BBB">        </span><span
                    style="color: #008000; font-weight: bold">&quot;transactionAmount&quot;</span>:<span
                    style="color: #BBB"> </span><span style="color: #666">5</span>,
<span style="color: #BBB">        </span><span style="color: #008000; font-weight: bold">&quot;transactionPaidAmount&quot;</span>:<span
                    style="color: #BBB"> </span><span style="color: #666">5</span>,
<span style="color: #BBB">        </span><span
                    style="color: #008000; font-weight: bold">&quot;transactionStatus&quot;</span>:<span
                    style="color: #BBB"> </span><span style="color: #BA2121">&quot;correct&quot;</span>,
<span style="color: #BBB">        </span><span style="color: #008000; font-weight: bold">&quot;transactionHiddenDescription&quot;</span>:<span
                    style="color: #BBB"> </span><span style="color: #BA2121">&quot;QWERTY321&quot;</span>,
<span style="color: #BBB">        </span><span
                    style="color: #008000; font-weight: bold">&quot;payerEmail&quot;</span>:<span
                    style="color: #BBB"> </span><span style="color: #BA2121">&quot;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d4a0b1a7a094a0a4b5adfab7bbb9">[email&#160;protected]</a>&quot;</span>,
<span style="color: #BBB">        </span><span
                    style="color: #008000; font-weight: bold">&quot;transactionDate&quot;</span>:<span
                    style="color: #BBB"> </span><span style="color: #BA2121">&quot;2023-11-29 12:47:05&quot;</span>,
<span style="color: #BBB">        </span><span style="color: #008000; font-weight: bold">&quot;transactionDescription&quot;</span>:<span
                    style="color: #BBB"> </span><span
                    style="color: #BA2121">&quot;Test marketplace transaction&quot;</span>,
<span style="color: #BBB">        </span><span style="color: #008000; font-weight: bold">&quot;transactionBookingDate&quot;</span>:<span
        style="color: #BBB"> </span><span
        style="color: #BA2121">&quot;2023-11-29 12:47:07&quot;</span>
<span style="color: #BBB">    </span>}
}
</pre>
    </div>

    <h4><b>The table of POST notification contents:</b></h4>

    <table style="background: #f8f8f8; margin: 10px; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em; width: 100%">
        <tbody class="tpay-table">
        <tr class="even-row">
            <th style="width: 20%;">Parameter</th>
            <th>Details</th>
        </tr>
        <tr class="odd-row">
            <td>type</td>
            <td>Const "marketplace_transaction"</td>
        </tr>
        <tr class="odd-row">
            <td>transactionId</td>
            <td>The string ID of parent transaction (ULID encoded to base32 format)</td>
        </tr>
        <tr class="even-row">
            <td>transactionTitle</td>
            <td>Transaction user-friendly title assigned by the Tpay system.</td>
        </tr>
        <tr class="odd-row">
            <td>transactionDate</td>
            <td>Transaction creation date.</td>
        </tr>
        <tr class="even-row">
            <td>transactionHiddenDescription</td>
            <td>This parameter will contain the exact value passed with create transaction
                request from your system. You may use it to identify the order ID on your
                side.
            </td>
        </tr>
        <tr class="odd-row">
            <td>transactionAmount</td>
            <td>Transaction requested amount.</td>
        </tr>
        <tr class="even-row">
            <td>transactionPaidAmount</td>
            <td>Real amount paid by a customer.<br/>
                Currently the marketplace system allows only payments matching the exact
                amount and currency of parent transaction.
                <br/>
                Payments not matching the parent transaction amount or currency will be
                automatically cancelled and returned to payer.
            </td>
        </tr>
        <tr class="odd-row">
            <td>transactionDescription</td>
            <td>Transaction description provided while creating transaction</td>
        </tr>
        <tr id="tr_status" class="even-row">
            <td>transactionStatus</td>
            <td>The successful payment notification will contain word "correct". No other
                statuses are currently available.
            </td>
        </tr>
        <tr class="even-row">
            <td>payerEmail</td>
            <td>Payer email address. Please note, the payer address may change during the
                payment process.
            </td>
        </tr>
        <tr class="even-row">
            <td>cardToken</td>
            <td>This is token used by transaction method. It will be sent only once after successfull card payment if
                the card saving was requested. This won't be present in transactions with different channel.
            </td>
        </tr>
        <tr class="odd-row">
            <td>transactionBookingDate</td>
            <td>Transaction booking date.</td>
        </tr>
        </tbody>
    </table>
    <p>
        <b>Note 1:</b> Merchant system should print <b>{"result": true}</b> response when all validations
        are correct. If the response is different, the notifications will be rescheduled.<br/>
        The notifications are rescheduled according to the following schema:
    </p>
    <table style="background: #f8f8f8; margin: 10px; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em; width: 100%;">
        <tbody class="tpay-table">
        <tr class="even-row">
            <th style="width: 20%;">Notification number</th>
            <th>Time interval</th>
        </tr>
        <tr class="odd-row">
            <td>1-10</td>
            <td>1 minute</td>
        </tr>
        <tr class="even-row">
            <td>11-20</td>
            <td>3 minutes</td>
        </tr>
        <tr class="odd-row">
            <td>21-30</td>
            <td>10 minutes</td>
        </tr>
        <tr class="even-row">
            <td>31-35</td>
            <td>1h</td>
        </tr>
        <tr class="odd-row">
            <td>36</td>
            <td>12h after last notification</td>
        </tr>
        <tr class="even-row">
            <td>37</td>
            <td>24h after last notification</td>
        </tr>
        </tbody>
    </table>
    <p>
        <b>Note 2:</b> The merchant system must be prepared for the situation when one
        notification is sent more than once. Submitting the notification again cannot result
        in a reissue service delivery / release of goods, etc. Notifications for a
        particular transaction will always contain the same transaction identifier
        (transaction_id).</p>
    <p>
        <b>Note 3:</b> The notification system does not support 302 and 301 redirections.
        That means it is not supported to redirect notifications sent from the resulting URL
        to another. If the merchant system is configured to for example: redirect from http
        to https, enter the destination address to receive notifications after all
        redirections.
    </p>
    <p>
        <b>Note 4:</b> Tpay servers are equipped with a firewall that blocks traffic on
        other ports than standard www (i.e. 80, 8080, 443).
    </p>
    <p>
        <b>Note 5:</b> The currently supported protocol by Tpay is the TLS 1.2 protocol that
        provides confidentiality and integrity of data transmission as well as server
        authentication. The servers using older protocols like SSLv3 may cause an error in
        receiving notifications.
    </p>
    <p>
        <b>Note 6:</b> The recommended method of handling notifications is putting them into
        internal queue of merchant system. Making all order correlated business logic
        synchronously before printing response may cause connection timeout.
    </p>
    <style>
        #jws-code {
            transition: max-height 0.2s ease-out;
            max-height: 100%;
        }

        #jws-code[hidden] {
            transition: max-height 0.2s ease-out;
            max-height: 0;
            overflow: hidden;
        }
    </style>
    </div>
    <div id="marketplace-credit-card">
            <p>
        Tpay Marketplace system allows Merchant to host payment form on his website and perform
        a sale using credit card details provided by the payer.<br/>
        This payment method supports 3D Secure validation which is an additional security layer
        for online credit and debit card transactions.<br/>
        This approach requires special security considerations. We support secure communication
        by encrypting card data (card number, validity date and cvv/cvs number) on the client
        side (javascript)
        with Merchant public RSA key concatenated as one parameter (card).<br/>
        <b>A valid SSL certificate on the Merchant domain is required.</b>
    </p>
    <p>
        The application flow is
        presented below for clarification:
    </p>

    <ol>
        <li>Generate webpage with your public RSA key in javascript</li>
        <li>Before sending payment form, insert new input with encrypted card data using your
            public key and clear inputs with card data so only encrypted data will be sent and
            submit form.
        </li>
        <li>On the backend prepare parameters and send them with
            <a href="#tag/Marketplace/operation/post_marketplace_transaction_pay" style="font-family: monospace; color: black;">marketplace/v1/transaction/{id}/pay</a> method
        </li>
        <li>Redirect the payer to the received 3DS verification URL</li>
        <li>Receive an asynchronous notification about successful payment (see the notifications
            section).
        </li>
    </ol>

    <p>
        Card data must be encrypted with public key and encoded in base64. The credit card data
        must be concatenated with vertical bar | ie.<br/>
        <span style="font-family: monospace">1234567891234567|05/17|123|https://merchantwebsite.com</span><br/>
        The concatenation pattern is: <span
                style="font-family: monospace">card_number|valid_date|CVV|Merchant_POS_url</span>
    </p>

    <button type="button" onclick="document.getElementById('public-key').toggleAttribute('hidden')">
        Click to expand the test public key
    </button>
    <pre id="public-key" hidden style="background: #f8f8f8; margin: 10px; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA8nZcu8Y9cU2/AMP9P6qz
pLsaW8jR/dyp5RFOAL1vydg+mIDuVFgt5TDDD6LxWsHnvDUhubpQNTn1sC2Elzgd
NyhF9ZDTNNEZmwjdX6aMF4AKOt2usfBoEdlff+DYF3ZejoWlaPuqV0c/HuyjrCaO
jGgNYCLzMTb/kEsX1qu0NqH1o4DDc7lOr/P4XJnkaP44WkZYaAY0qAlJJyY0yGkG
7fSVm3YI1/YO0/jRRIHJMdisW1/fsBN6dabcDk2e5xie8nuqliXEqvkpoZlgTPJN
ei6na2ODRwtJUI5YJuCYrlNIqIyddwGyt9tS5fsaRcvS95WT/G1J+96ki6eV8ydU
wwIDAQAB
-----END PUBLIC KEY-----</pre>
    <p>
        We have published code samples, libraries and instructions to give some insights on the process
        - see <a href="https://github.com/tpay-com/tpay-php" target="_blank">https://github.com/tpay-com/tpay-php</a>
        .<br/>
        The library used in the example has a limit of 117 input characters for encryption.
        In production mode, this generated hash works only once and should always be generated even for
        the same card data.
    </p>

    <ul>
        <li>The best way to implement 3DS is to open a link to 3D-Secure authentication in a new window or
            make a simple redirection.
        </li>
        <li>
            Do not use an inline frame to implement the 3D-Secure authentication on Merchants Site. In
            this case, some banks can block 3DS authorisation.
        </li>

        <li>
            The example card allowed for test cases is <span style="font-family: monospace">1234 5678 9123 4567</span>.
            Any other number will return business payment
            error like insufficient funds.
            Use this examples to test the encryption methods.
        </li>
    </ul>
    <style>
        #public-key {
            transition: max-height 0.2s ease-out;
            max-height: 100%;
        }
        #public-key[hidden] {
            transition: max-height 0.2s ease-out;
            max-height: 0;
            overflow: hidden;
        }
    </style>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">
        var target = document.getElementById('swagger-ui');

        if (target) {
            var observer = new MutationObserver(function() {
                var elementAuth = document.querySelector('a[aria-label="section/Authentication"]');
                if (elementAuth) {
                    var dataAuth = document.getElementById('authentication');
                    elementAuth.parentElement.parentElement.appendChild(dataAuth);
                }
                var elementNotification = document.querySelector('a[aria-label="section/Marketplace-Notifications"]');
                if (elementNotification) {
                    var dataNotification = document.getElementById('marketplace-notification');
                    elementNotification.parentElement.parentElement.appendChild(dataNotification);
                }
                var elementCards = document.querySelector('a[aria-label="section/Credit-card-payments"]');
                if (elementCards) {
                    var dataCards = document.getElementById('marketplace-credit-card');
                    elementCards.parentElement.parentElement.appendChild(dataCards);
                }
            });

            observer.observe(target, {
                childList: true,
                subtree: false,
                characterData: false
            });
        }
    </script>
    <style>
        .menu-content > div:first-child { padding: 20px; }
    </style>
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.eu01.nr-data.net","licenseKey":"NRJS-e350529f8ac9ccb1bfa","applicationID":"383735115","transactionName":"MhBSZQoZVkBVVxFfCgtac0QLDFdeG1UVRksXEFReGxRB","queueTime":0,"applicationTime":318,"atts":"HldRE0IDRU4=","errorBeacon":"bam.eu01.nr-data.net","agent":""}</script></body>
</html>. This will confirm if there's a general network/DNS issue.
        5.  **Timeout Value:** The  request in  does not have an explicit timeout. Add a reasonable timeout (e.g., ) to the  call to see if it provides a cleaner error.
    -   **Why fix this issue and what will be achieved with the fix?**: This is the final step to make the subscription feature functional, allowing users to purchase plans.
    -   **Status**: IN PROGRESS
    -   **Is recurring issue?**: N
    -   **Should Test frontend/backend/both after fix?**: backend
    -   **Blocked on other issue**: None

**In progress Task List**:
None. The priority is fixing the bug.

**Upcoming and Future Tasks**
None. All user-requested features have been implemented. The next step is to fix the outstanding bug and confirm with the user.

**Completed work in this session**
-   **Admin User Management**: Implemented the full frontend UI for creating, viewing, updating, and deleting users.
-   **Reference Image Upload**: Added the ability to upload a reference image in the image generator.
-   **Image Library & Lightbox**: Created a dedicated page to browse all generated images, with a full-size lightbox viewer and management actions (download, AI edit, delete).
-   **Batch Image Generation**: Implemented a Generate 4 Variants feature that displays results in a 2x2 grid.
-   **AI Image Editing**: Added a dialog for AI-powered image editing with modes like inpainting and style transfer.
-   **Standalone Image Generator Page**: Created a separate page for the image generator, accessible from the sidebar.
-   **PDF Font Fix**: Corrected the PDF export to properly render Polish characters using the DejaVu font.
-   **WordPress Integration**: Built the backend service and frontend UI to allow publishing articles to WordPress and downloading a companion plugin.
-   **Visual Editor Toolbar**: Added a formatting toolbar to the rich-text editor, enabling direct content manipulation.
-   **1:1 Export Styling**: Ensured that exported HTML and PDF files use the same Kurdynowski brand CSS as the editor for a consistent look.
-   **Subscription System**: Created the backend models, services, and API endpoints for managing subscriptions, along with a complete frontend pricing page integrated with TPay.

**Earlier issues found/mentioned but not fixed**
None.

**Known issue recurrence from previous fork**
-   Issue recurrence in previous fork: None
-   Recurrence count: 0
-   Status: NA

**Code Architecture**


**Key Technical Concepts**
-   **Stack**: FARM (FastAPI, React, MongoDB)
-   **Payments**: TPay integration for handling subscription payments.
-   **PDF Generation**:  library used for creating PDF documents from HTML content.
-   **Styling**:  and global CSS () for consistent branding.
-   **Rich Text Editing**: A  div combined with a custom toolbar component () for direct WYSIWYG editing.

**key DB schema**
-   ****: 
-   ****: 
-   ****: 
-   ****: 

**changes in tech stack**
-   Added  for PDF generation.
-   Added  for backend HTTP requests to TPay.

**All files of reference**
-   : Contains the logic for communicating with the TPay API. **This is the likely location of the bug.**
-   : Manages subscription state in the database.
-   : Updated to include branded CSS in exports.
-   : New service for WordPress integration.
-   : Updated with endpoints for subscriptions, WordPress, and the image library.
-   : The new UI for selecting a subscription plan.
-   : The new UI for the image gallery.
-   : The new toolbar for the rich-text editor.
-   : Updated to include the new visual editor toolbar.

**Areas that need refactoring**:
None. The code is modular and recently updated.

**key api endpoints**
-   : **(FAILING)** Initiates a payment with TPay.
-   : Checks the current user's subscription status.
-   : Publishes an article to WordPress.
-   : Downloads the companion WordPress plugin.
-   : Fetches all images for the user's library.
-   : Applies an AI edit to an image.

**Critical Info for New Agent**
-   **Primary Goal**: Your immediate and only task is to fix the TPay integration. The  endpoint is timing out when contacting the TPay API, resulting in a 520 error. Follow the debug checklist provided in the All Pending/In progress Issue list section.
-   **Admin Credentials**: Use  /  to test all features, including the subscription flow.
-   **TPay is Mocked**: The TPay integration uses placeholder credentials. The goal is to establish a successful API connection, not to process a real payment. The 520 error indicates a network-level problem, not an authentication problem.

**documents and test reports created in this job**
-   /app/design_guidelines.md
-   /app/plan.md
-   /app/test_reports/iteration_6.json (and previous reports)

**Last 10 User Messages and any pending HUMAN messages**
-   ** (IN PROGRESS)**: User requested three features at once: 1) manual editing in the visual editor, 2) 1:1 visual styling on export, and 3) a subscription system (monthly/semi-annual/annual) with TPay. The agent has implemented all three, but the TPay integration has a bug.
-   ** (DONE)**: User confirmed the plan to implement the above features.
-   ** (DONE)**: User chose TPay as the payment provider.
-   **The rest of the messages** are the user clarifying requirements for the subscription system.

**Project Health Check:**
-   **Broken**:
    -   Subscription Checkout ()
-   **Mocked**:
    -   TPay API credentials.

**3rd Party Integrations**
-   **OpenAI , ** (Text Generation)  uses Emergent LLM Key
-   **Gemini ** (Image Generation)  uses Emergent LLM Key
-   **TPay** (Payments)  requires User API Key (currently mocked).
-   **MongoDB**: Primary database.
-   **Passlib, python-jose**: For backend authentication.

**Testing status**
-   **Testing agent used after significant changes**: YES
-   **Troubleshoot agent used after agent stuck in loop**: NO
-   **Test files created**: None
-   **Known regressions**: The TPay checkout functionality is broken.

**Credentials to test flow:**
-   **Admin User**:
    -   **Email**: 
    -   **Password**: 

**What agent forgot to execute**
The agent successfully implemented all requested features but did not manage to fix the  in the TPay integration before the session ended. The fix for this bug is the pending task.</analysis>
